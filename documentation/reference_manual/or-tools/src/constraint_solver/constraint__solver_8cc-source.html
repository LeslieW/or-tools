<!-- Good morning, Mr. Phelps. -->
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>or-tools/src/constraint_solver/constraint_solver.cc Source File - Doxy</title>
    <link rel="shortcut icon" href="../../../favicon.ico">
    <!-- Both stylesheets are supplied by Doxygen, with maybe minor tweaks from Google. -->
    <link href="../../../doxygen.css" rel="stylesheet" type="text/css">
    <link href="../../../tabs.css" rel="stylesheet" type="text/css">
  </head>

  <body topmargin=0 leftmargin=20 bottommargin=0 rightmargin=20 marginwidth=20 marginheight=0>
  <!-- Second part of the secret behind Doxy logo always having the word "Doxy" with the color of the day. -->
  <style>
    a.doxy_logo:hover {
      background-color: #359621
    }
  </style>

  <table width=100% cellpadding=0 cellspacing=0 border=0>
    <!-- Top horizontal line with the color of the day. -->
    <tr valign=top>
      <td colspan=3 bgcolor=#359621 height=3></td>
    </tr>

    <!-- Header row with the links at the right. -->
    <tr valign=top>
      <td colspan=3 align=right>
        <font size=-1>
          Generated on: <font color=#359621><b>Fri Aug 10 00:46:07 CEST 2012</b></font>
            for Revision:2055
        </font>
      </td>
    </tr>

    <!-- Header row with the logo and the search form. -->
    <tr valign=top>
      <!-- Logo. -->
      <td align=left width=150>
        <table width=150 height=54 cellpadding=0 cellspacing=0 border=0>
          <tr valign=top>
            <!-- First part of the secret behind Doxy logo always having the word "Doxy" with the color of the day. -->
            <td bgcolor=#359621>
              <a class="doxy_logo" href="../../../index.html"><img src="../../../doxy_logo.png" alt="Doxy" border=0></a>
            </td>
          </tr>
        </table>
      </td>
    </tr>

    <!-- Tiny vertical space below the form. -->
    <tr valign=top>
      <td colspan=3 height=3></td>
    </tr>
  </table>

  <!-- Header navigation row. -->
  <div class="memproto">
    <table width=100% cellpadding=0 cellspacing=0 border=0>
      <tr>
        <td align=left style="padding-left: 20px"><font size=+1><b><tt><font color=#333333>//
            <a href="../../../index.html"><font color=#359621>doxy</font></a>/</font>
            <a href="../../../or-tools/index.html">or-tools</a>/
            <a href="../../../or-tools/src/index.html">src</a>/
            <a href="../../../or-tools/src/constraint_solver/index.html">constraint_solver</a>/
            </tt></b></font>
        </td>
      </tr>
    </table>
  </div>
  <br />
    <!-- No subdirs found. -->
  <!-- End of header. -->
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>or-tools/src/constraint_solver/constraint_solver.cc</h1><a href="constraint__solver_8cc.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// Copyright 2010-2012 Google</span>
<a name="l00002"></a>00002 <span class="comment">// Licensed under the Apache License, Version 2.0 (the "License");</span>
<a name="l00003"></a>00003 <span class="comment">// you may not use this file except in compliance with the License.</span>
<a name="l00004"></a>00004 <span class="comment">// You may obtain a copy of the License at</span>
<a name="l00005"></a>00005 <span class="comment">//</span>
<a name="l00006"></a>00006 <span class="comment">//     http://www.apache.org/licenses/LICENSE-2.0</span>
<a name="l00007"></a>00007 <span class="comment">//</span>
<a name="l00008"></a>00008 <span class="comment">// Unless required by applicable law or agreed to in writing, software</span>
<a name="l00009"></a>00009 <span class="comment">// distributed under the License is distributed on an "AS IS" BASIS,</span>
<a name="l00010"></a>00010 <span class="comment">// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<a name="l00011"></a>00011 <span class="comment">// See the License for the specific language governing permissions and</span>
<a name="l00012"></a>00012 <span class="comment">// limitations under the License.</span>
<a name="l00013"></a>00013 <span class="comment">//</span>
<a name="l00014"></a>00014 <span class="comment">// This file implements the core objects of the constraint solver:</span>
<a name="l00015"></a>00015 <span class="comment">// Solver, Search, Queue, ... along with the main resolution loop.</span>
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <span class="preprocessor">#include "<a class="code" href="constraint__solver_8h.html">constraint_solver/constraint_solver.h</a>"</span>
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 <span class="preprocessor">#include &lt;setjmp.h&gt;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &lt;iosfwd&gt;</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include "base/callback.h"</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include "base/commandlineflags.h"</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include "base/integral_types.h"</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include "base/logging.h"</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include "base/macros.h"</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include "base/scoped_ptr.h"</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include "base/stringprintf.h"</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include "base/file.h"</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include "base/recordio.h"</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include "base/stringpiece.h"</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include "zlib.h"</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include "base/concise_iterator.h"</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include "base/map-util.h"</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include "base/stl_util.h"</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include "<a class="code" href="constraint__solveri_8h.html">constraint_solver/constraint_solveri.h</a>"</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include "constraint_solver/model.pb.h"</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include "util/const_int_array.h"</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include "util/tuple_set.h"</span>
<a name="l00041"></a>00041 
<a name="l00042"></a>00042 <a class="code" href="constraint__solver_8cc.html#e648fc6b2a626b2bc2761dadf18d3725" title="Licensed under the Apache License, Version 2.0 (the &amp;quot;License&amp;quot;); you may...">DEFINE_bool</a>(cp_trace_propagation,
<a name="l00043"></a>00043             <span class="keyword">false</span>,
<a name="l00044"></a>00044             <span class="stringliteral">"Trace propagation events (constraint and demon executions,"</span>
<a name="l00045"></a>00045             <span class="stringliteral">" variable modifications)."</span>);
<a name="l00046"></a>00046 <a class="code" href="constraint__solver_8cc.html#e648fc6b2a626b2bc2761dadf18d3725" title="Licensed under the Apache License, Version 2.0 (the &amp;quot;License&amp;quot;); you may...">DEFINE_bool</a>(cp_trace_search, <span class="keyword">false</span>, <span class="stringliteral">"Trace search events"</span>);
<a name="l00047"></a>00047 <a class="code" href="constraint__solver_8cc.html#e648fc6b2a626b2bc2761dadf18d3725" title="Licensed under the Apache License, Version 2.0 (the &amp;quot;License&amp;quot;); you may...">DEFINE_bool</a>(cp_show_constraints, <span class="keyword">false</span>,
<a name="l00048"></a>00048             <span class="stringliteral">"show all constraints added to the solver."</span>);
<a name="l00049"></a>00049 <a class="code" href="constraint__solver_8cc.html#e648fc6b2a626b2bc2761dadf18d3725" title="Licensed under the Apache License, Version 2.0 (the &amp;quot;License&amp;quot;); you may...">DEFINE_bool</a>(cp_print_model, <span class="keyword">false</span>,
<a name="l00050"></a>00050             <span class="stringliteral">"use PrintModelVisitor on model before solving."</span>);
<a name="l00051"></a>00051 <a class="code" href="constraint__solver_8cc.html#e648fc6b2a626b2bc2761dadf18d3725" title="Licensed under the Apache License, Version 2.0 (the &amp;quot;License&amp;quot;); you may...">DEFINE_bool</a>(cp_model_stats, <span class="keyword">false</span>,
<a name="l00052"></a>00052             <span class="stringliteral">"use StatisticsModelVisitor on model before solving."</span>);
<a name="l00053"></a>00053 <a class="code" href="constraint__solver_8cc.html#fdb7c9c90654efc5e495f1b1cd3aa7ac">DEFINE_string</a>(cp_export_file, <span class="stringliteral">""</span>, <span class="stringliteral">"Export model to file using CPModelProto."</span>);
<a name="l00054"></a>00054 <a class="code" href="constraint__solver_8cc.html#e648fc6b2a626b2bc2761dadf18d3725" title="Licensed under the Apache License, Version 2.0 (the &amp;quot;License&amp;quot;); you may...">DEFINE_bool</a>(cp_no_solve, <span class="keyword">false</span>, <span class="stringliteral">"Force failure at the beginning of a search."</span>);
<a name="l00055"></a>00055 <a class="code" href="constraint__solver_8cc.html#fdb7c9c90654efc5e495f1b1cd3aa7ac">DEFINE_string</a>(cp_profile_file, <span class="stringliteral">""</span>, <span class="stringliteral">"Export profiling overview to file."</span>);
<a name="l00056"></a>00056 <a class="code" href="constraint__solver_8cc.html#e648fc6b2a626b2bc2761dadf18d3725" title="Licensed under the Apache License, Version 2.0 (the &amp;quot;License&amp;quot;); you may...">DEFINE_bool</a>(cp_verbose_fail, <span class="keyword">false</span>, <span class="stringliteral">"Verbose output when failing."</span>);
<a name="l00057"></a>00057 <a class="code" href="constraint__solver_8cc.html#e648fc6b2a626b2bc2761dadf18d3725" title="Licensed under the Apache License, Version 2.0 (the &amp;quot;License&amp;quot;); you may...">DEFINE_bool</a>(cp_name_variables, <span class="keyword">false</span>, <span class="stringliteral">"Force all variables to have names."</span>);
<a name="l00058"></a>00058 <a class="code" href="constraint__solver_8cc.html#e648fc6b2a626b2bc2761dadf18d3725" title="Licensed under the Apache License, Version 2.0 (the &amp;quot;License&amp;quot;); you may...">DEFINE_bool</a>(cp_name_cast_variables, <span class="keyword">false</span>,
<a name="l00059"></a>00059             <span class="stringliteral">"Name variables casted from expressions"</span>);
<a name="l00060"></a>00060 
<a name="l00061"></a><a class="code" href="constraint__solver_8cc.html#c13a1be8287ff935b4a93be3cc716e79">00061</a> <span class="keywordtype">void</span> <a class="code" href="constraint__solver_8cc.html#c13a1be8287ff935b4a93be3cc716e79">ConstraintSolverFailsHere</a>() {
<a name="l00062"></a>00062   VLOG(3) &lt;&lt; <span class="stringliteral">"Fail"</span>;
<a name="l00063"></a>00063 }
<a name="l00064"></a>00064 
<a name="l00065"></a>00065 <span class="preprocessor">#if defined(_MSC_VER)  // WINDOWS</span>
<a name="l00066"></a>00066 <span class="preprocessor"></span><span class="preprocessor">#pragma warning(disable : 4351 4355)</span>
<a name="l00067"></a>00067 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00068"></a>00068 <span class="preprocessor"></span>
<a name="l00069"></a>00069 <span class="keyword">namespace </span>operations_research {
<a name="l00070"></a>00070 
<a name="l00071"></a>00071 <span class="comment">// ----- SolverParameters -----</span>
<a name="l00072"></a>00072 
<a name="l00073"></a><a class="code" href="structoperations__research_1_1SolverParameters.html#96250ef7c8113b78cc680d7cc66cd3d0">00073</a> <a class="code" href="structoperations__research_1_1SolverParameters.html#96250ef7c8113b78cc680d7cc66cd3d0" title="SolverParameters.">SolverParameters::SolverParameters</a>()
<a name="l00074"></a>00074     : compress_trail(kDefaultTrailCompression),
<a name="l00075"></a>00075       trail_block_size(kDefaultTrailBlockSize),
<a name="l00076"></a>00076       array_split_size(kDefaultArraySplitSize),
<a name="l00077"></a>00077       store_names(kDefaultNameStoring),
<a name="l00078"></a>00078       profile_level(kDefaultProfileLevel),
<a name="l00079"></a>00079       trace_level(kDefaultTraceLevel),
<a name="l00080"></a>00080       name_all_variables(kDefaultNameAllVariables) {}
<a name="l00081"></a>00081 
<a name="l00082"></a>00082 <span class="comment">// ----- Forward Declarations and Profiling Support -----</span>
<a name="l00083"></a>00083 <span class="keyword">extern</span> <a class="code" href="classoperations__research_1_1DemonProfiler.html" title="DemonProfiler manages the profiling of demons and allows access to gathered data...">DemonProfiler</a>* <a class="code" href="namespaceoperations__research.html#c29a3acd03ed409504d33c2ee4966a1a" title="Forward Declarations and Profiling Support.">BuildDemonProfiler</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> solver);
<a name="l00084"></a>00084 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#5a382b6532b01659ec7d7dac6fb93bad">DeleteDemonProfiler</a>(<a class="code" href="classoperations__research_1_1DemonProfiler.html" title="DemonProfiler manages the profiling of demons and allows access to gathered data...">DemonProfiler</a>* <span class="keyword">const</span> monitor);
<a name="l00085"></a>00085 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#a8bbbade1fbab7f5db2a3a260896fe14" title="Exported Functions.">InstallDemonProfiler</a>(<a class="code" href="classoperations__research_1_1DemonProfiler.html" title="DemonProfiler manages the profiling of demons and allows access to gathered data...">DemonProfiler</a>* <span class="keyword">const</span> monitor);
<a name="l00086"></a>00086 
<a name="l00087"></a>00087 
<a name="l00088"></a>00088 <span class="comment">// TODO(user): remove this complex logic.</span>
<a name="l00089"></a>00089 <span class="comment">// We need the double test because parameters are set too late when using</span>
<a name="l00090"></a>00090 <span class="comment">// python in the open source. This is the cheapest work-around.</span>
<a name="l00091"></a><a class="code" href="classoperations__research_1_1Solver.html#3a3a7bcede3913722625b407d45eb998">00091</a> <span class="keywordtype">bool</span> Solver::InstrumentsDemons()<span class="keyword"> const </span>{
<a name="l00092"></a>00092   <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1Solver.html#12362bcb3747225254b572fdf1fd1854" title="Returns whether we are profiling the solver.">IsProfilingEnabled</a>() || <a class="code" href="classoperations__research_1_1Solver.html#dde693b0c593dc1c4ef7fa75c0bf4553" title="Returns whether we are tracing variables.">InstrumentsVariables</a>();
<a name="l00093"></a>00093 }
<a name="l00094"></a>00094 
<a name="l00095"></a><a class="code" href="classoperations__research_1_1Solver.html#12362bcb3747225254b572fdf1fd1854">00095</a> <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1Solver.html#12362bcb3747225254b572fdf1fd1854" title="Returns whether we are profiling the solver.">Solver::IsProfilingEnabled</a>()<span class="keyword"> const </span>{
<a name="l00096"></a>00096   <span class="keywordflow">return</span> parameters_.<a class="code" href="structoperations__research_1_1SolverParameters.html#8fe1248f3b6a31d68cb718a961ea4a06" title="Support for profiling propagation.">profile_level</a> != <a class="code" href="structoperations__research_1_1SolverParameters.html#bb1b746ad99155bea2d44ba46db0718723a03d3fac4ba780d9caa8ae38f5dea9">SolverParameters::NO_PROFILING</a> ||
<a name="l00097"></a>00097       !FLAGS_cp_profile_file.empty();
<a name="l00098"></a>00098 }
<a name="l00099"></a>00099 
<a name="l00100"></a><a class="code" href="classoperations__research_1_1Solver.html#dde693b0c593dc1c4ef7fa75c0bf4553">00100</a> <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1Solver.html#dde693b0c593dc1c4ef7fa75c0bf4553" title="Returns whether we are tracing variables.">Solver::InstrumentsVariables</a>()<span class="keyword"> const </span>{
<a name="l00101"></a>00101   <span class="keywordflow">return</span> parameters_.<a class="code" href="structoperations__research_1_1SolverParameters.html#276c76c5dc123313876223ca1e44971e" title="Support for full trace of propagation.">trace_level</a> != <a class="code" href="structoperations__research_1_1SolverParameters.html#dc2227e594bd04f2c7081315cb8a187a32ba180aa4cc3b88ad4420b9fcdf9c36">SolverParameters::NO_TRACE</a> ||
<a name="l00102"></a>00102       FLAGS_cp_trace_propagation;
<a name="l00103"></a>00103 }
<a name="l00104"></a>00104 
<a name="l00105"></a><a class="code" href="classoperations__research_1_1Solver.html#a5bc2f59cfd731d06870cd959e5a3d12">00105</a> <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1Solver.html#a5bc2f59cfd731d06870cd959e5a3d12" title="Returns whether all variables should be named.">Solver::NameAllVariables</a>()<span class="keyword"> const </span>{
<a name="l00106"></a>00106   <span class="keywordflow">return</span> parameters_.<a class="code" href="structoperations__research_1_1SolverParameters.html#c5aebc3290ddf313acea40ed97158f91" title="Should anonymous variables be given a name.">name_all_variables</a> || FLAGS_cp_name_variables;
<a name="l00107"></a>00107 }
<a name="l00108"></a>00108 
<a name="l00109"></a>00109 <span class="comment">// ------------------ Demon class ----------------</span>
<a name="l00110"></a>00110 
<a name="l00111"></a><a class="code" href="classoperations__research_1_1Demon.html#b7daa02f7052c9a43c64561c9d291605">00111</a> <a class="code" href="classoperations__research_1_1Solver.html#4b0972c731faf884eba5acab99ebb2b4" title="This enum represents the three possible priorities for a demon in the Solver queue...">Solver::DemonPriority</a> <a class="code" href="classoperations__research_1_1Demon.html#b7daa02f7052c9a43c64561c9d291605" title="This method returns the priority of the demon.">Demon::priority</a>()<span class="keyword"> const </span>{
<a name="l00112"></a>00112   <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1Solver.html#4b0972c731faf884eba5acab99ebb2b44f432957a8b27277538d5ee856201a4c" title="NORMAL_PRIORITY is the highest priority: Demons will be processed first.">Solver::NORMAL_PRIORITY</a>;
<a name="l00113"></a>00113 }
<a name="l00114"></a>00114 
<a name="l00115"></a><a class="code" href="classoperations__research_1_1Demon.html#d426e69437928dfa0096525369aead1c">00115</a> <span class="keywordtype">string</span> <a class="code" href="classoperations__research_1_1Demon.html#d426e69437928dfa0096525369aead1c">Demon::DebugString</a>()<span class="keyword"> const </span>{
<a name="l00116"></a>00116   <span class="keywordflow">return</span> <span class="stringliteral">"Demon"</span>;
<a name="l00117"></a>00117 }
<a name="l00118"></a>00118 
<a name="l00119"></a><a class="code" href="classoperations__research_1_1Demon.html#4e51b1b49f9a937b335cd9381f95614d">00119</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Demon.html#4e51b1b49f9a937b335cd9381f95614d" title="This method inhibits the demon in the search tree below the current position.">Demon::inhibit</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s) {
<a name="l00120"></a>00120   <span class="keywordflow">if</span> (stamp_ &lt; kuint64max) {
<a name="l00121"></a>00121     s-&gt;<a class="code" href="classoperations__research_1_1Solver.html#fca376d8b0abd52b94534112442f1614" title="All-in-one SaveAndSetValue.">SaveAndSetValue</a>(&amp;stamp_, kuint64max);
<a name="l00122"></a>00122   }
<a name="l00123"></a>00123 }
<a name="l00124"></a>00124 
<a name="l00125"></a><a class="code" href="classoperations__research_1_1Demon.html#e63a7d849eb2b518ac708c736c670f9c">00125</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Demon.html#e63a7d849eb2b518ac708c736c670f9c" title="This method un-inhibit the demon that was inhibited.">Demon::desinhibit</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s) {
<a name="l00126"></a>00126   <span class="keywordflow">if</span> (stamp_ == kuint64max) {
<a name="l00127"></a>00127     s-&gt;<a class="code" href="classoperations__research_1_1Solver.html#fca376d8b0abd52b94534112442f1614" title="All-in-one SaveAndSetValue.">SaveAndSetValue</a>(&amp;stamp_, s-&gt;<a class="code" href="classoperations__research_1_1Solver.html#f17dc31a0a12a7c6c9c09a8a8e2d94e4" title="The stamp indicates how many moves in the search tree we have performed.">stamp</a>() - 1);
<a name="l00128"></a>00128   }
<a name="l00129"></a>00129 }
<a name="l00130"></a>00130 
<a name="l00131"></a>00131 <span class="comment">// ------------------ Action class ------------------</span>
<a name="l00132"></a>00132 
<a name="l00133"></a><a class="code" href="classoperations__research_1_1Action.html#47ea9f9072ca2eb9861b92858c38e11f">00133</a> <span class="keywordtype">string</span> <a class="code" href="classoperations__research_1_1Action.html#47ea9f9072ca2eb9861b92858c38e11f" title="Action class.">Action::DebugString</a>()<span class="keyword"> const </span>{
<a name="l00134"></a>00134   <span class="keywordflow">return</span> <span class="stringliteral">"Action"</span>;
<a name="l00135"></a>00135 }
<a name="l00136"></a>00136 
<a name="l00137"></a>00137 <span class="comment">// ------------------ Queue class ------------------</span>
<a name="l00138"></a>00138 
<a name="l00139"></a>00139 <span class="keyword">namespace </span>{
<a name="l00140"></a>00140 <span class="keyword">class </span>SinglePriorityQueue {
<a name="l00141"></a>00141  <span class="keyword">public</span>:
<a name="l00142"></a>00142   <span class="keyword">virtual</span> ~SinglePriorityQueue() {}
<a name="l00143"></a>00143   <span class="keyword">virtual</span> Demon* NextDemon() = 0;
<a name="l00144"></a>00144   <span class="keyword">virtual</span> <span class="keywordtype">void</span> Enqueue(Demon* <span class="keyword">const</span> d) = 0;
<a name="l00145"></a>00145   <span class="keyword">virtual</span> <span class="keywordtype">void</span> AfterFailure() = 0;
<a name="l00146"></a>00146   <span class="keyword">virtual</span> <span class="keywordtype">void</span> Init() = 0;
<a name="l00147"></a>00147   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> Empty() <span class="keyword">const</span> = 0;
<a name="l00148"></a>00148 };
<a name="l00149"></a>00149 
<a name="l00150"></a>00150 <span class="keyword">class </span>FifoPriorityQueue : <span class="keyword">public</span> SinglePriorityQueue {
<a name="l00151"></a>00151  <span class="keyword">public</span>:
<a name="l00152"></a>00152   <span class="keyword">struct </span>Cell {
<a name="l00153"></a>00153     <span class="keyword">explicit</span> Cell(Demon* <span class="keyword">const</span> d) : <a class="code" href="constraint__solver_8cc.html#f800ac63ce2b6285ec62408b0f17acc3">demon</a>(d), <a class="code" href="constraint__solver_8cc.html#395f613555f398dd389670bb4c2a4599">next</a>(NULL) {}
<a name="l00154"></a><a class="code" href="constraint__solver_8cc.html#f800ac63ce2b6285ec62408b0f17acc3">00154</a>     Demon* <a class="code" href="constraint__solver_8cc.html#f800ac63ce2b6285ec62408b0f17acc3">demon</a>;
<a name="l00155"></a><a class="code" href="constraint__solver_8cc.html#395f613555f398dd389670bb4c2a4599">00155</a>     Cell* <a class="code" href="constraint__solver_8cc.html#395f613555f398dd389670bb4c2a4599">next</a>;
<a name="l00156"></a>00156   };
<a name="l00157"></a>00157 
<a name="l00158"></a>00158   FifoPriorityQueue() : <a class="code" href="constraint__solver_8cc.html#521cf1d39e05e38857d52dca43a9270e">first_</a>(NULL), <a class="code" href="constraint__solver_8cc.html#4a265269d82faeacc90eef4f9668cdbb">last_</a>(NULL), <a class="code" href="constraint__solver_8cc.html#cdc8f06d37bf2c6c4e92039b36813918">free_cells_</a>(NULL) {}
<a name="l00159"></a>00159 
<a name="l00160"></a>00160   <span class="keyword">virtual</span> ~FifoPriorityQueue() {
<a name="l00161"></a>00161     <span class="keywordflow">while</span> (<a class="code" href="constraint__solver_8cc.html#521cf1d39e05e38857d52dca43a9270e">first_</a> != NULL) {
<a name="l00162"></a>00162       Cell* <span class="keyword">const</span> tmp = <a class="code" href="constraint__solver_8cc.html#521cf1d39e05e38857d52dca43a9270e">first_</a>;
<a name="l00163"></a>00163       <a class="code" href="constraint__solver_8cc.html#521cf1d39e05e38857d52dca43a9270e">first_</a> = tmp-&gt;next;
<a name="l00164"></a>00164       <span class="keyword">delete</span> tmp;
<a name="l00165"></a>00165     }
<a name="l00166"></a>00166     <span class="keywordflow">while</span> (<a class="code" href="constraint__solver_8cc.html#cdc8f06d37bf2c6c4e92039b36813918">free_cells_</a> != NULL) {
<a name="l00167"></a>00167       Cell* <span class="keyword">const</span> tmp = <a class="code" href="constraint__solver_8cc.html#cdc8f06d37bf2c6c4e92039b36813918">free_cells_</a>;
<a name="l00168"></a>00168       <a class="code" href="constraint__solver_8cc.html#cdc8f06d37bf2c6c4e92039b36813918">free_cells_</a> = tmp-&gt;next;
<a name="l00169"></a>00169       <span class="keyword">delete</span> tmp;
<a name="l00170"></a>00170     }
<a name="l00171"></a>00171   }
<a name="l00172"></a>00172 
<a name="l00173"></a>00173   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> Empty()<span class="keyword"> const </span>{
<a name="l00174"></a>00174     <span class="keywordflow">return</span> <a class="code" href="constraint__solver_8cc.html#521cf1d39e05e38857d52dca43a9270e">first_</a> == NULL;
<a name="l00175"></a>00175   }
<a name="l00176"></a>00176 
<a name="l00177"></a>00177   <span class="keyword">virtual</span> Demon* NextDemon() {
<a name="l00178"></a>00178     <span class="keywordflow">if</span> (<a class="code" href="constraint__solver_8cc.html#521cf1d39e05e38857d52dca43a9270e">first_</a> != NULL) {
<a name="l00179"></a>00179       DCHECK(<a class="code" href="constraint__solver_8cc.html#4a265269d82faeacc90eef4f9668cdbb">last_</a> != NULL);
<a name="l00180"></a>00180       Cell* <span class="keyword">const</span> tmp_cell = <a class="code" href="constraint__solver_8cc.html#521cf1d39e05e38857d52dca43a9270e">first_</a>;
<a name="l00181"></a>00181       Demon* <span class="keyword">const</span> <a class="code" href="constraint__solver_8cc.html#f800ac63ce2b6285ec62408b0f17acc3">demon</a> = tmp_cell-&gt;demon;
<a name="l00182"></a>00182       <a class="code" href="constraint__solver_8cc.html#521cf1d39e05e38857d52dca43a9270e">first_</a> = tmp_cell-&gt;next;
<a name="l00183"></a>00183       <span class="keywordflow">if</span> (<a class="code" href="constraint__solver_8cc.html#521cf1d39e05e38857d52dca43a9270e">first_</a> == NULL) {
<a name="l00184"></a>00184         <a class="code" href="constraint__solver_8cc.html#4a265269d82faeacc90eef4f9668cdbb">last_</a> = NULL;
<a name="l00185"></a>00185       }
<a name="l00186"></a>00186       tmp_cell-&gt;next = <a class="code" href="constraint__solver_8cc.html#cdc8f06d37bf2c6c4e92039b36813918">free_cells_</a>;
<a name="l00187"></a>00187       <a class="code" href="constraint__solver_8cc.html#cdc8f06d37bf2c6c4e92039b36813918">free_cells_</a> = tmp_cell;
<a name="l00188"></a>00188       <span class="keywordflow">return</span> demon;
<a name="l00189"></a>00189     }
<a name="l00190"></a>00190     <span class="keywordflow">return</span> NULL;
<a name="l00191"></a>00191   }
<a name="l00192"></a>00192 
<a name="l00193"></a>00193   <span class="keyword">virtual</span> <span class="keywordtype">void</span> Enqueue(Demon* <span class="keyword">const</span> d) {
<a name="l00194"></a>00194     Cell* cell = <a class="code" href="constraint__solver_8cc.html#cdc8f06d37bf2c6c4e92039b36813918">free_cells_</a>;
<a name="l00195"></a>00195     <span class="keywordflow">if</span> (cell != NULL) {
<a name="l00196"></a>00196       cell-&gt;demon = d;
<a name="l00197"></a>00197       <a class="code" href="constraint__solver_8cc.html#cdc8f06d37bf2c6c4e92039b36813918">free_cells_</a> = cell-&gt;next;
<a name="l00198"></a>00198       cell-&gt;next = NULL;
<a name="l00199"></a>00199     } <span class="keywordflow">else</span> {
<a name="l00200"></a>00200       cell = <span class="keyword">new</span> Cell(d);
<a name="l00201"></a>00201     }
<a name="l00202"></a>00202     <span class="keywordflow">if</span> (<a class="code" href="constraint__solver_8cc.html#4a265269d82faeacc90eef4f9668cdbb">last_</a> != NULL) {
<a name="l00203"></a>00203       <a class="code" href="constraint__solver_8cc.html#4a265269d82faeacc90eef4f9668cdbb">last_</a>-&gt;next = cell;
<a name="l00204"></a>00204       <a class="code" href="constraint__solver_8cc.html#4a265269d82faeacc90eef4f9668cdbb">last_</a> = cell;
<a name="l00205"></a>00205     } <span class="keywordflow">else</span> {
<a name="l00206"></a>00206       <a class="code" href="constraint__solver_8cc.html#521cf1d39e05e38857d52dca43a9270e">first_</a> = cell;
<a name="l00207"></a>00207       <a class="code" href="constraint__solver_8cc.html#4a265269d82faeacc90eef4f9668cdbb">last_</a> = cell;
<a name="l00208"></a>00208     }
<a name="l00209"></a>00209   }
<a name="l00210"></a>00210 
<a name="l00211"></a>00211   <span class="keyword">virtual</span> <span class="keywordtype">void</span> AfterFailure() {
<a name="l00212"></a>00212     <span class="keywordflow">if</span> (<a class="code" href="constraint__solver_8cc.html#521cf1d39e05e38857d52dca43a9270e">first_</a> != NULL) {
<a name="l00213"></a>00213       <a class="code" href="constraint__solver_8cc.html#4a265269d82faeacc90eef4f9668cdbb">last_</a>-&gt;next = <a class="code" href="constraint__solver_8cc.html#cdc8f06d37bf2c6c4e92039b36813918">free_cells_</a>;
<a name="l00214"></a>00214       <a class="code" href="constraint__solver_8cc.html#cdc8f06d37bf2c6c4e92039b36813918">free_cells_</a> = <a class="code" href="constraint__solver_8cc.html#521cf1d39e05e38857d52dca43a9270e">first_</a>;
<a name="l00215"></a>00215       <a class="code" href="constraint__solver_8cc.html#521cf1d39e05e38857d52dca43a9270e">first_</a> = NULL;
<a name="l00216"></a>00216       <a class="code" href="constraint__solver_8cc.html#4a265269d82faeacc90eef4f9668cdbb">last_</a> = NULL;
<a name="l00217"></a>00217     }
<a name="l00218"></a>00218   }
<a name="l00219"></a>00219 
<a name="l00220"></a>00220   <span class="keyword">virtual</span> <span class="keywordtype">void</span> Init() {}
<a name="l00221"></a>00221 
<a name="l00222"></a>00222  <span class="keyword">private</span>:
<a name="l00223"></a><a class="code" href="constraint__solver_8cc.html#521cf1d39e05e38857d52dca43a9270e">00223</a>   Cell* <a class="code" href="constraint__solver_8cc.html#521cf1d39e05e38857d52dca43a9270e">first_</a>;
<a name="l00224"></a><a class="code" href="constraint__solver_8cc.html#4a265269d82faeacc90eef4f9668cdbb">00224</a>   Cell* <a class="code" href="constraint__solver_8cc.html#4a265269d82faeacc90eef4f9668cdbb">last_</a>;
<a name="l00225"></a><a class="code" href="constraint__solver_8cc.html#cdc8f06d37bf2c6c4e92039b36813918">00225</a>   Cell* <a class="code" href="constraint__solver_8cc.html#cdc8f06d37bf2c6c4e92039b36813918">free_cells_</a>;
<a name="l00226"></a>00226 };
<a name="l00227"></a>00227 }  <span class="comment">// namespace</span>
<a name="l00228"></a>00228 
<a name="l00229"></a><a class="code" href="classoperations__research_1_1Queue.html">00229</a> <span class="keyword">class </span><a class="code" href="classoperations__research_1_1Queue.html" title="namespace">Queue</a> {
<a name="l00230"></a>00230  <span class="keyword">public</span>:
<a name="l00231"></a><a class="code" href="classoperations__research_1_1Queue.html#79c358dddeddaa821396f96cab72a07b">00231</a>   <span class="keyword">explicit</span> <a class="code" href="classoperations__research_1_1Queue.html" title="namespace">Queue</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s)
<a name="l00232"></a>00232       : <a class="code" href="ac4r__table_8cc.html#bd6bfbf6753a5deb0ce273fad6408e1e">solver_</a>(s),
<a name="l00233"></a>00233         <a class="code" href="expressions_8cc.html#978ce78f3214dcdb733a12a350c1611a">stamp_</a>(1),
<a name="l00234"></a>00234         freeze_level_(0),
<a name="l00235"></a>00235         <a class="code" href="dependency__graph_8cc.html#3c556bc2d9f39f48c121b6222892ef2f">in_process_</a>(false),
<a name="l00236"></a>00236         clear_action_(NULL),
<a name="l00237"></a>00237         in_add_(false),
<a name="l00238"></a>00238         instruments_demons_(s-&gt;InstrumentsDemons()) {
<a name="l00239"></a>00239     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classoperations__research_1_1Solver.html#d4faf53cefb2c2cdb8892b978a4b93a9" title="Number of priorities for demons.">Solver::kNumPriorities</a>; ++i) {
<a name="l00240"></a>00240       containers_[i] = <span class="keyword">new</span> FifoPriorityQueue();
<a name="l00241"></a>00241       containers_[i]-&gt;Init();
<a name="l00242"></a>00242     }
<a name="l00243"></a>00243   }
<a name="l00244"></a>00244 
<a name="l00245"></a><a class="code" href="classoperations__research_1_1Queue.html#8701f7d8435259101fcb47741387dfd5">00245</a>   ~<a class="code" href="classoperations__research_1_1Queue.html" title="namespace">Queue</a>() {
<a name="l00246"></a>00246     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classoperations__research_1_1Solver.html#d4faf53cefb2c2cdb8892b978a4b93a9" title="Number of priorities for demons.">Solver::kNumPriorities</a>; ++i) {
<a name="l00247"></a>00247       <span class="keyword">delete</span> containers_[i];
<a name="l00248"></a>00248       containers_[i] = NULL;
<a name="l00249"></a>00249     }
<a name="l00250"></a>00250   }
<a name="l00251"></a>00251 
<a name="l00252"></a><a class="code" href="classoperations__research_1_1Queue.html#ac21361cb6eedd26710bf86e5066ca0d">00252</a>   <span class="keywordtype">void</span> Freeze() {
<a name="l00253"></a>00253     freeze_level_++;
<a name="l00254"></a>00254     <a class="code" href="expressions_8cc.html#978ce78f3214dcdb733a12a350c1611a">stamp_</a>++;
<a name="l00255"></a>00255   }
<a name="l00256"></a>00256 
<a name="l00257"></a><a class="code" href="classoperations__research_1_1Queue.html#c78f07b0fe8b17af9c5575118a8f900c">00257</a>   <span class="keywordtype">void</span> Unfreeze() {
<a name="l00258"></a>00258     freeze_level_--;
<a name="l00259"></a>00259     ProcessIfUnfrozen();
<a name="l00260"></a>00260   }
<a name="l00261"></a>00261 
<a name="l00262"></a><a class="code" href="classoperations__research_1_1Queue.html#6b155e084f5237feb1ad5140911537ee">00262</a>   <span class="keywordtype">void</span> ProcessOneDemon(<a class="code" href="classoperations__research_1_1Solver.html#4b0972c731faf884eba5acab99ebb2b4" title="This enum represents the three possible priorities for a demon in the Solver queue...">Solver::DemonPriority</a> prio) {
<a name="l00263"></a>00263     <a class="code" href="classoperations__research_1_1Demon.html" title="A Demon is the base element of a propagation queue.">Demon</a>* <span class="keyword">const</span> <a class="code" href="constraint__solver_8cc.html#f800ac63ce2b6285ec62408b0f17acc3">demon</a> = containers_[prio]-&gt;NextDemon();
<a name="l00264"></a>00264     <span class="comment">// A NULL demon will just be ignored</span>
<a name="l00265"></a>00265     <span class="keywordflow">if</span> (demon != NULL) {
<a name="l00266"></a>00266       demon-&gt;<a class="code" href="classoperations__research_1_1Demon.html#614b0b652e620c4c7151d86f09dead55">set_stamp</a>(<a class="code" href="expressions_8cc.html#978ce78f3214dcdb733a12a350c1611a">stamp_</a> - 1);
<a name="l00267"></a>00267       DCHECK_EQ(prio, demon-&gt;<a class="code" href="classoperations__research_1_1Demon.html#b7daa02f7052c9a43c64561c9d291605" title="This method returns the priority of the demon.">priority</a>());
<a name="l00268"></a>00268       <span class="keywordflow">if</span> (instruments_demons_) {
<a name="l00269"></a>00269         <a class="code" href="ac4r__table_8cc.html#bd6bfbf6753a5deb0ce273fad6408e1e">solver_</a>-&gt;<a class="code" href="classoperations__research_1_1Solver.html#0171a677ee7227279e92e8f2138af0b0" title="Returns the propagation monitor.">GetPropagationMonitor</a>()-&gt;<a class="code" href="classoperations__research_1_1PropagationMonitor.html#e4fc7656c5aa78afafcf41c595fb7eab">BeginDemonRun</a>(demon);
<a name="l00270"></a>00270       }
<a name="l00271"></a>00271       <a class="code" href="ac4r__table_8cc.html#bd6bfbf6753a5deb0ce273fad6408e1e">solver_</a>-&gt;<a class="code" href="classoperations__research_1_1Solver.html#f55961702f23983ac14a3847afb72666">demon_runs_</a>[prio]++;
<a name="l00272"></a>00272       <span class="keywordflow">if</span> (<a class="code" href="ac4r__table_8cc.html#bd6bfbf6753a5deb0ce273fad6408e1e">solver_</a>-&gt;<a class="code" href="classoperations__research_1_1Solver.html#f55961702f23983ac14a3847afb72666">demon_runs_</a>[prio] % 10000 == 0) {
<a name="l00273"></a>00273         <a class="code" href="ac4r__table_8cc.html#bd6bfbf6753a5deb0ce273fad6408e1e">solver_</a>-&gt;<a class="code" href="classoperations__research_1_1Solver.html#6ffc56653b5ef9643ce87d05c9ebd8d6" title="Performs PeriodicCheck on the top-level search; can be called from a nested solve...">TopPeriodicCheck</a>();
<a name="l00274"></a>00274       }
<a name="l00275"></a>00275       demon-&gt;<a class="code" href="classoperations__research_1_1Demon.html#7d3876bb3b369f0ae115e08ce9a6dc72" title="This is the main callback of the demon.">Run</a>(<a class="code" href="ac4r__table_8cc.html#bd6bfbf6753a5deb0ce273fad6408e1e">solver_</a>);
<a name="l00276"></a>00276       <span class="keywordflow">if</span> (instruments_demons_) {
<a name="l00277"></a>00277         <a class="code" href="ac4r__table_8cc.html#bd6bfbf6753a5deb0ce273fad6408e1e">solver_</a>-&gt;<a class="code" href="classoperations__research_1_1Solver.html#0171a677ee7227279e92e8f2138af0b0" title="Returns the propagation monitor.">GetPropagationMonitor</a>()-&gt;<a class="code" href="classoperations__research_1_1PropagationMonitor.html#3481f0af72af454aa42d57b05c56e55e">EndDemonRun</a>(demon);
<a name="l00278"></a>00278       }
<a name="l00279"></a>00279     }
<a name="l00280"></a>00280   }
<a name="l00281"></a>00281 
<a name="l00282"></a><a class="code" href="classoperations__research_1_1Queue.html#746974a2fbf2b1b7f7de07c481e67d25">00282</a>   <span class="keywordtype">void</span> ProcessNormalDemons() {
<a name="l00283"></a>00283     <span class="keywordflow">while</span> (!containers_[<a class="code" href="classoperations__research_1_1Solver.html#4b0972c731faf884eba5acab99ebb2b44f432957a8b27277538d5ee856201a4c" title="NORMAL_PRIORITY is the highest priority: Demons will be processed first.">Solver::NORMAL_PRIORITY</a>]-&gt;Empty()) {
<a name="l00284"></a>00284       ProcessOneDemon(<a class="code" href="classoperations__research_1_1Solver.html#4b0972c731faf884eba5acab99ebb2b44f432957a8b27277538d5ee856201a4c" title="NORMAL_PRIORITY is the highest priority: Demons will be processed first.">Solver::NORMAL_PRIORITY</a>);
<a name="l00285"></a>00285     }
<a name="l00286"></a>00286   }
<a name="l00287"></a>00287 
<a name="l00288"></a><a class="code" href="classoperations__research_1_1Queue.html#20418f62989173ee804f2a873c0123e2">00288</a>   <span class="keywordtype">void</span> Process() {
<a name="l00289"></a>00289     <span class="keywordflow">if</span> (!<a class="code" href="dependency__graph_8cc.html#3c556bc2d9f39f48c121b6222892ef2f">in_process_</a>) {
<a name="l00290"></a>00290       <a class="code" href="dependency__graph_8cc.html#3c556bc2d9f39f48c121b6222892ef2f">in_process_</a> = <span class="keyword">true</span>;
<a name="l00291"></a>00291       <span class="keywordflow">while</span> (!containers_[<a class="code" href="classoperations__research_1_1Solver.html#4b0972c731faf884eba5acab99ebb2b4e5f79fc80ef9ae665bcd7c0e55c02aa6" title="VAR_PRIORITY is between DELAYED_PRIORITY and NORMAL_PRIORITY.">Solver::VAR_PRIORITY</a>]-&gt;Empty() ||
<a name="l00292"></a>00292              !containers_[<a class="code" href="classoperations__research_1_1Solver.html#4b0972c731faf884eba5acab99ebb2b44f432957a8b27277538d5ee856201a4c" title="NORMAL_PRIORITY is the highest priority: Demons will be processed first.">Solver::NORMAL_PRIORITY</a>]-&gt;Empty() ||
<a name="l00293"></a>00293              !containers_[<a class="code" href="classoperations__research_1_1Solver.html#4b0972c731faf884eba5acab99ebb2b4f8769149902a8a2b168069cb93cc6370" title="DELAYED_PRIORITY is the lowest priority: Demons will be processed after VAR_PRIORITY...">Solver::DELAYED_PRIORITY</a>]-&gt;Empty()) {
<a name="l00294"></a>00294         <span class="keywordflow">while</span> (!containers_[<a class="code" href="classoperations__research_1_1Solver.html#4b0972c731faf884eba5acab99ebb2b4e5f79fc80ef9ae665bcd7c0e55c02aa6" title="VAR_PRIORITY is between DELAYED_PRIORITY and NORMAL_PRIORITY.">Solver::VAR_PRIORITY</a>]-&gt;Empty() ||
<a name="l00295"></a>00295                !containers_[<a class="code" href="classoperations__research_1_1Solver.html#4b0972c731faf884eba5acab99ebb2b44f432957a8b27277538d5ee856201a4c" title="NORMAL_PRIORITY is the highest priority: Demons will be processed first.">Solver::NORMAL_PRIORITY</a>]-&gt;Empty()) {
<a name="l00296"></a>00296           <span class="keywordflow">while</span> (!containers_[<a class="code" href="classoperations__research_1_1Solver.html#4b0972c731faf884eba5acab99ebb2b44f432957a8b27277538d5ee856201a4c" title="NORMAL_PRIORITY is the highest priority: Demons will be processed first.">Solver::NORMAL_PRIORITY</a>]-&gt;Empty()) {
<a name="l00297"></a>00297             ProcessOneDemon(<a class="code" href="classoperations__research_1_1Solver.html#4b0972c731faf884eba5acab99ebb2b44f432957a8b27277538d5ee856201a4c" title="NORMAL_PRIORITY is the highest priority: Demons will be processed first.">Solver::NORMAL_PRIORITY</a>);
<a name="l00298"></a>00298           }
<a name="l00299"></a>00299           ProcessOneDemon(<a class="code" href="classoperations__research_1_1Solver.html#4b0972c731faf884eba5acab99ebb2b4e5f79fc80ef9ae665bcd7c0e55c02aa6" title="VAR_PRIORITY is between DELAYED_PRIORITY and NORMAL_PRIORITY.">Solver::VAR_PRIORITY</a>);
<a name="l00300"></a>00300         }
<a name="l00301"></a>00301         ProcessOneDemon(<a class="code" href="classoperations__research_1_1Solver.html#4b0972c731faf884eba5acab99ebb2b4f8769149902a8a2b168069cb93cc6370" title="DELAYED_PRIORITY is the lowest priority: Demons will be processed after VAR_PRIORITY...">Solver::DELAYED_PRIORITY</a>);
<a name="l00302"></a>00302       }
<a name="l00303"></a>00303       <a class="code" href="dependency__graph_8cc.html#3c556bc2d9f39f48c121b6222892ef2f">in_process_</a> = <span class="keyword">false</span>;
<a name="l00304"></a>00304     }
<a name="l00305"></a>00305   }
<a name="l00306"></a>00306 
<a name="l00307"></a><a class="code" href="classoperations__research_1_1Queue.html#39f395e16b4d8634c0d8ab12389d38f2">00307</a>   <span class="keywordtype">void</span> Enqueue(<a class="code" href="classoperations__research_1_1Demon.html" title="A Demon is the base element of a propagation queue.">Demon</a>* <span class="keyword">const</span> <a class="code" href="constraint__solver_8cc.html#f800ac63ce2b6285ec62408b0f17acc3">demon</a>) {
<a name="l00308"></a>00308     <span class="keywordflow">if</span> (demon-&gt;<a class="code" href="classoperations__research_1_1Demon.html#135f1e1a1e8e2901d2e095b50d439650">stamp</a>() &lt; <a class="code" href="expressions_8cc.html#978ce78f3214dcdb733a12a350c1611a">stamp_</a>) {
<a name="l00309"></a>00309       demon-&gt;<a class="code" href="classoperations__research_1_1Demon.html#614b0b652e620c4c7151d86f09dead55">set_stamp</a>(<a class="code" href="expressions_8cc.html#978ce78f3214dcdb733a12a350c1611a">stamp_</a>);
<a name="l00310"></a>00310       containers_[demon-&gt;<a class="code" href="classoperations__research_1_1Demon.html#b7daa02f7052c9a43c64561c9d291605" title="This method returns the priority of the demon.">priority</a>()]-&gt;Enqueue(demon);
<a name="l00311"></a>00311       ProcessIfUnfrozen();
<a name="l00312"></a>00312     }
<a name="l00313"></a>00313   }
<a name="l00314"></a>00314 
<a name="l00315"></a><a class="code" href="classoperations__research_1_1Queue.html#db7a60ba9dd657dff2d727017171a424">00315</a>   <span class="keywordtype">void</span> AfterFailure() {
<a name="l00316"></a>00316     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classoperations__research_1_1Solver.html#d4faf53cefb2c2cdb8892b978a4b93a9" title="Number of priorities for demons.">Solver::kNumPriorities</a>; ++i) {
<a name="l00317"></a>00317       containers_[i]-&gt;AfterFailure();
<a name="l00318"></a>00318     }
<a name="l00319"></a>00319     <span class="keywordflow">if</span> (clear_action_ != NULL) {
<a name="l00320"></a>00320       clear_action_-&gt;Run(<a class="code" href="ac4r__table_8cc.html#bd6bfbf6753a5deb0ce273fad6408e1e">solver_</a>);
<a name="l00321"></a>00321       clear_action_ = NULL;
<a name="l00322"></a>00322     }
<a name="l00323"></a>00323     freeze_level_ = 0;
<a name="l00324"></a>00324     <a class="code" href="dependency__graph_8cc.html#3c556bc2d9f39f48c121b6222892ef2f">in_process_</a> = <span class="keyword">false</span>;
<a name="l00325"></a>00325     in_add_ = <span class="keyword">false</span>;
<a name="l00326"></a>00326     to_add_.clear();
<a name="l00327"></a>00327   }
<a name="l00328"></a>00328 
<a name="l00329"></a><a class="code" href="classoperations__research_1_1Queue.html#2ec18094b92e88d27c28f196278859dd">00329</a>   <span class="keywordtype">void</span> increase_stamp() {
<a name="l00330"></a>00330     <a class="code" href="expressions_8cc.html#978ce78f3214dcdb733a12a350c1611a">stamp_</a>++;
<a name="l00331"></a>00331   }
<a name="l00332"></a>00332 
<a name="l00333"></a><a class="code" href="classoperations__research_1_1Queue.html#e66aadfbaaa362ce5fcab3dca3a642b6">00333</a>   uint64 stamp()<span class="keyword"> const </span>{
<a name="l00334"></a>00334     <span class="keywordflow">return</span> <a class="code" href="expressions_8cc.html#978ce78f3214dcdb733a12a350c1611a">stamp_</a>;
<a name="l00335"></a>00335   }
<a name="l00336"></a>00336 
<a name="l00337"></a><a class="code" href="classoperations__research_1_1Queue.html#4def4b68e3661b89aa06b319908fced0">00337</a>   <span class="keywordtype">void</span> set_action_on_fail(<a class="code" href="classoperations__research_1_1Action.html" title="An action is the base callback method.">Action</a>* <span class="keyword">const</span> a) {
<a name="l00338"></a>00338     clear_action_ = a;
<a name="l00339"></a>00339   }
<a name="l00340"></a>00340 
<a name="l00341"></a><a class="code" href="classoperations__research_1_1Queue.html#95754f9530734d72b50aa96504d6b09e">00341</a>   <span class="keywordtype">void</span> clear_action_on_fail() {
<a name="l00342"></a>00342     clear_action_ = NULL;
<a name="l00343"></a>00343   }
<a name="l00344"></a>00344 
<a name="l00345"></a><a class="code" href="classoperations__research_1_1Queue.html#7e2a23c5cb5bf7c71e45a99c3355b12b">00345</a>   <span class="keywordtype">void</span> AddConstraint(<a class="code" href="classoperations__research_1_1Constraint.html" title="A constraint is the main modeling object.">Constraint</a>* <span class="keyword">const</span> c) {
<a name="l00346"></a>00346     to_add_.push_back(c);
<a name="l00347"></a>00347     ProcessConstraints();
<a name="l00348"></a>00348   }
<a name="l00349"></a>00349 
<a name="l00350"></a><a class="code" href="classoperations__research_1_1Queue.html#014c7261e4c1b40cd8d81d22e22c3e94">00350</a>   <span class="keywordtype">void</span> ProcessConstraints() {
<a name="l00351"></a>00351     <span class="keywordflow">if</span> (!in_add_) {
<a name="l00352"></a>00352       in_add_ = <span class="keyword">true</span>;
<a name="l00353"></a>00353       <span class="comment">// We cannot store to_add_.size() as constraints can add other</span>
<a name="l00354"></a>00354       <span class="comment">// constraints.</span>
<a name="l00355"></a>00355       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> counter = 0; counter &lt; to_add_.size(); ++counter) {
<a name="l00356"></a>00356         <a class="code" href="classoperations__research_1_1Constraint.html" title="A constraint is the main modeling object.">Constraint</a>* <span class="keyword">const</span> constraint = to_add_[counter];
<a name="l00357"></a>00357         <span class="comment">// TODO(user): Add profiling to initial propagation</span>
<a name="l00358"></a>00358         constraint-&gt;<a class="code" href="classoperations__research_1_1Constraint.html#92c3bfe86238b5c95448d4a0384a327f" title="Calls Post and then Propagate to initialize the constraints.">PostAndPropagate</a>();
<a name="l00359"></a>00359       }
<a name="l00360"></a>00360       in_add_ = <span class="keyword">false</span>;
<a name="l00361"></a>00361       to_add_.clear();
<a name="l00362"></a>00362     }
<a name="l00363"></a>00363   }
<a name="l00364"></a>00364 
<a name="l00365"></a>00365  <span class="keyword">private</span>:
<a name="l00366"></a>00366   <span class="keywordtype">void</span> ProcessIfUnfrozen() {
<a name="l00367"></a>00367     <span class="keywordflow">if</span> (freeze_level_ == 0) {
<a name="l00368"></a>00368       Process();
<a name="l00369"></a>00369     }
<a name="l00370"></a>00370   }
<a name="l00371"></a>00371 
<a name="l00372"></a>00372   Solver* <span class="keyword">const</span> <a class="code" href="ac4r__table_8cc.html#bd6bfbf6753a5deb0ce273fad6408e1e">solver_</a>;
<a name="l00373"></a>00373   SinglePriorityQueue* containers_[<a class="code" href="classoperations__research_1_1Solver.html#d4faf53cefb2c2cdb8892b978a4b93a9" title="Number of priorities for demons.">Solver::kNumPriorities</a>];
<a name="l00374"></a>00374   uint64 <a class="code" href="expressions_8cc.html#978ce78f3214dcdb733a12a350c1611a">stamp_</a>;
<a name="l00375"></a>00375   <span class="comment">// The number of nested freeze levels. The queue is frozen if and only if</span>
<a name="l00376"></a>00376   <span class="comment">// freeze_level_ &gt; 0.</span>
<a name="l00377"></a>00377   uint32 freeze_level_;
<a name="l00378"></a>00378   <span class="keywordtype">bool</span> <a class="code" href="dependency__graph_8cc.html#3c556bc2d9f39f48c121b6222892ef2f">in_process_</a>;
<a name="l00379"></a>00379   <a class="code" href="classoperations__research_1_1Action.html#f13b925e1e74a0f907f466630aa67bc0">Action</a>* clear_action_;
<a name="l00380"></a>00380   std::vector&lt;Constraint*&gt; to_add_;
<a name="l00381"></a>00381   <span class="keywordtype">bool</span> in_add_;
<a name="l00382"></a>00382   <span class="keyword">const</span> <span class="keywordtype">bool</span> instruments_demons_;
<a name="l00383"></a>00383 };
<a name="l00384"></a>00384 
<a name="l00385"></a>00385 <span class="comment">// ------------------ StateMarker / StateInfo struct -----------</span>
<a name="l00386"></a>00386 
<a name="l00387"></a><a class="code" href="structoperations__research_1_1StateInfo.html">00387</a> <span class="keyword">struct </span><a class="code" href="structoperations__research_1_1StateInfo.html" title="StateMarker / StateInfo struct.">StateInfo</a> {  <span class="comment">// This is an internal structure to store</span>
<a name="l00388"></a>00388                     <span class="comment">// additional information on the choice point.</span>
<a name="l00389"></a>00389  <span class="keyword">public</span>:
<a name="l00390"></a><a class="code" href="structoperations__research_1_1StateInfo.html#fad72143d9616d487be939548da6dff2">00390</a>   <a class="code" href="structoperations__research_1_1StateInfo.html" title="StateMarker / StateInfo struct.">StateInfo</a>() : ptr_info(NULL), int_info(0), depth(0), left_depth(0) {}
<a name="l00391"></a><a class="code" href="structoperations__research_1_1StateInfo.html#d94aa9259ee22adc0b9b1f58fa707f5f">00391</a>   <a class="code" href="structoperations__research_1_1StateInfo.html" title="StateMarker / StateInfo struct.">StateInfo</a>(<span class="keywordtype">void</span>* pinfo, <span class="keywordtype">int</span> iinfo)
<a name="l00392"></a>00392       : ptr_info(pinfo), int_info(iinfo), depth(0), left_depth(0) {}
<a name="l00393"></a><a class="code" href="structoperations__research_1_1StateInfo.html#ed5c2d0c003794c99fa76f465b447149">00393</a>   <a class="code" href="structoperations__research_1_1StateInfo.html" title="StateMarker / StateInfo struct.">StateInfo</a>(<span class="keywordtype">void</span>* pinfo, <span class="keywordtype">int</span> iinfo, <span class="keywordtype">int</span> d, <span class="keywordtype">int</span> ld)
<a name="l00394"></a>00394       : ptr_info(pinfo), int_info(iinfo), depth(d), left_depth(ld) {}
<a name="l00395"></a><a class="code" href="structoperations__research_1_1StateInfo.html#23808ad010fb33b8103e7f9713816c62">00395</a>   <span class="keywordtype">void</span>* ptr_info;
<a name="l00396"></a><a class="code" href="structoperations__research_1_1StateInfo.html#000fb6644096e817fbaaa6f0ec4d2dc7">00396</a>   <span class="keywordtype">int</span> int_info;
<a name="l00397"></a><a class="code" href="structoperations__research_1_1StateInfo.html#30afd4fe3478fb7523c1839aeae271cc">00397</a>   <span class="keywordtype">int</span> depth;
<a name="l00398"></a><a class="code" href="structoperations__research_1_1StateInfo.html#c8718ab0b1cccc16ce50235e93d6fb3e">00398</a>   <span class="keywordtype">int</span> left_depth;
<a name="l00399"></a>00399 };
<a name="l00400"></a>00400 
<a name="l00401"></a><a class="code" href="structoperations__research_1_1StateMarker.html">00401</a> <span class="keyword">struct </span><a class="code" href="structoperations__research_1_1StateMarker.html">StateMarker</a> {
<a name="l00402"></a>00402  <span class="keyword">public</span>:
<a name="l00403"></a>00403   <a class="code" href="structoperations__research_1_1StateMarker.html">StateMarker</a>(<a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a6215" title="This enum is used internally in private methods Solver::PushState and Solver::PopState...">Solver::MarkerType</a> t, <span class="keyword">const</span> <a class="code" href="structoperations__research_1_1StateInfo.html" title="StateMarker / StateInfo struct.">StateInfo</a>&amp; info);
<a name="l00404"></a><a class="code" href="structoperations__research_1_1StateMarker.html#16432758b314f3cedad3fba81c895417">00404</a>   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>;
<a name="l00405"></a><a class="code" href="structoperations__research_1_1StateMarker.html#3ffe707082206cf6d91b65922bafe2e2">00405</a>   <span class="keyword">friend</span> <span class="keyword">struct </span><a class="code" href="structoperations__research_1_1Trail.html">Trail</a>;
<a name="l00406"></a>00406  <span class="keyword">private</span>:
<a name="l00407"></a>00407   <a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a6215" title="This enum is used internally in private methods Solver::PushState and Solver::PopState...">Solver::MarkerType</a> <a class="code" href="softgcc_8cc.html#d99fdf96b339fc22666deaafcbdc2883">type_</a>;
<a name="l00408"></a>00408   <span class="keywordtype">int</span> rev_int_index_;
<a name="l00409"></a>00409   <span class="keywordtype">int</span> rev_int64_index_;
<a name="l00410"></a>00410   <span class="keywordtype">int</span> rev_uint64_index_;
<a name="l00411"></a>00411   <span class="keywordtype">int</span> rev_ptr_index_;
<a name="l00412"></a>00412   <span class="keywordtype">int</span> rev_boolvar_list_index_;
<a name="l00413"></a>00413   <span class="keywordtype">int</span> rev_bools_index_;
<a name="l00414"></a>00414   <span class="keywordtype">int</span> rev_int_memory_index_;
<a name="l00415"></a>00415   <span class="keywordtype">int</span> rev_int64_memory_index_;
<a name="l00416"></a>00416   <span class="keywordtype">int</span> rev_object_memory_index_;
<a name="l00417"></a>00417   <span class="keywordtype">int</span> rev_object_array_memory_index_;
<a name="l00418"></a>00418   <span class="keywordtype">int</span> rev_memory_index_;
<a name="l00419"></a>00419   <span class="keywordtype">int</span> rev_memory_array_index_;
<a name="l00420"></a>00420   <a class="code" href="structoperations__research_1_1StateInfo.html" title="StateMarker / StateInfo struct.">StateInfo</a> info_;
<a name="l00421"></a>00421 };
<a name="l00422"></a>00422 
<a name="l00423"></a><a class="code" href="structoperations__research_1_1StateMarker.html#d1d67eb0ae7d3f0ef32c9691ac890a4f">00423</a> <a class="code" href="structoperations__research_1_1StateMarker.html#d1d67eb0ae7d3f0ef32c9691ac890a4f">StateMarker::StateMarker</a>(<a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a6215" title="This enum is used internally in private methods Solver::PushState and Solver::PopState...">Solver::MarkerType</a> t, <span class="keyword">const</span> <a class="code" href="structoperations__research_1_1StateInfo.html" title="StateMarker / StateInfo struct.">StateInfo</a>&amp; info)
<a name="l00424"></a>00424     : <a class="code" href="softgcc_8cc.html#d99fdf96b339fc22666deaafcbdc2883">type_</a>(t),
<a name="l00425"></a>00425       rev_int_index_(0),
<a name="l00426"></a>00426       rev_int64_index_(0),
<a name="l00427"></a>00427       rev_uint64_index_(0),
<a name="l00428"></a>00428       rev_ptr_index_(0),
<a name="l00429"></a>00429       rev_boolvar_list_index_(0),
<a name="l00430"></a>00430       rev_bools_index_(0),
<a name="l00431"></a>00431       rev_int_memory_index_(0),
<a name="l00432"></a>00432       rev_int64_memory_index_(0),
<a name="l00433"></a>00433       rev_object_memory_index_(0),
<a name="l00434"></a>00434       rev_object_array_memory_index_(0),
<a name="l00435"></a>00435       info_(info) {}
<a name="l00436"></a>00436 
<a name="l00437"></a>00437 <span class="comment">// ---------- Trail and Reversibility ----------</span>
<a name="l00438"></a>00438 
<a name="l00439"></a>00439 <span class="keyword">namespace </span>{
<a name="l00440"></a>00440 <span class="comment">// ----- addrval struct -----</span>
<a name="l00441"></a>00441 
<a name="l00442"></a>00442 <span class="comment">// This template class is used internally to implement reversibility.</span>
<a name="l00443"></a>00443 <span class="comment">// It stores an address and the value that was at the address.</span>
<a name="l00444"></a>00444 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">struct </span>addrval {
<a name="l00445"></a>00445  <span class="keyword">public</span>:
<a name="l00446"></a>00446   addrval() : <a class="code" href="constraint__solver_8cc.html#a362338b69c404129e01e197a25f3a16">address_</a>(NULL) {}
<a name="l00447"></a>00447   <span class="keyword">explicit</span> addrval(T* adr) : <a class="code" href="constraint__solver_8cc.html#a362338b69c404129e01e197a25f3a16">address_</a>(adr), <a class="code" href="constraint__solver_8cc.html#d23798e2eb6681fd68436c2d050a8b24">old_value_</a>(*adr) {}
<a name="l00448"></a>00448   <span class="keywordtype">void</span> restore()<span class="keyword"> const </span>{ (*address_) = <a class="code" href="constraint__solver_8cc.html#d23798e2eb6681fd68436c2d050a8b24">old_value_</a>; }
<a name="l00449"></a>00449  <span class="keyword">private</span>:
<a name="l00450"></a><a class="code" href="constraint__solver_8cc.html#a362338b69c404129e01e197a25f3a16">00450</a>   T* <a class="code" href="constraint__solver_8cc.html#a362338b69c404129e01e197a25f3a16">address_</a>;
<a name="l00451"></a><a class="code" href="constraint__solver_8cc.html#d23798e2eb6681fd68436c2d050a8b24">00451</a>   T <a class="code" href="constraint__solver_8cc.html#d23798e2eb6681fd68436c2d050a8b24">old_value_</a>;
<a name="l00452"></a>00452 };
<a name="l00453"></a>00453 
<a name="l00454"></a>00454 <span class="comment">// ----- Compressed trail -----</span>
<a name="l00455"></a>00455 
<a name="l00456"></a>00456 <span class="comment">// ---------- Trail Packer ---------</span>
<a name="l00457"></a>00457 <span class="comment">// Abstract class to pack trail blocks.</span>
<a name="l00458"></a>00458 
<a name="l00459"></a>00459 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span>TrailPacker {
<a name="l00460"></a>00460  <span class="keyword">public</span>:
<a name="l00461"></a>00461   <span class="keyword">explicit</span> TrailPacker(<span class="keywordtype">int</span> block_size) : <a class="code" href="constraint__solver_8cc.html#5096c18af9e85f5843cff474f8146533">block_size_</a>(block_size) {}
<a name="l00462"></a>00462   <span class="keyword">virtual</span> ~TrailPacker() {}
<a name="l00463"></a>00463   <span class="keywordtype">int</span> input_size()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="constraint__solver_8cc.html#5096c18af9e85f5843cff474f8146533">block_size_</a> * <span class="keyword">sizeof</span>(addrval&lt;T&gt;); }
<a name="l00464"></a>00464   <span class="keyword">virtual</span> <span class="keywordtype">void</span> Pack(<span class="keyword">const</span> addrval&lt;T&gt;* block, <span class="keywordtype">string</span>* packed_block) = 0;
<a name="l00465"></a>00465   <span class="keyword">virtual</span> <span class="keywordtype">void</span> Unpack(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; packed_block, addrval&lt;T&gt;* block) = 0;
<a name="l00466"></a>00466  <span class="keyword">private</span>:
<a name="l00467"></a><a class="code" href="constraint__solver_8cc.html#5096c18af9e85f5843cff474f8146533">00467</a>   <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="constraint__solver_8cc.html#5096c18af9e85f5843cff474f8146533">block_size_</a>;
<a name="l00468"></a>00468   DISALLOW_COPY_AND_ASSIGN(TrailPacker);
<a name="l00469"></a>00469 };
<a name="l00470"></a>00470 
<a name="l00471"></a>00471 
<a name="l00472"></a>00472 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span>NoCompressionTrailPacker : <span class="keyword">public</span> TrailPacker&lt;T&gt; {
<a name="l00473"></a>00473  <span class="keyword">public</span>:
<a name="l00474"></a>00474   <span class="keyword">explicit</span> NoCompressionTrailPacker(<span class="keywordtype">int</span> block_size)
<a name="l00475"></a>00475       : TrailPacker&lt;T&gt;(block_size) {}
<a name="l00476"></a>00476   <span class="keyword">virtual</span> ~NoCompressionTrailPacker() {}
<a name="l00477"></a>00477   <span class="keyword">virtual</span> <span class="keywordtype">void</span> Pack(<span class="keyword">const</span> addrval&lt;T&gt;* block, <span class="keywordtype">string</span>* packed_block) {
<a name="l00478"></a>00478     DCHECK(block != NULL);
<a name="l00479"></a>00479     DCHECK(packed_block != NULL);
<a name="l00480"></a>00480     StringPiece block_str;
<a name="l00481"></a>00481     block_str.set(block, this-&gt;input_size());
<a name="l00482"></a>00482     block_str.CopyToString(packed_block);
<a name="l00483"></a>00483   }
<a name="l00484"></a>00484   <span class="keyword">virtual</span> <span class="keywordtype">void</span> Unpack(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; packed_block, addrval&lt;T&gt;* block) {
<a name="l00485"></a>00485     DCHECK(block != NULL);
<a name="l00486"></a>00486     memcpy(block, packed_block.c_str(), packed_block.size());
<a name="l00487"></a>00487   }
<a name="l00488"></a>00488  <span class="keyword">private</span>:
<a name="l00489"></a>00489   DISALLOW_COPY_AND_ASSIGN(NoCompressionTrailPacker&lt;T&gt;);
<a name="l00490"></a>00490 };
<a name="l00491"></a>00491 
<a name="l00492"></a>00492 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span>ZlibTrailPacker : <span class="keyword">public</span> TrailPacker&lt;T&gt; {
<a name="l00493"></a>00493  <span class="keyword">public</span>:
<a name="l00494"></a>00494   <span class="keyword">explicit</span> ZlibTrailPacker(<span class="keywordtype">int</span> block_size)
<a name="l00495"></a>00495       : TrailPacker&lt;T&gt;(block_size),
<a name="l00496"></a>00496         <a class="code" href="constraint__solver_8cc.html#f2658219e014f40beab279ee9c056bf1">tmp_size_</a>(compressBound(this-&gt;input_size())),
<a name="l00497"></a>00497         <a class="code" href="constraint__solver_8cc.html#71f7f413ecb3d77d983802f59b826b9c">tmp_block_</a>(new char[<a class="code" href="constraint__solver_8cc.html#f2658219e014f40beab279ee9c056bf1">tmp_size_</a>]) {}
<a name="l00498"></a>00498 
<a name="l00499"></a>00499   <span class="keyword">virtual</span> ~ZlibTrailPacker() {}
<a name="l00500"></a>00500 
<a name="l00501"></a>00501   <span class="keyword">virtual</span> <span class="keywordtype">void</span> Pack(<span class="keyword">const</span> addrval&lt;T&gt;* block, <span class="keywordtype">string</span>* packed_block) {
<a name="l00502"></a>00502     DCHECK(block != NULL);
<a name="l00503"></a>00503     DCHECK(packed_block != NULL);
<a name="l00504"></a>00504     uLongf size = <a class="code" href="constraint__solver_8cc.html#f2658219e014f40beab279ee9c056bf1">tmp_size_</a>;
<a name="l00505"></a>00505     <span class="keyword">const</span> <span class="keywordtype">int</span> result = compress(reinterpret_cast&lt;Bytef*&gt;(<a class="code" href="constraint__solver_8cc.html#71f7f413ecb3d77d983802f59b826b9c">tmp_block_</a>.get()),
<a name="l00506"></a>00506                                 &amp;size,
<a name="l00507"></a>00507                                 reinterpret_cast&lt;const Bytef*&gt;(block),
<a name="l00508"></a>00508                                 this-&gt;input_size());
<a name="l00509"></a>00509     CHECK_EQ(Z_OK, result);
<a name="l00510"></a>00510     StringPiece block_str;
<a name="l00511"></a>00511     block_str.set(<a class="code" href="constraint__solver_8cc.html#71f7f413ecb3d77d983802f59b826b9c">tmp_block_</a>.get(), size);
<a name="l00512"></a>00512     block_str.CopyToString(packed_block);
<a name="l00513"></a>00513   }
<a name="l00514"></a>00514 
<a name="l00515"></a>00515   <span class="keyword">virtual</span> <span class="keywordtype">void</span> Unpack(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; packed_block, addrval&lt;T&gt;* block) {
<a name="l00516"></a>00516     DCHECK(block != NULL);
<a name="l00517"></a>00517     uLongf size = this-&gt;input_size();
<a name="l00518"></a>00518     <span class="keyword">const</span> <span class="keywordtype">int</span> result =
<a name="l00519"></a>00519         uncompress(reinterpret_cast&lt;Bytef*&gt;(block),
<a name="l00520"></a>00520                    &amp;size,
<a name="l00521"></a>00521                    reinterpret_cast&lt;const Bytef*&gt;(packed_block.c_str()),
<a name="l00522"></a>00522                    packed_block.size());
<a name="l00523"></a>00523     CHECK_EQ(Z_OK, result);
<a name="l00524"></a>00524   }
<a name="l00525"></a>00525 
<a name="l00526"></a>00526  <span class="keyword">private</span>:
<a name="l00527"></a><a class="code" href="constraint__solver_8cc.html#f2658219e014f40beab279ee9c056bf1">00527</a>   <span class="keyword">const</span> uint64 <a class="code" href="constraint__solver_8cc.html#f2658219e014f40beab279ee9c056bf1">tmp_size_</a>;
<a name="l00528"></a><a class="code" href="constraint__solver_8cc.html#71f7f413ecb3d77d983802f59b826b9c">00528</a>   scoped_array&lt;char&gt; <a class="code" href="constraint__solver_8cc.html#71f7f413ecb3d77d983802f59b826b9c">tmp_block_</a>;
<a name="l00529"></a>00529   DISALLOW_COPY_AND_ASSIGN(ZlibTrailPacker&lt;T&gt;);
<a name="l00530"></a>00530 };
<a name="l00531"></a>00531 
<a name="l00532"></a>00532 
<a name="l00533"></a>00533 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span>CompressedTrail {
<a name="l00534"></a>00534  <span class="keyword">public</span>:
<a name="l00535"></a>00535   CompressedTrail(<span class="keywordtype">int</span> block_size,
<a name="l00536"></a>00536                   <a class="code" href="structoperations__research_1_1SolverParameters.html#63c6fe2e32ced9f83a4064c800130651">SolverParameters::TrailCompression</a> compression_level)
<a name="l00537"></a>00537       : <a class="code" href="constraint__solver_8cc.html#5096c18af9e85f5843cff474f8146533">block_size_</a>(block_size),
<a name="l00538"></a>00538         <a class="code" href="constraint__solver_8cc.html#82c4fcc22ae3da4c7c6cb6988fb19162">blocks_</a>(NULL),
<a name="l00539"></a>00539         <a class="code" href="constraint__solver_8cc.html#ff6eda2a826c43e932c40d3978b1e602">free_blocks_</a>(NULL),
<a name="l00540"></a>00540         <a class="code" href="constraint__solver_8cc.html#daa4e0422c561cd3355217847b464c1a">data_</a>(new addrval&lt;T&gt;[block_size]),
<a name="l00541"></a>00541         <a class="code" href="constraint__solver_8cc.html#47e9c6399acd806832325db9443ceb1e">buffer_</a>(new addrval&lt;T&gt;[block_size]),
<a name="l00542"></a>00542         <a class="code" href="constraint__solver_8cc.html#885536ed643b79ade94dd6edb34a7c43">buffer_used_</a>(false),
<a name="l00543"></a>00543         <a class="code" href="constraint__solver_8cc.html#a94ac41f5ae06f3794120fd6dfc00201">current_</a>(0),
<a name="l00544"></a>00544         <a class="code" href="alldiff__cst_8cc.html#50218915641ec8f39877c2565e95a604">size_</a>(0) {
<a name="l00545"></a>00545     <span class="keywordflow">switch</span> (compression_level) {
<a name="l00546"></a>00546       <span class="keywordflow">case</span> <a class="code" href="structoperations__research_1_1SolverParameters.html#63c6fe2e32ced9f83a4064c80013065161440a766f50f6084eb75e9475441c9b">SolverParameters::NO_COMPRESSION</a>: {
<a name="l00547"></a>00547         <a class="code" href="constraint__solver_8cc.html#0c3fa39e36967304f977d21f5b75c3e2">packer_</a>.reset(<span class="keyword">new</span> NoCompressionTrailPacker&lt;T&gt;(block_size));
<a name="l00548"></a>00548         <span class="keywordflow">break</span>;
<a name="l00549"></a>00549       }
<a name="l00550"></a>00550       <span class="keywordflow">case</span> <a class="code" href="structoperations__research_1_1SolverParameters.html#63c6fe2e32ced9f83a4064c800130651be0708fd20ec0a9fc653ee2d2ee2f10f">SolverParameters::COMPRESS_WITH_ZLIB</a>: {
<a name="l00551"></a>00551         <a class="code" href="constraint__solver_8cc.html#0c3fa39e36967304f977d21f5b75c3e2">packer_</a>.reset(<span class="keyword">new</span> ZlibTrailPacker&lt;T&gt;(block_size));
<a name="l00552"></a>00552         <span class="keywordflow">break</span>;
<a name="l00553"></a>00553       }
<a name="l00554"></a>00554     }
<a name="l00555"></a>00555 
<a name="l00556"></a>00556     <span class="comment">// We zero all memory used by addrval arrays.</span>
<a name="l00557"></a>00557     <span class="comment">// Because of padding, all bytes may not be initialized, while compression</span>
<a name="l00558"></a>00558     <span class="comment">// will read them all, even if the uninitialized bytes are never used.</span>
<a name="l00559"></a>00559     <span class="comment">// This makes valgrind happy.</span>
<a name="l00560"></a>00560 
<a name="l00561"></a>00561     memset(<a class="code" href="constraint__solver_8cc.html#daa4e0422c561cd3355217847b464c1a">data_</a>.get(), 0, <span class="keyword">sizeof</span>(*<a class="code" href="constraint__solver_8cc.html#daa4e0422c561cd3355217847b464c1a">data_</a>.get()) * block_size);
<a name="l00562"></a>00562     memset(<a class="code" href="constraint__solver_8cc.html#47e9c6399acd806832325db9443ceb1e">buffer_</a>.get(), 0, <span class="keyword">sizeof</span>(*<a class="code" href="constraint__solver_8cc.html#47e9c6399acd806832325db9443ceb1e">buffer_</a>.get()) * block_size);
<a name="l00563"></a>00563   }
<a name="l00564"></a>00564   ~CompressedTrail() {
<a name="l00565"></a>00565     FreeBlocks(<a class="code" href="constraint__solver_8cc.html#82c4fcc22ae3da4c7c6cb6988fb19162">blocks_</a>);
<a name="l00566"></a>00566     FreeBlocks(<a class="code" href="constraint__solver_8cc.html#ff6eda2a826c43e932c40d3978b1e602">free_blocks_</a>);
<a name="l00567"></a>00567   }
<a name="l00568"></a>00568   <span class="keyword">const</span> addrval&lt;T&gt;&amp; Back()<span class="keyword"> const </span>{
<a name="l00569"></a>00569     <span class="comment">// Back of empty trail.</span>
<a name="l00570"></a>00570     DCHECK_GT(<a class="code" href="constraint__solver_8cc.html#a94ac41f5ae06f3794120fd6dfc00201">current_</a>, 0);
<a name="l00571"></a>00571     <span class="keywordflow">return</span> <a class="code" href="constraint__solver_8cc.html#daa4e0422c561cd3355217847b464c1a">data_</a>[<a class="code" href="constraint__solver_8cc.html#a94ac41f5ae06f3794120fd6dfc00201">current_</a> - 1];
<a name="l00572"></a>00572   }
<a name="l00573"></a>00573   <span class="keywordtype">void</span> PopBack() {
<a name="l00574"></a>00574     <span class="keywordflow">if</span> (<a class="code" href="alldiff__cst_8cc.html#50218915641ec8f39877c2565e95a604">size_</a> &gt; 0) {
<a name="l00575"></a>00575       --<a class="code" href="constraint__solver_8cc.html#a94ac41f5ae06f3794120fd6dfc00201">current_</a>;
<a name="l00576"></a>00576       <span class="keywordflow">if</span> (<a class="code" href="constraint__solver_8cc.html#a94ac41f5ae06f3794120fd6dfc00201">current_</a> &lt;= 0) {
<a name="l00577"></a>00577         <span class="keywordflow">if</span> (<a class="code" href="constraint__solver_8cc.html#885536ed643b79ade94dd6edb34a7c43">buffer_used_</a>) {
<a name="l00578"></a>00578           <a class="code" href="constraint__solver_8cc.html#daa4e0422c561cd3355217847b464c1a">data_</a>.swap(<a class="code" href="constraint__solver_8cc.html#47e9c6399acd806832325db9443ceb1e">buffer_</a>);
<a name="l00579"></a>00579           <a class="code" href="constraint__solver_8cc.html#a94ac41f5ae06f3794120fd6dfc00201">current_</a> = <a class="code" href="constraint__solver_8cc.html#5096c18af9e85f5843cff474f8146533">block_size_</a>;
<a name="l00580"></a>00580           <a class="code" href="constraint__solver_8cc.html#885536ed643b79ade94dd6edb34a7c43">buffer_used_</a> = <span class="keyword">false</span>;
<a name="l00581"></a>00581         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="constraint__solver_8cc.html#82c4fcc22ae3da4c7c6cb6988fb19162">blocks_</a> != NULL) {
<a name="l00582"></a>00582           <a class="code" href="constraint__solver_8cc.html#0c3fa39e36967304f977d21f5b75c3e2">packer_</a>-&gt;Unpack(<a class="code" href="constraint__solver_8cc.html#82c4fcc22ae3da4c7c6cb6988fb19162">blocks_</a>-&gt;compressed, <a class="code" href="constraint__solver_8cc.html#daa4e0422c561cd3355217847b464c1a">data_</a>.get());
<a name="l00583"></a>00583           FreeTopBlock();
<a name="l00584"></a>00584           <a class="code" href="constraint__solver_8cc.html#a94ac41f5ae06f3794120fd6dfc00201">current_</a> = <a class="code" href="constraint__solver_8cc.html#5096c18af9e85f5843cff474f8146533">block_size_</a>;
<a name="l00585"></a>00585         }
<a name="l00586"></a>00586       }
<a name="l00587"></a>00587       --<a class="code" href="alldiff__cst_8cc.html#50218915641ec8f39877c2565e95a604">size_</a>;
<a name="l00588"></a>00588     }
<a name="l00589"></a>00589   }
<a name="l00590"></a>00590   <span class="keywordtype">void</span> PushBack(<span class="keyword">const</span> addrval&lt;T&gt;&amp; addr_val) {
<a name="l00591"></a>00591     <span class="keywordflow">if</span> (<a class="code" href="constraint__solver_8cc.html#a94ac41f5ae06f3794120fd6dfc00201">current_</a> &gt;= <a class="code" href="constraint__solver_8cc.html#5096c18af9e85f5843cff474f8146533">block_size_</a>) {
<a name="l00592"></a>00592       <span class="keywordflow">if</span> (<a class="code" href="constraint__solver_8cc.html#885536ed643b79ade94dd6edb34a7c43">buffer_used_</a>) {  <span class="comment">// Buffer is used.</span>
<a name="l00593"></a>00593         NewTopBlock();
<a name="l00594"></a>00594         <a class="code" href="constraint__solver_8cc.html#0c3fa39e36967304f977d21f5b75c3e2">packer_</a>-&gt;Pack(<a class="code" href="constraint__solver_8cc.html#47e9c6399acd806832325db9443ceb1e">buffer_</a>.get(), &amp;<a class="code" href="constraint__solver_8cc.html#82c4fcc22ae3da4c7c6cb6988fb19162">blocks_</a>-&gt;compressed);
<a name="l00595"></a>00595         <span class="comment">// O(1) operation.</span>
<a name="l00596"></a>00596         <a class="code" href="constraint__solver_8cc.html#daa4e0422c561cd3355217847b464c1a">data_</a>.swap(<a class="code" href="constraint__solver_8cc.html#47e9c6399acd806832325db9443ceb1e">buffer_</a>);
<a name="l00597"></a>00597       } <span class="keywordflow">else</span> {
<a name="l00598"></a>00598         <a class="code" href="constraint__solver_8cc.html#daa4e0422c561cd3355217847b464c1a">data_</a>.swap(<a class="code" href="constraint__solver_8cc.html#47e9c6399acd806832325db9443ceb1e">buffer_</a>);
<a name="l00599"></a>00599         <a class="code" href="constraint__solver_8cc.html#885536ed643b79ade94dd6edb34a7c43">buffer_used_</a> = <span class="keyword">true</span>;
<a name="l00600"></a>00600       }
<a name="l00601"></a>00601       <a class="code" href="constraint__solver_8cc.html#a94ac41f5ae06f3794120fd6dfc00201">current_</a> = 0;
<a name="l00602"></a>00602     }
<a name="l00603"></a>00603     <a class="code" href="constraint__solver_8cc.html#daa4e0422c561cd3355217847b464c1a">data_</a>[<a class="code" href="constraint__solver_8cc.html#a94ac41f5ae06f3794120fd6dfc00201">current_</a>] = addr_val;
<a name="l00604"></a>00604     ++<a class="code" href="constraint__solver_8cc.html#a94ac41f5ae06f3794120fd6dfc00201">current_</a>;
<a name="l00605"></a>00605     ++<a class="code" href="alldiff__cst_8cc.html#50218915641ec8f39877c2565e95a604">size_</a>;
<a name="l00606"></a>00606   }
<a name="l00607"></a>00607   <span class="keywordtype">int</span> size()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="alldiff__cst_8cc.html#50218915641ec8f39877c2565e95a604">size_</a>; }
<a name="l00608"></a>00608 
<a name="l00609"></a>00609  <span class="keyword">private</span>:
<a name="l00610"></a>00610   <span class="keyword">struct </span>Block {
<a name="l00611"></a><a class="code" href="constraint__solver_8cc.html#af1975cc46128f6c968300d5a0bcdb18">00611</a>     <span class="keywordtype">string</span> <a class="code" href="constraint__solver_8cc.html#af1975cc46128f6c968300d5a0bcdb18">compressed</a>;
<a name="l00612"></a>00612     Block* <a class="code" href="constraint__solver_8cc.html#395f613555f398dd389670bb4c2a4599">next</a>;
<a name="l00613"></a>00613   };
<a name="l00614"></a>00614 
<a name="l00615"></a>00615   <span class="keywordtype">void</span> FreeTopBlock() {
<a name="l00616"></a>00616     Block* block = <a class="code" href="constraint__solver_8cc.html#82c4fcc22ae3da4c7c6cb6988fb19162">blocks_</a>;
<a name="l00617"></a>00617     <a class="code" href="constraint__solver_8cc.html#82c4fcc22ae3da4c7c6cb6988fb19162">blocks_</a> = block-&gt;next;
<a name="l00618"></a>00618     block-&gt;compressed.clear();
<a name="l00619"></a>00619     block-&gt;next = <a class="code" href="constraint__solver_8cc.html#ff6eda2a826c43e932c40d3978b1e602">free_blocks_</a>;
<a name="l00620"></a>00620     <a class="code" href="constraint__solver_8cc.html#ff6eda2a826c43e932c40d3978b1e602">free_blocks_</a> = block;
<a name="l00621"></a>00621   }
<a name="l00622"></a>00622   <span class="keywordtype">void</span> NewTopBlock() {
<a name="l00623"></a>00623     Block* block = NULL;
<a name="l00624"></a>00624     <span class="keywordflow">if</span> (<a class="code" href="constraint__solver_8cc.html#ff6eda2a826c43e932c40d3978b1e602">free_blocks_</a> != NULL) {
<a name="l00625"></a>00625       block = <a class="code" href="constraint__solver_8cc.html#ff6eda2a826c43e932c40d3978b1e602">free_blocks_</a>;
<a name="l00626"></a>00626       <a class="code" href="constraint__solver_8cc.html#ff6eda2a826c43e932c40d3978b1e602">free_blocks_</a> = block-&gt;next;
<a name="l00627"></a>00627     } <span class="keywordflow">else</span> {
<a name="l00628"></a>00628       block = <span class="keyword">new</span> Block;
<a name="l00629"></a>00629     }
<a name="l00630"></a>00630     block-&gt;next = <a class="code" href="constraint__solver_8cc.html#82c4fcc22ae3da4c7c6cb6988fb19162">blocks_</a>;
<a name="l00631"></a>00631     <a class="code" href="constraint__solver_8cc.html#82c4fcc22ae3da4c7c6cb6988fb19162">blocks_</a> = block;
<a name="l00632"></a>00632   }
<a name="l00633"></a>00633   <span class="keywordtype">void</span> FreeBlocks(Block* blocks) {
<a name="l00634"></a>00634     <span class="keywordflow">while</span> (NULL != blocks) {
<a name="l00635"></a>00635       Block* <a class="code" href="constraint__solver_8cc.html#395f613555f398dd389670bb4c2a4599">next</a> = blocks-&gt;next;
<a name="l00636"></a>00636       <span class="keyword">delete</span> blocks;
<a name="l00637"></a>00637       blocks = next;
<a name="l00638"></a>00638     }
<a name="l00639"></a>00639   }
<a name="l00640"></a>00640 
<a name="l00641"></a><a class="code" href="constraint__solver_8cc.html#0c3fa39e36967304f977d21f5b75c3e2">00641</a>   scoped_ptr&lt;TrailPacker&lt;T&gt; &gt; <a class="code" href="constraint__solver_8cc.html#0c3fa39e36967304f977d21f5b75c3e2">packer_</a>;
<a name="l00642"></a>00642   <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="constraint__solver_8cc.html#5096c18af9e85f5843cff474f8146533">block_size_</a>;
<a name="l00643"></a><a class="code" href="constraint__solver_8cc.html#82c4fcc22ae3da4c7c6cb6988fb19162">00643</a>   Block* <a class="code" href="constraint__solver_8cc.html#82c4fcc22ae3da4c7c6cb6988fb19162">blocks_</a>;
<a name="l00644"></a><a class="code" href="constraint__solver_8cc.html#ff6eda2a826c43e932c40d3978b1e602">00644</a>   Block* <a class="code" href="constraint__solver_8cc.html#ff6eda2a826c43e932c40d3978b1e602">free_blocks_</a>;
<a name="l00645"></a><a class="code" href="constraint__solver_8cc.html#daa4e0422c561cd3355217847b464c1a">00645</a>   scoped_array&lt;addrval&lt;T&gt; &gt; <a class="code" href="constraint__solver_8cc.html#daa4e0422c561cd3355217847b464c1a">data_</a>;
<a name="l00646"></a><a class="code" href="constraint__solver_8cc.html#47e9c6399acd806832325db9443ceb1e">00646</a>   scoped_array&lt;addrval&lt;T&gt; &gt; <a class="code" href="constraint__solver_8cc.html#47e9c6399acd806832325db9443ceb1e">buffer_</a>;
<a name="l00647"></a><a class="code" href="constraint__solver_8cc.html#885536ed643b79ade94dd6edb34a7c43">00647</a>   <span class="keywordtype">bool</span> <a class="code" href="constraint__solver_8cc.html#885536ed643b79ade94dd6edb34a7c43">buffer_used_</a>;
<a name="l00648"></a><a class="code" href="constraint__solver_8cc.html#a94ac41f5ae06f3794120fd6dfc00201">00648</a>   <span class="keywordtype">int</span> <a class="code" href="constraint__solver_8cc.html#a94ac41f5ae06f3794120fd6dfc00201">current_</a>;
<a name="l00649"></a><a class="code" href="constraint__solver_8cc.html#6947fa5d6ba628dd62d59ffbad8b8d80">00649</a>   <span class="keywordtype">int</span> <a class="code" href="alldiff__cst_8cc.html#50218915641ec8f39877c2565e95a604">size_</a>;
<a name="l00650"></a>00650 };
<a name="l00651"></a>00651 }  <span class="comment">// namespace</span>
<a name="l00652"></a>00652 
<a name="l00653"></a>00653 <span class="comment">// ----- Trail -----</span>
<a name="l00654"></a>00654 
<a name="l00655"></a>00655 <span class="comment">// Object are explicitely copied using the copy ctor instead of</span>
<a name="l00656"></a>00656 <span class="comment">// passing and storing a pointer. As objects are small, copying is</span>
<a name="l00657"></a>00657 <span class="comment">// much faster than allocating (around 35% on a complete solve).</span>
<a name="l00658"></a>00658 
<a name="l00659"></a>00659 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#bf86ac5b7c7ec6d91d566831705aae7a" title="namespace">RestoreBoolValue</a>(IntVar* <span class="keyword">const</span> <a class="code" href="expr__array_8cc.html#472a99923cbe11ae7b5a5d157d9ad465">var</a>);
<a name="l00660"></a>00660 
<a name="l00661"></a><a class="code" href="structoperations__research_1_1Trail.html">00661</a> <span class="keyword">struct </span><a class="code" href="structoperations__research_1_1Trail.html">Trail</a> {
<a name="l00662"></a><a class="code" href="structoperations__research_1_1Trail.html#2d4bed7f601d9c2b91c436bf26d06b3f">00662</a>   CompressedTrail&lt;int&gt; rev_ints_;
<a name="l00663"></a><a class="code" href="structoperations__research_1_1Trail.html#560c3b50561fbad23f5d0eb2c23ebfab">00663</a>   CompressedTrail&lt;int64&gt; rev_int64s_;
<a name="l00664"></a><a class="code" href="structoperations__research_1_1Trail.html#4955abe64f41d7b61b70a50cecd54e6e">00664</a>   CompressedTrail&lt;uint64&gt; rev_uint64s_;
<a name="l00665"></a><a class="code" href="structoperations__research_1_1Trail.html#dbd038e5ae46c593614742f8a99a5e2f">00665</a>   CompressedTrail&lt;void*&gt; rev_ptrs_;
<a name="l00666"></a><a class="code" href="structoperations__research_1_1Trail.html#14dde66107e14df4e0ba8776044f98b8">00666</a>   std::vector&lt;IntVar*&gt; rev_boolvar_list_;
<a name="l00667"></a><a class="code" href="structoperations__research_1_1Trail.html#af3945788d4e1c53750a716f3ec5c81f">00667</a>   std::vector&lt;bool*&gt; rev_bools_;
<a name="l00668"></a><a class="code" href="structoperations__research_1_1Trail.html#c1bd42259c931105cdb2de4d3dce0e18">00668</a>   std::vector&lt;bool&gt; rev_bool_value_;
<a name="l00669"></a><a class="code" href="structoperations__research_1_1Trail.html#065ec10de6bd9974f507166874244d21">00669</a>   std::vector&lt;int*&gt; rev_int_memory_;
<a name="l00670"></a><a class="code" href="structoperations__research_1_1Trail.html#5483c63862b2b25a8d0d0c805663b64e">00670</a>   std::vector&lt;int64*&gt; rev_int64_memory_;
<a name="l00671"></a><a class="code" href="structoperations__research_1_1Trail.html#3fddfc852cfa223da8de198ba9a82930">00671</a>   std::vector&lt;BaseObject*&gt; rev_object_memory_;
<a name="l00672"></a><a class="code" href="structoperations__research_1_1Trail.html#e159f888e466248913a366ced7b3337f">00672</a>   std::vector&lt;BaseObject**&gt; rev_object_array_memory_;
<a name="l00673"></a><a class="code" href="structoperations__research_1_1Trail.html#a202f0ebb9d9e361ddabfd6a280b266d">00673</a>   std::vector&lt;void*&gt; rev_memory_;
<a name="l00674"></a><a class="code" href="structoperations__research_1_1Trail.html#5d994aba6a8e421ffa6e7db2be9c977a">00674</a>   std::vector&lt;void**&gt; rev_memory_array_;
<a name="l00675"></a>00675 
<a name="l00676"></a><a class="code" href="structoperations__research_1_1Trail.html#bdf8beb7e8d0082af1e7d8efa2e9f9e6">00676</a>   <a class="code" href="structoperations__research_1_1StateMarker.html#3ffe707082206cf6d91b65922bafe2e2">Trail</a>(<span class="keywordtype">int</span> block_size, <a class="code" href="structoperations__research_1_1SolverParameters.html#63c6fe2e32ced9f83a4064c800130651">SolverParameters::TrailCompression</a> compression_level)
<a name="l00677"></a>00677       : rev_ints_(block_size, compression_level),
<a name="l00678"></a>00678         rev_int64s_(block_size, compression_level),
<a name="l00679"></a>00679         rev_uint64s_(block_size, compression_level),
<a name="l00680"></a>00680         rev_ptrs_(block_size, compression_level) {}
<a name="l00681"></a>00681 
<a name="l00682"></a><a class="code" href="structoperations__research_1_1Trail.html#9bcb808935c3276e422e896453335a3c">00682</a>   <span class="keywordtype">void</span> BacktrackTo(<a class="code" href="structoperations__research_1_1StateMarker.html">StateMarker</a>* m) {
<a name="l00683"></a>00683     <span class="keywordtype">int</span> target = m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#47e232d3c97f162917eb26a62370a3b0">rev_int_index_</a>;
<a name="l00684"></a>00684     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> curr = rev_ints_.size(); curr &gt; target; --curr) {
<a name="l00685"></a>00685       <span class="keyword">const</span> addrval&lt;int&gt;&amp; cell = rev_ints_.Back();
<a name="l00686"></a>00686       cell.restore();
<a name="l00687"></a>00687       rev_ints_.PopBack();
<a name="l00688"></a>00688     }
<a name="l00689"></a>00689     DCHECK_EQ(rev_ints_.size(), target);
<a name="l00690"></a>00690     <span class="comment">// Incorrect trail size after backtrack.</span>
<a name="l00691"></a>00691     target = m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#59a871b8eb960f4f605ce92ae0b0b5cb">rev_int64_index_</a>;
<a name="l00692"></a>00692     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> curr = rev_int64s_.size(); curr &gt; target; --curr) {
<a name="l00693"></a>00693       <span class="keyword">const</span> addrval&lt;int64&gt;&amp; cell = rev_int64s_.Back();
<a name="l00694"></a>00694       cell.restore();
<a name="l00695"></a>00695       rev_int64s_.PopBack();
<a name="l00696"></a>00696     }
<a name="l00697"></a>00697     DCHECK_EQ(rev_int64s_.size(), target);
<a name="l00698"></a>00698     <span class="comment">// Incorrect trail size after backtrack.</span>
<a name="l00699"></a>00699     target = m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#98de7b131b404376d33337b01eb28031">rev_uint64_index_</a>;
<a name="l00700"></a>00700     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> curr = rev_uint64s_.size(); curr &gt; target; --curr) {
<a name="l00701"></a>00701       <span class="keyword">const</span> addrval&lt;uint64&gt;&amp; cell = rev_uint64s_.Back();
<a name="l00702"></a>00702       cell.restore();
<a name="l00703"></a>00703       rev_uint64s_.PopBack();
<a name="l00704"></a>00704     }
<a name="l00705"></a>00705     DCHECK_EQ(rev_uint64s_.size(), target);
<a name="l00706"></a>00706     <span class="comment">// Incorrect trail size after backtrack.</span>
<a name="l00707"></a>00707     target = m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#611fa35102e6366583df213d9a033ce5">rev_ptr_index_</a>;
<a name="l00708"></a>00708     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> curr = rev_ptrs_.size(); curr &gt; target; --curr) {
<a name="l00709"></a>00709       <span class="keyword">const</span> addrval&lt;void*&gt;&amp; cell = rev_ptrs_.Back();
<a name="l00710"></a>00710       cell.restore();
<a name="l00711"></a>00711       rev_ptrs_.PopBack();
<a name="l00712"></a>00712     }
<a name="l00713"></a>00713     DCHECK_EQ(rev_ptrs_.size(), target);
<a name="l00714"></a>00714     <span class="comment">// Incorrect trail size after backtrack.</span>
<a name="l00715"></a>00715     target = m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#e15d50e63cbb570a6c5bd9b207e4fd86">rev_boolvar_list_index_</a>;
<a name="l00716"></a>00716     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> curr = rev_boolvar_list_.size() - 1; curr &gt;= target; --curr) {
<a name="l00717"></a>00717       <a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <span class="keyword">const</span> <a class="code" href="expr__array_8cc.html#472a99923cbe11ae7b5a5d157d9ad465">var</a> = rev_boolvar_list_[curr];
<a name="l00718"></a>00718       <a class="code" href="namespaceoperations__research.html#bf86ac5b7c7ec6d91d566831705aae7a" title="namespace">RestoreBoolValue</a>(var);
<a name="l00719"></a>00719     }
<a name="l00720"></a>00720     rev_boolvar_list_.resize(target);
<a name="l00721"></a>00721 
<a name="l00722"></a>00722     DCHECK_EQ(rev_bools_.size(), rev_bool_value_.size());
<a name="l00723"></a>00723     target = m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#cfe80591d75fad1f8b61d0be54f83be1">rev_bools_index_</a>;
<a name="l00724"></a>00724     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> curr = rev_bools_.size() - 1; curr &gt;= target; --curr) {
<a name="l00725"></a>00725       *(rev_bools_[curr]) = rev_bool_value_[curr];
<a name="l00726"></a>00726     }
<a name="l00727"></a>00727     rev_bools_.resize(target);
<a name="l00728"></a>00728     rev_bool_value_.resize(target);
<a name="l00729"></a>00729 
<a name="l00730"></a>00730     target = m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#567759b019a07447185219b3b049a56b">rev_int_memory_index_</a>;
<a name="l00731"></a>00731     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> curr = rev_int_memory_.size() - 1; curr &gt;= target; --curr) {
<a name="l00732"></a>00732       <span class="keyword">delete</span>[] rev_int_memory_[curr];
<a name="l00733"></a>00733     }
<a name="l00734"></a>00734     rev_int_memory_.resize(target);
<a name="l00735"></a>00735 
<a name="l00736"></a>00736     target = m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#3716106fcd2f164dd83d0ee3d7f48ea4">rev_int64_memory_index_</a>;
<a name="l00737"></a>00737     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> curr = rev_int64_memory_.size() - 1; curr &gt;= target; --curr) {
<a name="l00738"></a>00738       <span class="keyword">delete</span>[] rev_int64_memory_[curr];
<a name="l00739"></a>00739     }
<a name="l00740"></a>00740     rev_int64_memory_.resize(target);
<a name="l00741"></a>00741 
<a name="l00742"></a>00742     target = m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#0d2c3347f6d80cf1754b596f5c4cd3f3">rev_object_memory_index_</a>;
<a name="l00743"></a>00743     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> curr = rev_object_memory_.size() - 1; curr &gt;= target; --curr) {
<a name="l00744"></a>00744       <span class="keyword">delete</span> rev_object_memory_[curr];
<a name="l00745"></a>00745     }
<a name="l00746"></a>00746     rev_object_memory_.resize(target);
<a name="l00747"></a>00747 
<a name="l00748"></a>00748     target = m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#b9edca8db5e3933b8343ebc6242c51b0">rev_object_array_memory_index_</a>;
<a name="l00749"></a>00749     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> curr = rev_object_array_memory_.size() - 1;
<a name="l00750"></a>00750          curr &gt;= target; --curr) {
<a name="l00751"></a>00751       <span class="keyword">delete</span>[] rev_object_array_memory_[curr];
<a name="l00752"></a>00752     }
<a name="l00753"></a>00753     rev_object_array_memory_.resize(target);
<a name="l00754"></a>00754 
<a name="l00755"></a>00755     target = m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#59f571a7c091f1c6613f7a3fd81e2b9f">rev_memory_index_</a>;
<a name="l00756"></a>00756     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> curr = rev_memory_.size() - 1; curr &gt;= target; --curr) {
<a name="l00757"></a>00757       <span class="keyword">delete</span> <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(rev_memory_[curr]);
<a name="l00758"></a>00758       <span class="comment">// The previous cast is necessary to deallocate generic memory</span>
<a name="l00759"></a>00759       <span class="comment">// described by a void* when passed to the RevAlloc procedure</span>
<a name="l00760"></a>00760       <span class="comment">// We cannot do a delete[] there</span>
<a name="l00761"></a>00761       <span class="comment">// This is useful for cells of RevFIFO and should not be used outside</span>
<a name="l00762"></a>00762       <span class="comment">// of the product</span>
<a name="l00763"></a>00763     }
<a name="l00764"></a>00764     rev_memory_.resize(target);
<a name="l00765"></a>00765 
<a name="l00766"></a>00766     target = m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#7376e157224557b0ac9471eee71c2e04">rev_memory_array_index_</a>;
<a name="l00767"></a>00767     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> curr = rev_memory_array_.size() - 1; curr &gt;= target; --curr) {
<a name="l00768"></a>00768       <span class="keyword">delete</span> [] rev_memory_array_[curr];
<a name="l00769"></a>00769       <span class="comment">// delete [] version of the previous unsafe case.</span>
<a name="l00770"></a>00770     }
<a name="l00771"></a>00771     rev_memory_array_.resize(target);
<a name="l00772"></a>00772   }
<a name="l00773"></a>00773 };
<a name="l00774"></a>00774 
<a name="l00775"></a>00775 <span class="keywordtype">void</span> Solver::InternalSaveValue(<span class="keywordtype">int</span>* valptr) {
<a name="l00776"></a>00776   trail_-&gt;rev_ints_.PushBack(addrval&lt;int&gt;(valptr));
<a name="l00777"></a>00777 }
<a name="l00778"></a>00778 
<a name="l00779"></a>00779 <span class="keywordtype">void</span> Solver::InternalSaveValue(int64* valptr) {
<a name="l00780"></a>00780   trail_-&gt;rev_int64s_.PushBack(addrval&lt;int64&gt;(valptr));
<a name="l00781"></a>00781 }
<a name="l00782"></a>00782 
<a name="l00783"></a>00783 <span class="keywordtype">void</span> Solver::InternalSaveValue(uint64* valptr) {
<a name="l00784"></a>00784   trail_-&gt;rev_uint64s_.PushBack(addrval&lt;uint64&gt;(valptr));
<a name="l00785"></a>00785 }
<a name="l00786"></a>00786 
<a name="l00787"></a>00787 <span class="keywordtype">void</span> Solver::InternalSaveValue(<span class="keywordtype">void</span>** valptr) {
<a name="l00788"></a>00788   trail_-&gt;rev_ptrs_.PushBack(addrval&lt;void*&gt;(valptr));
<a name="l00789"></a>00789 }
<a name="l00790"></a>00790 
<a name="l00791"></a>00791 <span class="comment">// TODO(user) : this code is unsafe if you save the same alternating</span>
<a name="l00792"></a>00792 <span class="comment">// bool multiple times.</span>
<a name="l00793"></a>00793 <span class="comment">// The correct code should use a bitset and a single list.</span>
<a name="l00794"></a>00794 <span class="keywordtype">void</span> Solver::InternalSaveValue(<span class="keywordtype">bool</span>* valptr) {
<a name="l00795"></a>00795   trail_-&gt;rev_bools_.push_back(valptr);
<a name="l00796"></a>00796   trail_-&gt;rev_bool_value_.push_back(*valptr);
<a name="l00797"></a>00797 }
<a name="l00798"></a>00798 
<a name="l00799"></a>00799 BaseObject* Solver::SafeRevAlloc(BaseObject* ptr) {
<a name="l00800"></a>00800   check_alloc_state();
<a name="l00801"></a>00801   trail_-&gt;rev_object_memory_.push_back(ptr);
<a name="l00802"></a>00802   <span class="keywordflow">return</span> ptr;
<a name="l00803"></a>00803 }
<a name="l00804"></a>00804 
<a name="l00805"></a>00805 <span class="keywordtype">int</span>* Solver::SafeRevAllocArray(<span class="keywordtype">int</span>* ptr) {
<a name="l00806"></a>00806   check_alloc_state();
<a name="l00807"></a>00807   trail_-&gt;rev_int_memory_.push_back(ptr);
<a name="l00808"></a>00808   <span class="keywordflow">return</span> ptr;
<a name="l00809"></a>00809 }
<a name="l00810"></a>00810 
<a name="l00811"></a>00811 int64* Solver::SafeRevAllocArray(int64* ptr) {
<a name="l00812"></a>00812   check_alloc_state();
<a name="l00813"></a>00813   trail_-&gt;rev_int64_memory_.push_back(ptr);
<a name="l00814"></a>00814   <span class="keywordflow">return</span> ptr;
<a name="l00815"></a>00815 }
<a name="l00816"></a>00816 
<a name="l00817"></a>00817 uint64* Solver::SafeRevAllocArray(uint64* ptr) {
<a name="l00818"></a>00818   check_alloc_state();
<a name="l00819"></a>00819   trail_-&gt;rev_int64_memory_.push_back(reinterpret_cast&lt;int64*&gt;(ptr));
<a name="l00820"></a>00820   <span class="keywordflow">return</span> ptr;
<a name="l00821"></a>00821 }
<a name="l00822"></a>00822 
<a name="l00823"></a>00823 BaseObject** Solver::SafeRevAllocArray(BaseObject** ptr) {
<a name="l00824"></a>00824   check_alloc_state();
<a name="l00825"></a>00825   trail_-&gt;rev_object_array_memory_.push_back(ptr);
<a name="l00826"></a>00826   <span class="keywordflow">return</span> ptr;
<a name="l00827"></a>00827 }
<a name="l00828"></a>00828 
<a name="l00829"></a>00829 IntVar** Solver::SafeRevAllocArray(IntVar** ptr) {
<a name="l00830"></a>00830   BaseObject** in = SafeRevAllocArray(reinterpret_cast&lt;BaseObject**&gt;(ptr));
<a name="l00831"></a>00831   <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span>IntVar**<span class="keyword">&gt;</span>(in);
<a name="l00832"></a>00832 }
<a name="l00833"></a>00833 
<a name="l00834"></a>00834 IntExpr** Solver::SafeRevAllocArray(IntExpr** ptr) {
<a name="l00835"></a>00835   BaseObject** in = SafeRevAllocArray(reinterpret_cast&lt;BaseObject**&gt;(ptr));
<a name="l00836"></a>00836   <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span>IntExpr**<span class="keyword">&gt;</span>(in);
<a name="l00837"></a>00837 }
<a name="l00838"></a>00838 
<a name="l00839"></a>00839 Constraint** Solver::SafeRevAllocArray(Constraint** ptr) {
<a name="l00840"></a>00840   BaseObject** in = SafeRevAllocArray(reinterpret_cast&lt;BaseObject**&gt;(ptr));
<a name="l00841"></a>00841   <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span>Constraint**<span class="keyword">&gt;</span>(in);
<a name="l00842"></a>00842 }
<a name="l00843"></a>00843 
<a name="l00844"></a>00844 <span class="keywordtype">void</span>* Solver::UnsafeRevAllocAux(<span class="keywordtype">void</span>* ptr) {
<a name="l00845"></a>00845   check_alloc_state();
<a name="l00846"></a>00846   trail_-&gt;rev_memory_.push_back(ptr);
<a name="l00847"></a>00847   <span class="keywordflow">return</span> ptr;
<a name="l00848"></a>00848 }
<a name="l00849"></a>00849 
<a name="l00850"></a>00850 <span class="keywordtype">void</span>** Solver::UnsafeRevAllocArrayAux(<span class="keywordtype">void</span>** ptr) {
<a name="l00851"></a>00851   check_alloc_state();
<a name="l00852"></a>00852   trail_-&gt;rev_memory_array_.push_back(ptr);
<a name="l00853"></a>00853   <span class="keywordflow">return</span> ptr;
<a name="l00854"></a>00854 }
<a name="l00855"></a>00855 
<a name="l00856"></a><a class="code" href="namespaceoperations__research.html#0e9621c9c2973131800432eaa57818d5">00856</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#0e9621c9c2973131800432eaa57818d5">InternalSaveBooleanVarValue</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> solver, <a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <span class="keyword">const</span> <a class="code" href="expr__array_8cc.html#472a99923cbe11ae7b5a5d157d9ad465">var</a>) {
<a name="l00857"></a>00857   solver-&gt;<a class="code" href="classoperations__research_1_1Solver.html#f47aeceae83d79198b467315ad3c75e4">trail_</a>-&gt;rev_boolvar_list_.push_back(var);
<a name="l00858"></a>00858 }
<a name="l00859"></a>00859 
<a name="l00860"></a>00860 <span class="comment">// ------------------ Search class -----------------</span>
<a name="l00861"></a>00861 
<a name="l00862"></a><a class="code" href="classoperations__research_1_1Search.html">00862</a> <span class="keyword">class </span><a class="code" href="classoperations__research_1_1Search.html" title="Search class.">Search</a> {
<a name="l00863"></a>00863  <span class="keyword">public</span>:
<a name="l00864"></a><a class="code" href="classoperations__research_1_1Search.html#4a8159adb90f38dbfda2efcace82d233">00864</a>   <span class="keyword">explicit</span> <a class="code" href="classoperations__research_1_1Search.html" title="Search class.">Search</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s)
<a name="l00865"></a>00865       : <a class="code" href="ac4r__table_8cc.html#bd6bfbf6753a5deb0ce273fad6408e1e">solver_</a>(s), marker_stack_(), fail_buffer_(), solution_counter_(0),
<a name="l00866"></a>00866         decision_builder_(NULL), created_by_solve_(false),
<a name="l00867"></a>00867         <a class="code" href="constraint__solver_8cc.html#9fd084fd29a29f05d55a27331bb63280">selector_</a>(NULL), search_depth_(0), left_search_depth_(0),
<a name="l00868"></a>00868         should_restart_(false), should_finish_(false),
<a name="l00869"></a>00869         sentinel_pushed_(0), jmpbuf_filled_(false),
<a name="l00870"></a>00870         backtrack_at_the_end_of_the_search_(true) {}
<a name="l00871"></a>00871 
<a name="l00872"></a>00872   <span class="comment">// Constructor for a dummy search. The only difference between a dummy search</span>
<a name="l00873"></a>00873   <span class="comment">// and a regular one is that the search depth and left search depth is</span>
<a name="l00874"></a>00874   <span class="comment">// initialized to -1 instead of zero.</span>
<a name="l00875"></a><a class="code" href="classoperations__research_1_1Search.html#38954ec4d83e963a0766f4d22f30009c">00875</a>   <a class="code" href="classoperations__research_1_1Search.html" title="Search class.">Search</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s, <span class="keywordtype">int</span> <span class="comment">/* dummy_argument */</span>)
<a name="l00876"></a>00876       : <a class="code" href="ac4r__table_8cc.html#bd6bfbf6753a5deb0ce273fad6408e1e">solver_</a>(s), marker_stack_(), fail_buffer_(), solution_counter_(0),
<a name="l00877"></a>00877         decision_builder_(NULL), created_by_solve_(false),
<a name="l00878"></a>00878         <a class="code" href="constraint__solver_8cc.html#9fd084fd29a29f05d55a27331bb63280">selector_</a>(NULL), search_depth_(-1), left_search_depth_(-1),
<a name="l00879"></a>00879         should_restart_(false), should_finish_(false),
<a name="l00880"></a>00880         sentinel_pushed_(0), jmpbuf_filled_(false),
<a name="l00881"></a>00881         backtrack_at_the_end_of_the_search_(true) {}
<a name="l00882"></a>00882 
<a name="l00883"></a><a class="code" href="classoperations__research_1_1Search.html#4985df1f6b3b8b888bde8ed94432fde3">00883</a>   ~<a class="code" href="classoperations__research_1_1Search.html" title="Search class.">Search</a>() {
<a name="l00884"></a>00884     STLDeleteElements(&amp;marker_stack_);
<a name="l00885"></a>00885   }
<a name="l00886"></a>00886 
<a name="l00887"></a>00887   <span class="keywordtype">void</span> EnterSearch();
<a name="l00888"></a>00888   <span class="keywordtype">void</span> RestartSearch();
<a name="l00889"></a>00889   <span class="keywordtype">void</span> ExitSearch();
<a name="l00890"></a>00890   <span class="keywordtype">void</span> BeginNextDecision(<a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* <span class="keyword">const</span> b);
<a name="l00891"></a>00891   <span class="keywordtype">void</span> EndNextDecision(<a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* <span class="keyword">const</span> b, <a class="code" href="classoperations__research_1_1Decision.html" title="A Decision represents a choice point in the search tree.">Decision</a>* <span class="keyword">const</span> d);
<a name="l00892"></a>00892   <span class="keywordtype">void</span> ApplyDecision(<a class="code" href="classoperations__research_1_1Decision.html" title="A Decision represents a choice point in the search tree.">Decision</a>* <span class="keyword">const</span> d);
<a name="l00893"></a>00893   <span class="keywordtype">void</span> AfterDecision(<a class="code" href="classoperations__research_1_1Decision.html" title="A Decision represents a choice point in the search tree.">Decision</a>* <span class="keyword">const</span> d, <span class="keywordtype">bool</span> apply);
<a name="l00894"></a>00894   <span class="keywordtype">void</span> RefuteDecision(<a class="code" href="classoperations__research_1_1Decision.html" title="A Decision represents a choice point in the search tree.">Decision</a>* <span class="keyword">const</span> d);
<a name="l00895"></a>00895   <span class="keywordtype">void</span> BeginFail();
<a name="l00896"></a>00896   <span class="keywordtype">void</span> EndFail();
<a name="l00897"></a>00897   <span class="keywordtype">void</span> BeginInitialPropagation();
<a name="l00898"></a>00898   <span class="keywordtype">void</span> EndInitialPropagation();
<a name="l00899"></a>00899   <span class="keywordtype">bool</span> AtSolution();
<a name="l00900"></a>00900   <span class="keywordtype">bool</span> AcceptSolution();
<a name="l00901"></a>00901   <span class="keywordtype">void</span> NoMoreSolutions();
<a name="l00902"></a>00902   <span class="keywordtype">bool</span> LocalOptimum();
<a name="l00903"></a>00903   <span class="keywordtype">bool</span> <a class="code" href="namespaceoperations__research.html#6994f97ca50f87770362b9b3724a2a21" title="Returns true if the search accepts the delta (actually checking this by calling AcceptDelta...">AcceptDelta</a>(<a class="code" href="classoperations__research_1_1Assignment.html" title="Assignment.">Assignment</a>* <a class="code" href="resource_8cc.html#73461c37822b6ebb75b54ba1a9ffb442">delta</a>, <a class="code" href="classoperations__research_1_1Assignment.html" title="Assignment.">Assignment</a>* deltadelta);
<a name="l00904"></a>00904   <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#277ed3fa0830998efd1f3333b6c0eae7" title="Notifies the search that a neighbor has been accepted by local search.">AcceptNeighbor</a>();
<a name="l00905"></a>00905   <span class="keywordtype">void</span> PeriodicCheck();
<a name="l00906"></a>00906   <span class="keywordtype">int</span> ProgressPercent();
<a name="l00907"></a>00907   <span class="keywordtype">void</span> Accept(<a class="code" href="classoperations__research_1_1ModelVisitor.html" title="Model visitor.">ModelVisitor</a>* <span class="keyword">const</span> visitor) <span class="keyword">const</span>;
<a name="l00908"></a>00908   <span class="keywordtype">void</span> push_monitor(<a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>* <span class="keyword">const</span> m);
<a name="l00909"></a>00909   <span class="keywordtype">void</span> Clear();
<a name="l00910"></a><a class="code" href="classoperations__research_1_1Search.html#2c42984a7ff88ebd0b51d37e43adc352">00910</a>   <span class="keywordtype">void</span> IncrementSolutionCounter() { ++solution_counter_; }
<a name="l00911"></a><a class="code" href="classoperations__research_1_1Search.html#2eb6d13dcbce28d116b399f5b7da3c10">00911</a>   int64 solution_counter()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> solution_counter_; }
<a name="l00912"></a><a class="code" href="classoperations__research_1_1Search.html#4b37a519f7faebaeb4b6be5c62757c2b">00912</a>   <span class="keywordtype">void</span> set_decision_builder(<a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* <span class="keyword">const</span> db) {
<a name="l00913"></a>00913     decision_builder_ = db;
<a name="l00914"></a>00914   }
<a name="l00915"></a><a class="code" href="classoperations__research_1_1Search.html#c63b1e9d7e458a8833d948e1f1a293d2">00915</a>   <a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* decision_builder()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> decision_builder_; }
<a name="l00916"></a><a class="code" href="classoperations__research_1_1Search.html#1fcd92000011aeb8f6dc5454bfba38a9">00916</a>   <span class="keywordtype">void</span> set_created_by_solve(<span class="keywordtype">bool</span> c) { created_by_solve_ = c; }
<a name="l00917"></a><a class="code" href="classoperations__research_1_1Search.html#79b3af967780427b6c44a8772f3567d0">00917</a>   <span class="keywordtype">bool</span> created_by_solve()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> created_by_solve_; }
<a name="l00918"></a>00918   <a class="code" href="classoperations__research_1_1Solver.html#5f87c832967334179f0f9c8d05380847" title="The Solver is responsible for creating the search tree.">Solver::DecisionModification</a> ModifyDecision();
<a name="l00919"></a>00919   <span class="keywordtype">void</span> SetBranchSelector(
<a name="l00920"></a>00920       ResultCallback1&lt;Solver::DecisionModification, Solver*&gt;* <span class="keyword">const</span> s);
<a name="l00921"></a><a class="code" href="classoperations__research_1_1Search.html#b55c57687534c2850947b41dc3171f46">00921</a>   <span class="keywordtype">void</span> LeftMove() {
<a name="l00922"></a>00922     search_depth_++;
<a name="l00923"></a>00923     left_search_depth_++;
<a name="l00924"></a>00924   }
<a name="l00925"></a><a class="code" href="classoperations__research_1_1Search.html#0da30980d5c9c977186c5efbe671b7f1">00925</a>   <span class="keywordtype">void</span> RightMove() {
<a name="l00926"></a>00926     search_depth_++;
<a name="l00927"></a>00927   }
<a name="l00928"></a><a class="code" href="classoperations__research_1_1Search.html#ca5723f007c9f88cbff66fc6b30667ff">00928</a>   <span class="keywordtype">bool</span> backtrack_at_the_end_of_the_search()<span class="keyword"> const </span>{
<a name="l00929"></a>00929     <span class="keywordflow">return</span> backtrack_at_the_end_of_the_search_;
<a name="l00930"></a>00930   }
<a name="l00931"></a><a class="code" href="classoperations__research_1_1Search.html#7c7418be9f37bc7ab177c5e10ef11bdd">00931</a>   <span class="keywordtype">void</span> set_backtrack_at_the_end_of_the_search(<span class="keywordtype">bool</span> restore) {
<a name="l00932"></a>00932     backtrack_at_the_end_of_the_search_ = restore;
<a name="l00933"></a>00933   }
<a name="l00934"></a><a class="code" href="classoperations__research_1_1Search.html#26654e9a2a907f90fa37dd5585d509e5">00934</a>   <span class="keywordtype">int</span> search_depth()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> search_depth_; }
<a name="l00935"></a><a class="code" href="classoperations__research_1_1Search.html#1ff26a6a5c4835440aaeba8bbd92c0ec">00935</a>   <span class="keywordtype">void</span> set_search_depth(<span class="keywordtype">int</span> d) { search_depth_ = d; }
<a name="l00936"></a><a class="code" href="classoperations__research_1_1Search.html#af419d2ffa1078d7b8a0260103862525">00936</a>   <span class="keywordtype">int</span> left_search_depth()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> left_search_depth_; }
<a name="l00937"></a><a class="code" href="classoperations__research_1_1Search.html#578d5df848003bfa499f3547ce30b3c1">00937</a>   <span class="keywordtype">void</span> set_search_left_depth(<span class="keywordtype">int</span> d) { left_search_depth_ = d; }
<a name="l00938"></a><a class="code" href="classoperations__research_1_1Search.html#e6f39170dfd0cc811a75d43a449e1ba9">00938</a>   <span class="keywordtype">void</span> set_should_restart(<span class="keywordtype">bool</span> s) { should_restart_ = s; }
<a name="l00939"></a><a class="code" href="classoperations__research_1_1Search.html#096a692a55fb43267be4e48b56b16a08">00939</a>   <span class="keywordtype">bool</span> should_restart()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> should_restart_; }
<a name="l00940"></a><a class="code" href="classoperations__research_1_1Search.html#c8d6976508790637ceb0522654a8e126">00940</a>   <span class="keywordtype">void</span> set_should_finish(<span class="keywordtype">bool</span> s) { should_finish_ = s; }
<a name="l00941"></a><a class="code" href="classoperations__research_1_1Search.html#cb882bb5a1c696e8f555e3be64d46c3f">00941</a>   <span class="keywordtype">bool</span> should_finish()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> should_finish_; }
<a name="l00942"></a><a class="code" href="classoperations__research_1_1Search.html#2e6691a9e4597739ede2ec697e8746ed">00942</a>   <span class="keywordtype">void</span> CheckFail() {
<a name="l00943"></a>00943     <span class="keywordflow">if</span> (should_finish_ || should_restart_) {
<a name="l00944"></a>00944       <a class="code" href="ac4r__table_8cc.html#bd6bfbf6753a5deb0ce273fad6408e1e">solver_</a>-&gt;<a class="code" href="classoperations__research_1_1Solver.html#45534161a4dda7e1997bc0effd606648" title="Abandon the current branch in the search tree. A backtrack will follow.">Fail</a>();
<a name="l00945"></a>00945     }
<a name="l00946"></a>00946   }
<a name="l00947"></a><a class="code" href="classoperations__research_1_1Search.html#16432758b314f3cedad3fba81c895417">00947</a>   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>;
<a name="l00948"></a>00948  <span class="keyword">private</span>:
<a name="l00949"></a>00949   <span class="comment">// Jumps back to the previous choice point, Checks if it was correctly set.</span>
<a name="l00950"></a>00950   <span class="keywordtype">void</span> JumpBack();
<a name="l00951"></a>00951   <span class="keywordtype">void</span> ClearBuffer() {
<a name="l00952"></a>00952     CHECK(jmpbuf_filled_) &lt;&lt; <span class="stringliteral">"Internal error in backtracking"</span>;
<a name="l00953"></a>00953     jmpbuf_filled_ = <span class="keyword">false</span>;
<a name="l00954"></a>00954   }
<a name="l00955"></a>00955 
<a name="l00956"></a>00956   <a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> <a class="code" href="ac4r__table_8cc.html#bd6bfbf6753a5deb0ce273fad6408e1e">solver_</a>;
<a name="l00957"></a>00957   std::vector&lt;StateMarker*&gt; marker_stack_;
<a name="l00958"></a>00958   std::vector&lt;SearchMonitor*&gt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>;
<a name="l00959"></a>00959   jmp_buf fail_buffer_;
<a name="l00960"></a>00960   int64 solution_counter_;
<a name="l00961"></a>00961   <a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* decision_builder_;
<a name="l00962"></a>00962   <span class="keywordtype">bool</span> created_by_solve_;
<a name="l00963"></a>00963   scoped_ptr&lt;ResultCallback1&lt;Solver::DecisionModification, Solver*&gt; &gt; <a class="code" href="constraint__solver_8cc.html#9fd084fd29a29f05d55a27331bb63280">selector_</a>;
<a name="l00964"></a>00964   <span class="keywordtype">int</span> search_depth_;
<a name="l00965"></a>00965   <span class="keywordtype">int</span> left_search_depth_;
<a name="l00966"></a>00966   <span class="keywordtype">bool</span> should_restart_;
<a name="l00967"></a>00967   <span class="keywordtype">bool</span> should_finish_;
<a name="l00968"></a>00968   <span class="keywordtype">int</span> sentinel_pushed_;
<a name="l00969"></a>00969   <span class="keywordtype">bool</span> jmpbuf_filled_;
<a name="l00970"></a>00970   <span class="keywordtype">bool</span> backtrack_at_the_end_of_the_search_;
<a name="l00971"></a>00971 };
<a name="l00972"></a>00972 
<a name="l00973"></a>00973 <span class="comment">// Backtrack is implemented using 3 primitives:</span>
<a name="l00974"></a>00974 <span class="comment">// CP_TRY to start searching</span>
<a name="l00975"></a>00975 <span class="comment">// CP_DO_FAIL to signal a failure. The program will continue on the CP_ON_FAIL</span>
<a name="l00976"></a>00976 <span class="comment">// primitive.</span>
<a name="l00977"></a>00977 <span class="comment">// CP_FAST_BACKTRACK protects an implementation of backtrack using</span>
<a name="l00978"></a>00978 <span class="comment">// setjmp/longjmp.  The clean portable way is to use exceptions,</span>
<a name="l00979"></a>00979 <span class="comment">// unfortunately, it can be much slower.  Thus we use ideas from</span>
<a name="l00980"></a>00980 <span class="comment">// Prolog, CP/CLP implementations, continuations in C and implement failing</span>
<a name="l00981"></a>00981 <span class="comment">// and backtracking using setjmp/longjmp.</span>
<a name="l00982"></a><a class="code" href="constraint__solver_8cc.html#6fefff344468722cbdd7e1776ea5c806">00982</a> <span class="preprocessor">#define CP_FAST_BACKTRACK</span>
<a name="l00983"></a>00983 <span class="preprocessor"></span><span class="preprocessor">#if defined(CP_FAST_BACKTRACK)</span>
<a name="l00984"></a>00984 <span class="preprocessor"></span><span class="comment">// We cannot use a method/function for this as we would lose the</span>
<a name="l00985"></a>00985 <span class="comment">// context in the setjmp implementation.</span>
<a name="l00986"></a><a class="code" href="constraint__solver_8cc.html#458c844702d69839c667500d86ae49c8">00986</a> <span class="preprocessor">#define CP_TRY(search)                                              \</span>
<a name="l00987"></a>00987 <span class="preprocessor">  CHECK(!search-&gt;jmpbuf_filled_) &lt;&lt; "Fail() called outside search"; \</span>
<a name="l00988"></a>00988 <span class="preprocessor">  search-&gt;jmpbuf_filled_ = true;                                    \</span>
<a name="l00989"></a>00989 <span class="preprocessor">  if (setjmp(search-&gt;fail_buffer_) == 0)</span>
<a name="l00990"></a><a class="code" href="constraint__solver_8cc.html#40910cf9a9eb89daac6c929006a03416">00990</a> <span class="preprocessor"></span><span class="preprocessor">#define CP_ON_FAIL else</span>
<a name="l00991"></a><a class="code" href="constraint__solver_8cc.html#61301f951c309e0078fcaa570fa0e262">00991</a> <span class="preprocessor"></span><span class="preprocessor">#define CP_DO_FAIL(search) longjmp(search-&gt;fail_buffer_, 1)</span>
<a name="l00992"></a>00992 <span class="preprocessor"></span><span class="preprocessor">#else  // CP_FAST_BACKTRACK</span>
<a name="l00993"></a>00993 <span class="preprocessor"></span><span class="keyword">class </span>FailException {};
<a name="l00994"></a>00994 <span class="preprocessor">#define CP_TRY(search)                                                 \</span>
<a name="l00995"></a>00995 <span class="preprocessor">  CHECK(!search-&gt;jmpbuf_filled_) &lt;&lt; "Fail() called outside search";    \</span>
<a name="l00996"></a>00996 <span class="preprocessor">  search-&gt;jmpbuf_filled_ = true;                                       \</span>
<a name="l00997"></a>00997 <span class="preprocessor">  try</span>
<a name="l00998"></a>00998 <span class="preprocessor"></span><span class="preprocessor">#define CP_ON_FAIL catch(FailException&amp;)</span>
<a name="l00999"></a>00999 <span class="preprocessor"></span><span class="preprocessor">#define CP_DO_FAIL(search) throw FailException()</span>
<a name="l01000"></a>01000 <span class="preprocessor"></span><span class="preprocessor">#endif  // CP_FAST_BACKTRACK</span>
<a name="l01001"></a>01001 <span class="preprocessor"></span>
<a name="l01002"></a>01002 <span class="keywordtype">void</span> Search::JumpBack() {
<a name="l01003"></a>01003   <span class="keywordflow">if</span> (jmpbuf_filled_) {
<a name="l01004"></a>01004     jmpbuf_filled_ = <span class="keyword">false</span>;
<a name="l01005"></a>01005     <a class="code" href="constraint__solver_8cc.html#61301f951c309e0078fcaa570fa0e262" title="CP_FAST_BACKTRACK.">CP_DO_FAIL</a>(<span class="keyword">this</span>);
<a name="l01006"></a>01006   } <span class="keywordflow">else</span> {
<a name="l01007"></a>01007     <span class="keywordtype">string</span> explanation = <span class="stringliteral">"Failure outside of search"</span>;
<a name="l01008"></a>01008     <a class="code" href="ac4r__table_8cc.html#bd6bfbf6753a5deb0ce273fad6408e1e">solver_</a>-&gt;AddConstraint(<a class="code" href="ac4r__table_8cc.html#bd6bfbf6753a5deb0ce273fad6408e1e">solver_</a>-&gt;MakeFalseConstraint(explanation));
<a name="l01009"></a>01009   }
<a name="l01010"></a>01010 }
<a name="l01011"></a>01011 
<a name="l01012"></a>01012 Search* Solver::ActiveSearch()<span class="keyword"> const </span>{
<a name="l01013"></a>01013   <span class="keywordflow">return</span> searches_.back();
<a name="l01014"></a>01014 }
<a name="l01015"></a>01015 
<a name="l01016"></a>01016 <span class="keyword">namespace </span>{
<a name="l01017"></a>01017 <span class="keyword">class </span>UndoBranchSelector : <span class="keyword">public</span> Action {
<a name="l01018"></a>01018  <span class="keyword">public</span>:
<a name="l01019"></a>01019   <span class="keyword">explicit</span> UndoBranchSelector(<span class="keywordtype">int</span> depth) : <a class="code" href="constraint__solver_8cc.html#d44441440d13feeced3a5592d8853ce8">depth_</a>(depth) {}
<a name="l01020"></a>01020   <span class="keyword">virtual</span> ~UndoBranchSelector() {}
<a name="l01021"></a><a class="code" href="classoperations__research_1_1Solver.html#765c2fb7dcc5830caac346839066d2a2">01021</a>   <span class="keyword">virtual</span> <span class="keywordtype">void</span> Run(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s) {
<a name="l01022"></a>01022     <span class="keywordflow">if</span> (s-&gt;<a class="code" href="classoperations__research_1_1Solver.html#0f605fdb1307a1ac4931e6a181c9e154" title="Gets the number of nested searches.">SolveDepth</a>() == <a class="code" href="constraint__solver_8cc.html#d44441440d13feeced3a5592d8853ce8">depth_</a>) {
<a name="l01023"></a>01023       s-&gt;<a class="code" href="classoperations__research_1_1Solver.html#765c2fb7dcc5830caac346839066d2a2" title="Returns the active search, NULL outside search.">ActiveSearch</a>()-&gt;<a class="code" href="classoperations__research_1_1Search.html#cc7c99d8cdb8c6ab2b6c3ba6ab04df1e" title="namespace">SetBranchSelector</a>(NULL);
<a name="l01024"></a>01024     }
<a name="l01025"></a>01025   }
<a name="l01026"></a>01026   <span class="keyword">virtual</span> <span class="keywordtype">string</span> DebugString()<span class="keyword"> const </span>{
<a name="l01027"></a>01027     <span class="keywordflow">return</span> StringPrintf(<span class="stringliteral">"UndoBranchSelector(%i)"</span>, <a class="code" href="constraint__solver_8cc.html#d44441440d13feeced3a5592d8853ce8">depth_</a>);
<a name="l01028"></a>01028   }
<a name="l01029"></a>01029  <span class="keyword">private</span>:
<a name="l01030"></a>01030   <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="constraint__solver_8cc.html#d44441440d13feeced3a5592d8853ce8">depth_</a>;
<a name="l01031"></a>01031 };
<a name="l01032"></a>01032 
<a name="l01033"></a>01033 <span class="keyword">class </span>ApplyBranchSelector : <span class="keyword">public</span> DecisionBuilder {
<a name="l01034"></a>01034  <span class="keyword">public</span>:
<a name="l01035"></a>01035   <span class="keyword">explicit</span> ApplyBranchSelector(
<a name="l01036"></a>01036       ResultCallback1&lt;Solver::DecisionModification, Solver*&gt;* <span class="keyword">const</span> bs)
<a name="l01037"></a>01037       : <a class="code" href="constraint__solver_8cc.html#9fd084fd29a29f05d55a27331bb63280">selector_</a>(bs) {}
<a name="l01038"></a>01038   <span class="keyword">virtual</span> ~ApplyBranchSelector() {}
<a name="l01039"></a><a class="code" href="constraint__solver_8cc.html#d44441440d13feeced3a5592d8853ce8">01039</a> 
<a name="l01040"></a>01040   <span class="keyword">virtual</span> Decision* Next(Solver* <span class="keyword">const</span> s) {
<a name="l01041"></a>01041     s-&gt;SetBranchSelector(<a class="code" href="constraint__solver_8cc.html#9fd084fd29a29f05d55a27331bb63280">selector_</a>);
<a name="l01042"></a>01042     <span class="keywordflow">return</span> NULL;
<a name="l01043"></a>01043   }
<a name="l01044"></a>01044 
<a name="l01045"></a>01045   <span class="keyword">virtual</span> <span class="keywordtype">string</span> DebugString()<span class="keyword"> const </span>{
<a name="l01046"></a>01046     <span class="keywordflow">return</span> <span class="stringliteral">"Apply(BranchSelector)"</span>;
<a name="l01047"></a>01047   }
<a name="l01048"></a>01048  <span class="keyword">private</span>:
<a name="l01049"></a>01049   ResultCallback1&lt;Solver::DecisionModification, Solver*&gt;* <span class="keyword">const</span> <a class="code" href="constraint__solver_8cc.html#9fd084fd29a29f05d55a27331bb63280">selector_</a>;
<a name="l01050"></a>01050 };
<a name="l01051"></a>01051 }  <span class="comment">// namespace</span>
<a name="l01052"></a>01052 
<a name="l01053"></a>01053 <span class="keywordtype">void</span> Search::SetBranchSelector(
<a name="l01054"></a>01054     ResultCallback1&lt;Solver::DecisionModification, Solver*&gt;* <span class="keyword">const</span> bs) {
<a name="l01055"></a>01055   CHECK(bs == <a class="code" href="constraint__solver_8cc.html#9fd084fd29a29f05d55a27331bb63280">selector_</a> || <a class="code" href="constraint__solver_8cc.html#9fd084fd29a29f05d55a27331bb63280">selector_</a> == NULL || bs == NULL);
<a name="l01056"></a>01056   <span class="keywordflow">if</span> (<a class="code" href="constraint__solver_8cc.html#9fd084fd29a29f05d55a27331bb63280">selector_</a> != bs) {
<a name="l01057"></a>01057     <a class="code" href="constraint__solver_8cc.html#9fd084fd29a29f05d55a27331bb63280">selector_</a>.reset(bs);
<a name="l01058"></a><a class="code" href="constraint__solver_8cc.html#9fd084fd29a29f05d55a27331bb63280">01058</a>   }
<a name="l01059"></a>01059 }
<a name="l01060"></a>01060 
<a name="l01061"></a>01061 <span class="keywordtype">void</span> Solver::SetBranchSelector(
<a name="l01062"></a><a class="code" href="classoperations__research_1_1Search.html#cc7c99d8cdb8c6ab2b6c3ba6ab04df1e">01062</a>     ResultCallback1&lt;Solver::DecisionModification, Solver*&gt;* <span class="keyword">const</span> bs) {
<a name="l01063"></a>01063   bs-&gt;CheckIsRepeatable();
<a name="l01064"></a>01064   <span class="comment">// We cannot use the trail as the search can be nested and thus</span>
<a name="l01065"></a>01065   <span class="comment">// deleted upon backtrack. Thus we guard the undo action by a</span>
<a name="l01066"></a>01066   <span class="comment">// check on the number of nesting of solve().</span>
<a name="l01067"></a>01067   AddBacktrackAction(RevAlloc(<span class="keyword">new</span> UndoBranchSelector(SolveDepth())),
<a name="l01068"></a>01068                      <span class="keyword">false</span>);
<a name="l01069"></a>01069   searches_.back()-&gt;SetBranchSelector(bs);
<a name="l01070"></a><a class="code" href="classoperations__research_1_1Solver.html#b41a0969e90e13da5e75476eef9d705e">01070</a> }
<a name="l01071"></a>01071 
<a name="l01072"></a>01072 <a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* <a class="code" href="classoperations__research_1_1Solver.html#5801021363a9d2e8ca295ea388292876" title="Creates a decision builder that will set the branch selector.">Solver::MakeApplyBranchSelector</a>(
<a name="l01073"></a>01073     ResultCallback1&lt;Solver::DecisionModification, Solver*&gt;* <span class="keyword">const</span> bs) {
<a name="l01074"></a>01074   <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1Solver.html#c668195dafc8397ada82227f605b0ed4" title="Registers the given object as being reversible.">RevAlloc</a>(<span class="keyword">new</span> ApplyBranchSelector(bs));
<a name="l01075"></a>01075 }
<a name="l01076"></a>01076 
<a name="l01077"></a>01077 <span class="keywordtype">int</span> <a class="code" href="classoperations__research_1_1Solver.html#0f605fdb1307a1ac4931e6a181c9e154" title="Gets the number of nested searches.">Solver::SolveDepth</a>()<span class="keyword"> const </span>{
<a name="l01078"></a>01078   <span class="keywordflow">return</span> state_ == <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95c05654b6a7479316478744b3ce4a50df" title="Before search, after search.">OUTSIDE_SEARCH</a> ? 0 : searches_.size() - 1;
<a name="l01079"></a>01079 }
<a name="l01080"></a>01080 
<a name="l01081"></a><a class="code" href="classoperations__research_1_1Solver.html#5801021363a9d2e8ca295ea388292876">01081</a> <span class="keywordtype">int</span> <a class="code" href="classoperations__research_1_1Solver.html#14dc7b55e3664d49fc59a90044bf6fdc" title="Gets the search depth of the current active search.">Solver::SearchDepth</a>()<span class="keyword"> const </span>{
<a name="l01082"></a>01082   <span class="keywordflow">return</span> searches_.back()-&gt;search_depth();
<a name="l01083"></a>01083 }
<a name="l01084"></a>01084 
<a name="l01085"></a>01085 <span class="keywordtype">int</span> <a class="code" href="classoperations__research_1_1Solver.html#28506c5cdd51070a0bd38534dbc40c51" title="Gets the search left depth of the current active search.">Solver::SearchLeftDepth</a>()<span class="keyword"> const </span>{
<a name="l01086"></a><a class="code" href="classoperations__research_1_1Solver.html#0f605fdb1307a1ac4931e6a181c9e154">01086</a>   <span class="keywordflow">return</span> searches_.back()-&gt;left_search_depth();
<a name="l01087"></a>01087 }
<a name="l01088"></a>01088 
<a name="l01089"></a>01089 <a class="code" href="classoperations__research_1_1Solver.html#5f87c832967334179f0f9c8d05380847" title="The Solver is responsible for creating the search tree.">Solver::DecisionModification</a> <a class="code" href="classoperations__research_1_1Search.html#afd69327361f5242cc981094f5064900">Search::ModifyDecision</a>() {
<a name="l01090"></a><a class="code" href="classoperations__research_1_1Solver.html#14dc7b55e3664d49fc59a90044bf6fdc">01090</a>   <span class="keywordflow">if</span> (<a class="code" href="constraint__solver_8cc.html#9fd084fd29a29f05d55a27331bb63280">selector_</a> != NULL) {
<a name="l01091"></a>01091     <span class="keywordflow">return</span> <a class="code" href="constraint__solver_8cc.html#9fd084fd29a29f05d55a27331bb63280">selector_</a>-&gt;Run(<a class="code" href="ac4r__table_8cc.html#bd6bfbf6753a5deb0ce273fad6408e1e">solver_</a>);
<a name="l01092"></a>01092   }
<a name="l01093"></a>01093   <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1Solver.html#5f87c832967334179f0f9c8d05380847a8dfadb94521ac7979525ae94f618d57" title="Keeps the default behavior, i.e.">Solver::NO_CHANGE</a>;
<a name="l01094"></a><a class="code" href="classoperations__research_1_1Solver.html#28506c5cdd51070a0bd38534dbc40c51">01094</a> }
<a name="l01095"></a>01095 
<a name="l01096"></a>01096 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Search.html#b75f27d7740f8a0d5428878f589c0b49">Search::push_monitor</a>(<a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>* <span class="keyword">const</span> m) {
<a name="l01097"></a>01097   <span class="keywordflow">if</span> (m) {
<a name="l01098"></a><a class="code" href="classoperations__research_1_1Search.html#afd69327361f5242cc981094f5064900">01098</a>     <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.push_back(m);
<a name="l01099"></a>01099   }
<a name="l01100"></a>01100 }
<a name="l01101"></a>01101 
<a name="l01102"></a>01102 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Search.html#7768604c0fbc85bc05b12d8d0da745b0">Search::Clear</a>() {
<a name="l01103"></a>01103   monitors_.clear();
<a name="l01104"></a>01104   search_depth_ = 0;
<a name="l01105"></a><a class="code" href="classoperations__research_1_1Search.html#b75f27d7740f8a0d5428878f589c0b49">01105</a>   left_search_depth_ = 0;
<a name="l01106"></a>01106   selector_.reset(NULL);
<a name="l01107"></a>01107   backtrack_at_the_end_of_the_search_ = <span class="keyword">true</span>;
<a name="l01108"></a>01108 }
<a name="l01109"></a>01109 
<a name="l01110"></a>01110 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Search.html#b3a81afa65291b9bdd3f3a168ce55aa4">Search::EnterSearch</a>() {
<a name="l01111"></a><a class="code" href="classoperations__research_1_1Search.html#7768604c0fbc85bc05b12d8d0da745b0">01111</a>   <span class="comment">// The solution counter is reset when entering search and not when</span>
<a name="l01112"></a>01112   <span class="comment">// leaving search. This enables the information to persist outside of</span>
<a name="l01113"></a>01113   <span class="comment">// top-level search.</span>
<a name="l01114"></a>01114   solution_counter_ = 0;
<a name="l01115"></a>01115 
<a name="l01116"></a>01116   <span class="keywordflow">for</span> (std::vector&lt;SearchMonitor*&gt;::iterator it = monitors_.begin();
<a name="l01117"></a>01117        it != monitors_.end();
<a name="l01118"></a>01118        ++it) {
<a name="l01119"></a><a class="code" href="classoperations__research_1_1Search.html#b3a81afa65291b9bdd3f3a168ce55aa4">01119</a>     (*it)-&gt;EnterSearch();
<a name="l01120"></a>01120   }
<a name="l01121"></a>01121 }
<a name="l01122"></a>01122 
<a name="l01123"></a>01123 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Search.html#b6c851370a6efe0318b8d4b9c71a85ed">Search::ExitSearch</a>() {
<a name="l01124"></a>01124   <span class="comment">// Backtrack to the correct state.</span>
<a name="l01125"></a>01125 
<a name="l01126"></a>01126   <span class="keywordflow">for</span> (std::vector&lt;SearchMonitor*&gt;::iterator it = monitors_.begin();
<a name="l01127"></a>01127        it != monitors_.end();
<a name="l01128"></a>01128        ++it) {
<a name="l01129"></a>01129     (*it)-&gt;ExitSearch();
<a name="l01130"></a>01130   }
<a name="l01131"></a>01131 }
<a name="l01132"></a><a class="code" href="classoperations__research_1_1Search.html#b6c851370a6efe0318b8d4b9c71a85ed">01132</a> 
<a name="l01133"></a>01133 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Search.html#c6366ad1cb26f567fe888ff8cc254a63">Search::RestartSearch</a>() {
<a name="l01134"></a>01134   <span class="keywordflow">for</span> (std::vector&lt;SearchMonitor*&gt;::iterator it = monitors_.begin();
<a name="l01135"></a>01135        it != monitors_.end();
<a name="l01136"></a>01136        ++it) {
<a name="l01137"></a>01137     (*it)-&gt;RestartSearch();
<a name="l01138"></a>01138   }
<a name="l01139"></a>01139 }
<a name="l01140"></a>01140 
<a name="l01141"></a>01141 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Search.html#ea34d6d09da7f3d264f84d5502414da0">Search::BeginNextDecision</a>(<a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* <span class="keyword">const</span> db) {
<a name="l01142"></a><a class="code" href="classoperations__research_1_1Search.html#c6366ad1cb26f567fe888ff8cc254a63">01142</a>   <span class="keywordflow">for</span> (std::vector&lt;SearchMonitor*&gt;::iterator it = monitors_.begin();
<a name="l01143"></a>01143        it != monitors_.end();
<a name="l01144"></a>01144        ++it) {
<a name="l01145"></a>01145     (*it)-&gt;BeginNextDecision(db);
<a name="l01146"></a>01146   }
<a name="l01147"></a>01147   <a class="code" href="classoperations__research_1_1Search.html#2e6691a9e4597739ede2ec697e8746ed">CheckFail</a>();
<a name="l01148"></a>01148 }
<a name="l01149"></a>01149 
<a name="l01150"></a><a class="code" href="classoperations__research_1_1Search.html#ea34d6d09da7f3d264f84d5502414da0">01150</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Search.html#fb04411efa806e4d8da60b47750357a3">Search::EndNextDecision</a>(<a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* <span class="keyword">const</span> db, <a class="code" href="classoperations__research_1_1Decision.html" title="A Decision represents a choice point in the search tree.">Decision</a>* <span class="keyword">const</span> d) {
<a name="l01151"></a>01151   <span class="keywordflow">for</span> (std::vector&lt;SearchMonitor*&gt;::iterator it = monitors_.begin();
<a name="l01152"></a>01152        it != monitors_.end();
<a name="l01153"></a>01153        ++it) {
<a name="l01154"></a>01154     (*it)-&gt;EndNextDecision(db, d);
<a name="l01155"></a>01155   }
<a name="l01156"></a>01156   <a class="code" href="classoperations__research_1_1Search.html#2e6691a9e4597739ede2ec697e8746ed">CheckFail</a>();
<a name="l01157"></a>01157 }
<a name="l01158"></a>01158 
<a name="l01159"></a><a class="code" href="classoperations__research_1_1Search.html#fb04411efa806e4d8da60b47750357a3">01159</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Search.html#fb4b1e39a8f2bfdabb87b445fef0a1ca">Search::ApplyDecision</a>(<a class="code" href="classoperations__research_1_1Decision.html" title="A Decision represents a choice point in the search tree.">Decision</a>* <span class="keyword">const</span> d) {
<a name="l01160"></a>01160   <span class="keywordflow">for</span> (std::vector&lt;SearchMonitor*&gt;::iterator it = monitors_.begin();
<a name="l01161"></a>01161        it != monitors_.end();
<a name="l01162"></a>01162        ++it) {
<a name="l01163"></a>01163     (*it)-&gt;ApplyDecision(d);
<a name="l01164"></a>01164   }
<a name="l01165"></a>01165   <a class="code" href="classoperations__research_1_1Search.html#2e6691a9e4597739ede2ec697e8746ed">CheckFail</a>();
<a name="l01166"></a>01166 }
<a name="l01167"></a>01167 
<a name="l01168"></a><a class="code" href="classoperations__research_1_1Search.html#fb4b1e39a8f2bfdabb87b445fef0a1ca">01168</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Search.html#86094dde74cc625735aa2f87daee7ed0">Search::AfterDecision</a>(<a class="code" href="classoperations__research_1_1Decision.html" title="A Decision represents a choice point in the search tree.">Decision</a>* <span class="keyword">const</span> d, <span class="keywordtype">bool</span> apply) {
<a name="l01169"></a>01169   <span class="keywordflow">for</span> (std::vector&lt;SearchMonitor*&gt;::iterator it = monitors_.begin();
<a name="l01170"></a>01170        it != monitors_.end();
<a name="l01171"></a>01171        ++it) {
<a name="l01172"></a>01172     (*it)-&gt;AfterDecision(d, apply);
<a name="l01173"></a>01173   }
<a name="l01174"></a>01174   <a class="code" href="classoperations__research_1_1Search.html#2e6691a9e4597739ede2ec697e8746ed">CheckFail</a>();
<a name="l01175"></a>01175 }
<a name="l01176"></a>01176 
<a name="l01177"></a><a class="code" href="classoperations__research_1_1Search.html#86094dde74cc625735aa2f87daee7ed0">01177</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Search.html#fdaa6f24db0d9192cee6e02d14084262">Search::RefuteDecision</a>(<a class="code" href="classoperations__research_1_1Decision.html" title="A Decision represents a choice point in the search tree.">Decision</a>* <span class="keyword">const</span> d) {
<a name="l01178"></a>01178   <span class="keywordflow">for</span> (std::vector&lt;SearchMonitor*&gt;::iterator it = monitors_.begin();
<a name="l01179"></a>01179        it != monitors_.end();
<a name="l01180"></a>01180        ++it) {
<a name="l01181"></a>01181     (*it)-&gt;RefuteDecision(d);
<a name="l01182"></a>01182   }
<a name="l01183"></a>01183   <a class="code" href="classoperations__research_1_1Search.html#2e6691a9e4597739ede2ec697e8746ed">CheckFail</a>();
<a name="l01184"></a>01184 }
<a name="l01185"></a>01185 
<a name="l01186"></a><a class="code" href="classoperations__research_1_1Search.html#fdaa6f24db0d9192cee6e02d14084262">01186</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Search.html#2727bfb415bf86bcc2b07dbad57c1142">Search::BeginFail</a>() {
<a name="l01187"></a>01187   <span class="keywordflow">for</span> (std::vector&lt;SearchMonitor*&gt;::iterator it = monitors_.begin();
<a name="l01188"></a>01188        it != monitors_.end();
<a name="l01189"></a>01189        ++it) {
<a name="l01190"></a>01190     (*it)-&gt;BeginFail();
<a name="l01191"></a>01191   }
<a name="l01192"></a>01192 }
<a name="l01193"></a>01193 
<a name="l01194"></a>01194 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Search.html#eb0a7901d42bd0cb246f26e118ee8454">Search::EndFail</a>() {
<a name="l01195"></a><a class="code" href="classoperations__research_1_1Search.html#2727bfb415bf86bcc2b07dbad57c1142">01195</a>   <span class="keywordflow">for</span> (std::vector&lt;SearchMonitor*&gt;::iterator it = monitors_.begin();
<a name="l01196"></a>01196        it != monitors_.end();
<a name="l01197"></a>01197        ++it) {
<a name="l01198"></a>01198     (*it)-&gt;EndFail();
<a name="l01199"></a>01199   }
<a name="l01200"></a>01200 }
<a name="l01201"></a>01201 
<a name="l01202"></a>01202 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Search.html#a6ccaf4a499ea8a40495f2e608e9d553">Search::BeginInitialPropagation</a>() {
<a name="l01203"></a><a class="code" href="classoperations__research_1_1Search.html#eb0a7901d42bd0cb246f26e118ee8454">01203</a>   <span class="keywordflow">for</span> (std::vector&lt;SearchMonitor*&gt;::iterator it = monitors_.begin();
<a name="l01204"></a>01204        it != monitors_.end();
<a name="l01205"></a>01205        ++it) {
<a name="l01206"></a>01206     (*it)-&gt;BeginInitialPropagation();
<a name="l01207"></a>01207   }
<a name="l01208"></a>01208 }
<a name="l01209"></a>01209 
<a name="l01210"></a>01210 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Search.html#8080b25049761226f4d6c4f7e00e0709">Search::EndInitialPropagation</a>() {
<a name="l01211"></a><a class="code" href="classoperations__research_1_1Search.html#a6ccaf4a499ea8a40495f2e608e9d553">01211</a>   <span class="keywordflow">for</span> (std::vector&lt;SearchMonitor*&gt;::iterator it = monitors_.begin();
<a name="l01212"></a>01212        it != monitors_.end();
<a name="l01213"></a>01213        ++it) {
<a name="l01214"></a>01214     (*it)-&gt;EndInitialPropagation();
<a name="l01215"></a>01215   }
<a name="l01216"></a>01216 }
<a name="l01217"></a>01217 
<a name="l01218"></a>01218 <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1Search.html#bf4066e10d0f2e2bb8452e9c5ebedf8b">Search::AcceptSolution</a>() {
<a name="l01219"></a><a class="code" href="classoperations__research_1_1Search.html#8080b25049761226f4d6c4f7e00e0709">01219</a>   <span class="keywordtype">bool</span> valid = <span class="keyword">true</span>;
<a name="l01220"></a>01220   <span class="keywordflow">for</span> (std::vector&lt;SearchMonitor*&gt;::iterator it = monitors_.begin();
<a name="l01221"></a>01221        it != monitors_.end();
<a name="l01222"></a>01222        ++it) {
<a name="l01223"></a>01223     <span class="keywordflow">if</span> (!(*it)-&gt;AcceptSolution()) {
<a name="l01224"></a>01224       <span class="comment">// Even though we know the return value, we cannot return yet: this would</span>
<a name="l01225"></a>01225       <span class="comment">// break the contract we have with solution monitors. They all deserve</span>
<a name="l01226"></a>01226       <span class="comment">// a chance to look at the solution.</span>
<a name="l01227"></a><a class="code" href="classoperations__research_1_1Search.html#bf4066e10d0f2e2bb8452e9c5ebedf8b">01227</a>       valid = <span class="keyword">false</span>;
<a name="l01228"></a>01228     }
<a name="l01229"></a>01229   }
<a name="l01230"></a>01230   <span class="keywordflow">return</span> valid;
<a name="l01231"></a>01231 }
<a name="l01232"></a>01232 
<a name="l01233"></a>01233 <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1Search.html#1223d31a66d8516f2dbcc7088ab2dd0e">Search::AtSolution</a>() {
<a name="l01234"></a>01234   <span class="keywordtype">bool</span> should_continue = <span class="keyword">false</span>;
<a name="l01235"></a>01235   <span class="keywordflow">for</span> (std::vector&lt;SearchMonitor*&gt;::iterator it = monitors_.begin();
<a name="l01236"></a>01236        it != monitors_.end();
<a name="l01237"></a>01237        ++it) {
<a name="l01238"></a>01238     <span class="keywordflow">if</span> ((*it)-&gt;AtSolution()) {
<a name="l01239"></a>01239       <span class="comment">// Even though we know the return value, we cannot return yet: this would</span>
<a name="l01240"></a>01240       <span class="comment">// break the contract we have with solution monitors. They all deserve</span>
<a name="l01241"></a>01241       <span class="comment">// a chance to look at the solution.</span>
<a name="l01242"></a><a class="code" href="classoperations__research_1_1Search.html#1223d31a66d8516f2dbcc7088ab2dd0e">01242</a>       should_continue = <span class="keyword">true</span>;
<a name="l01243"></a>01243     }
<a name="l01244"></a>01244   }
<a name="l01245"></a>01245   <span class="keywordflow">return</span> should_continue;
<a name="l01246"></a>01246 }
<a name="l01247"></a>01247 
<a name="l01248"></a>01248 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Search.html#c3d7a10701d0f27c98c96d1888ac9bbc">Search::NoMoreSolutions</a>() {
<a name="l01249"></a>01249   <span class="keywordflow">for</span> (std::vector&lt;SearchMonitor*&gt;::iterator it = monitors_.begin();
<a name="l01250"></a>01250        it != monitors_.end();
<a name="l01251"></a>01251        ++it) {
<a name="l01252"></a>01252     (*it)-&gt;NoMoreSolutions();
<a name="l01253"></a>01253   }
<a name="l01254"></a>01254 }
<a name="l01255"></a>01255 
<a name="l01256"></a>01256 <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1Search.html#346508b5222d06d807af16c188bb30e5">Search::LocalOptimum</a>() {
<a name="l01257"></a><a class="code" href="classoperations__research_1_1Search.html#c3d7a10701d0f27c98c96d1888ac9bbc">01257</a>   <span class="keywordtype">bool</span> res = <span class="keyword">false</span>;
<a name="l01258"></a>01258   <span class="keywordflow">for</span> (std::vector&lt;SearchMonitor*&gt;::iterator it = monitors_.begin();
<a name="l01259"></a>01259        it != monitors_.end();
<a name="l01260"></a>01260        ++it) {
<a name="l01261"></a>01261     <span class="keywordflow">if</span> ((*it)-&gt;LocalOptimum()) {
<a name="l01262"></a>01262       res = <span class="keyword">true</span>;
<a name="l01263"></a>01263     }
<a name="l01264"></a>01264   }
<a name="l01265"></a><a class="code" href="classoperations__research_1_1Search.html#346508b5222d06d807af16c188bb30e5">01265</a>   <span class="keywordflow">return</span> res;
<a name="l01266"></a>01266 }
<a name="l01267"></a>01267 
<a name="l01268"></a>01268 <span class="keywordtype">bool</span> <a class="code" href="namespaceoperations__research.html#6994f97ca50f87770362b9b3724a2a21" title="Returns true if the search accepts the delta (actually checking this by calling AcceptDelta...">Search::AcceptDelta</a>(<a class="code" href="classoperations__research_1_1Assignment.html" title="Assignment.">Assignment</a>* <a class="code" href="resource_8cc.html#73461c37822b6ebb75b54ba1a9ffb442">delta</a>, <a class="code" href="classoperations__research_1_1Assignment.html" title="Assignment.">Assignment</a>* deltadelta) {
<a name="l01269"></a>01269   <span class="keywordtype">bool</span> accept = <span class="keyword">true</span>;
<a name="l01270"></a>01270   <span class="keywordflow">for</span> (std::vector&lt;SearchMonitor*&gt;::iterator it = monitors_.begin();
<a name="l01271"></a>01271        it != monitors_.end();
<a name="l01272"></a>01272        ++it) {
<a name="l01273"></a>01273     <span class="keywordflow">if</span> (!(*it)-&gt;AcceptDelta(delta, deltadelta)) {
<a name="l01274"></a>01274       accept = <span class="keyword">false</span>;
<a name="l01275"></a>01275     }
<a name="l01276"></a>01276   }
<a name="l01277"></a><a class="code" href="classoperations__research_1_1Search.html#44a0b488d0c0df43d6bea1606a30f85d">01277</a>   <span class="keywordflow">return</span> accept;
<a name="l01278"></a>01278 }
<a name="l01279"></a>01279 
<a name="l01280"></a>01280 <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#277ed3fa0830998efd1f3333b6c0eae7" title="Notifies the search that a neighbor has been accepted by local search.">Search::AcceptNeighbor</a>() {
<a name="l01281"></a>01281   <span class="keywordflow">for</span> (std::vector&lt;SearchMonitor*&gt;::iterator it = monitors_.begin();
<a name="l01282"></a>01282        it != monitors_.end();
<a name="l01283"></a>01283        ++it) {
<a name="l01284"></a>01284     (*it)-&gt;AcceptNeighbor();
<a name="l01285"></a>01285   }
<a name="l01286"></a>01286 }
<a name="l01287"></a>01287 
<a name="l01288"></a>01288 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Search.html#9723908316a806be6eca0eae11379680">Search::PeriodicCheck</a>() {
<a name="l01289"></a><a class="code" href="classoperations__research_1_1Search.html#44b05979e5f6c941cf9c06e387fd28a4">01289</a>   <span class="keywordflow">for</span> (std::vector&lt;SearchMonitor*&gt;::iterator it = monitors_.begin();
<a name="l01290"></a>01290        it != monitors_.end();
<a name="l01291"></a>01291        ++it) {
<a name="l01292"></a>01292     (*it)-&gt;PeriodicCheck();
<a name="l01293"></a>01293   }
<a name="l01294"></a>01294 }
<a name="l01295"></a>01295 
<a name="l01296"></a>01296 <span class="keywordtype">int</span> <a class="code" href="classoperations__research_1_1Search.html#f11e31ed888766fac0ee5e11fd258d21">Search::ProgressPercent</a>() {
<a name="l01297"></a><a class="code" href="classoperations__research_1_1Search.html#9723908316a806be6eca0eae11379680">01297</a>   <span class="keywordtype">int</span> progress = <a class="code" href="classoperations__research_1_1SearchMonitor.html#a95b9df4d6eb3b0fabd01d9fee33d25d">SearchMonitor::kNoProgress</a>;
<a name="l01298"></a>01298   <span class="keywordflow">for</span> (std::vector&lt;SearchMonitor*&gt;::iterator it = monitors_.begin();
<a name="l01299"></a>01299        it != monitors_.end();
<a name="l01300"></a>01300        ++it) {
<a name="l01301"></a>01301     progress = <a class="code" href="alldiff__cst_8cc.html#9d0c202d5fdd62f4fa2c613339ff168a">std::max</a>(progress, (*it)-&gt;ProgressPercent());
<a name="l01302"></a>01302   }
<a name="l01303"></a>01303   <span class="keywordflow">return</span> progress;
<a name="l01304"></a>01304 }
<a name="l01305"></a><a class="code" href="classoperations__research_1_1Search.html#f11e31ed888766fac0ee5e11fd258d21">01305</a> 
<a name="l01306"></a>01306 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Search.html#843d04e8d884a1cbfeec5cce85c619dd">Search::Accept</a>(<a class="code" href="classoperations__research_1_1ModelVisitor.html" title="Model visitor.">ModelVisitor</a>* <span class="keyword">const</span> visitor)<span class="keyword"> const </span>{
<a name="l01307"></a>01307   <span class="keywordflow">for</span> (std::vector&lt;SearchMonitor*&gt;::const_iterator it = monitors_.begin();
<a name="l01308"></a>01308        it != monitors_.end();
<a name="l01309"></a>01309        ++it) {
<a name="l01310"></a>01310     DCHECK((*it) != NULL);
<a name="l01311"></a>01311     (*it)-&gt;Accept(visitor);
<a name="l01312"></a>01312   }
<a name="l01313"></a>01313   <span class="keywordflow">if</span> (decision_builder_ != NULL) {
<a name="l01314"></a>01314     decision_builder_-&gt;<a class="code" href="classoperations__research_1_1DecisionBuilder.html#e7ca51f2177acc62d1a863694278ba20">Accept</a>(visitor);
<a name="l01315"></a><a class="code" href="classoperations__research_1_1Search.html#843d04e8d884a1cbfeec5cce85c619dd">01315</a>   }
<a name="l01316"></a>01316 }
<a name="l01317"></a>01317 
<a name="l01318"></a>01318 <span class="keywordtype">bool</span> <a class="code" href="namespaceoperations__research.html#b537d0829b9eb7950f6c77ee47c585f3" title="Utility methods to ensure the communication between local search and the search.">LocalOptimumReached</a>(<a class="code" href="classoperations__research_1_1Search.html#4a8159adb90f38dbfda2efcace82d233">Search</a>* <span class="keyword">const</span> search) {
<a name="l01319"></a>01319   <span class="keywordflow">return</span> search-&gt;LocalOptimum();
<a name="l01320"></a>01320 }
<a name="l01321"></a>01321 
<a name="l01322"></a>01322 <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1Search.html#44a0b488d0c0df43d6bea1606a30f85d">AcceptDelta</a>(<a class="code" href="classoperations__research_1_1Search.html#4a8159adb90f38dbfda2efcace82d233">Search</a>* <span class="keyword">const</span> search,
<a name="l01323"></a>01323                  Assignment* <a class="code" href="resource_8cc.html#73461c37822b6ebb75b54ba1a9ffb442">delta</a>,
<a name="l01324"></a>01324                  Assignment* deltadelta) {
<a name="l01325"></a>01325   <span class="keywordflow">return</span> search-&gt;AcceptDelta(delta, deltadelta);
<a name="l01326"></a>01326 }
<a name="l01327"></a><a class="code" href="namespaceoperations__research.html#b537d0829b9eb7950f6c77ee47c585f3">01327</a> 
<a name="l01328"></a>01328 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Search.html#44b05979e5f6c941cf9c06e387fd28a4">AcceptNeighbor</a>(<a class="code" href="classoperations__research_1_1Search.html" title="Search class.">Search</a>* <span class="keyword">const</span> search) {
<a name="l01329"></a>01329   search-&gt;<a class="code" href="classoperations__research_1_1Search.html#44b05979e5f6c941cf9c06e387fd28a4">AcceptNeighbor</a>();
<a name="l01330"></a>01330 }
<a name="l01331"></a><a class="code" href="namespaceoperations__research.html#6994f97ca50f87770362b9b3724a2a21">01331</a> 
<a name="l01332"></a>01332 
<a name="l01333"></a>01333 <span class="keyword">namespace </span>{
<a name="l01334"></a>01334 
<a name="l01335"></a>01335 <span class="comment">// ---------- Fail Decision ----------</span>
<a name="l01336"></a>01336 
<a name="l01337"></a><a class="code" href="namespaceoperations__research.html#277ed3fa0830998efd1f3333b6c0eae7">01337</a> <span class="keyword">class </span>FailDecision : <span class="keyword">public</span> <a class="code" href="classoperations__research_1_1Decision.html" title="A Decision represents a choice point in the search tree.">Decision</a> {
<a name="l01338"></a>01338  <span class="keyword">public</span>:
<a name="l01339"></a>01339   <span class="keyword">virtual</span> <span class="keywordtype">void</span> Apply(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s) {
<a name="l01340"></a>01340     s-&gt;<a class="code" href="classoperations__research_1_1Solver.html#45534161a4dda7e1997bc0effd606648" title="Abandon the current branch in the search tree. A backtrack will follow.">Fail</a>();
<a name="l01341"></a>01341   }
<a name="l01342"></a>01342   <span class="keyword">virtual</span> <span class="keywordtype">void</span> Refute(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s) {
<a name="l01343"></a>01343     s-&gt;<a class="code" href="classoperations__research_1_1Solver.html#45534161a4dda7e1997bc0effd606648" title="Abandon the current branch in the search tree. A backtrack will follow.">Fail</a>();
<a name="l01344"></a>01344   }
<a name="l01345"></a>01345 };
<a name="l01346"></a>01346 
<a name="l01347"></a>01347 <span class="comment">// Balancing decision</span>
<a name="l01348"></a>01348 
<a name="l01349"></a>01349 <span class="keyword">class </span>BalancingDecision : <span class="keyword">public</span> Decision {
<a name="l01350"></a>01350  <span class="keyword">public</span>:
<a name="l01351"></a>01351   <span class="keyword">virtual</span> ~BalancingDecision() {}
<a name="l01352"></a>01352   <span class="keyword">virtual</span> <span class="keywordtype">void</span> Apply(<a class="code" href="classoperations__research_1_1Search.html#16432758b314f3cedad3fba81c895417">Solver</a>* <span class="keyword">const</span> s) {}
<a name="l01353"></a>01353   <span class="keyword">virtual</span> <span class="keywordtype">void</span> Refute(<a class="code" href="classoperations__research_1_1Search.html#16432758b314f3cedad3fba81c895417">Solver</a>* <span class="keyword">const</span> s) {}
<a name="l01354"></a>01354 };
<a name="l01355"></a>01355 }  <span class="comment">// namespace</span>
<a name="l01356"></a>01356 
<a name="l01357"></a>01357 Decision* <a class="code" href="classoperations__research_1_1Solver.html#ef168545c53462b00e474770d7948170" title="namespace">Solver::MakeFailDecision</a>() {
<a name="l01358"></a>01358   <span class="keywordflow">return</span> fail_decision_.get();
<a name="l01359"></a>01359 }
<a name="l01360"></a>01360 
<a name="l01361"></a>01361 
<a name="l01362"></a>01362 <span class="comment">// ------------------ Solver class -----------------</span>
<a name="l01363"></a>01363 
<a name="l01364"></a>01364 <span class="comment">// These magic numbers are there to make sure we pop the correct</span>
<a name="l01365"></a>01365 <span class="comment">// sentinels throughout the search.</span>
<a name="l01366"></a><a class="code" href="classoperations__research_1_1Solver.html#ef168545c53462b00e474770d7948170">01366</a> <span class="keyword">namespace </span>{
<a name="l01367"></a>01367 <span class="keyword">enum</span> SentinelMarker {
<a name="l01368"></a>01368   <a class="code" href="namespaceoperations__research.html#f1ab36801da5984b89300bc340ca2570">INITIAL_SEARCH_SENTINEL</a> = 10000000,
<a name="l01369"></a>01369   <a class="code" href="namespaceoperations__research.html#750b3027192fb2ccc71c4b318aa4f850">ROOT_NODE_SENTINEL</a>      = 20000000,
<a name="l01370"></a>01370   <a class="code" href="namespaceoperations__research.html#ec3e91d46100e1b95d4293ff52730113">SOLVER_CTOR_SENTINEL</a>    = 40000000
<a name="l01371"></a>01371 };
<a name="l01372"></a>01372 }  <span class="comment">// namespace</span>
<a name="l01373"></a>01373 
<a name="l01374"></a>01374 <span class="keyword">extern</span> <a class="code" href="classoperations__research_1_1Action.html" title="An action is the base callback method.">Action</a>* <a class="code" href="namespaceoperations__research.html#95ad34ed7b89a3604a3475012a6a068a" title="namespace">NewDomainIntVarCleaner</a>();
<a name="l01375"></a>01375 <span class="keyword">extern</span> <a class="code" href="classoperations__research_1_1PropagationMonitor.html" title="PropagationMonitor.">PropagationMonitor</a>* <a class="code" href="namespaceoperations__research.html#fc4c96aa6fa6a48c7ec423b9c299c5f9">BuildTrace</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s);
<a name="l01376"></a>01376 <span class="keyword">extern</span> <a class="code" href="classoperations__research_1_1ModelCache.html" title="Implements a complete cache for model elements: expressions and constraints.">ModelCache</a>* <a class="code" href="namespaceoperations__research.html#257ee12a1feb2e15b6efa4b3fe283173" title="namespace">BuildModelCache</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> solver);
<a name="l01377"></a><a class="code" href="namespaceoperations__research.html#f1ab36801da5984b89300bc340ca2570">01377</a> <span class="keyword">extern</span> <a class="code" href="classoperations__research_1_1DependencyGraph.html">DependencyGraph</a>* <a class="code" href="namespaceoperations__research.html#c3a31fd55a27058c2ba9acd41b75ec5d">BuildDependencyGraph</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> solver);
<a name="l01378"></a><a class="code" href="namespaceoperations__research.html#750b3027192fb2ccc71c4b318aa4f850">01378</a> 
<a name="l01379"></a><a class="code" href="namespaceoperations__research.html#ec3e91d46100e1b95d4293ff52730113">01379</a> <span class="keywordtype">string</span> <a class="code" href="classoperations__research_1_1Solver.html#9e7d568ffc44dde3e00ba3255299f688" title="Returns the name of the model.">Solver::model_name</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="routing_8cc.html#957ab180ea6fccb9f64da8218db44728">name_</a>; }
<a name="l01380"></a>01380 
<a name="l01381"></a>01381 <a class="code" href="classoperations__research_1_1Solver.html#5b0165d313b9e2bfba93da6aff65052f">Solver::Solver</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; <a class="code" href="default__search_8cc.html#1848ae81740c68c2502b2f176cfadcef" title="A name for logging purposes.">name</a>, <span class="keyword">const</span> SolverParameters&amp; parameters)
<a name="l01382"></a>01382     : <a class="code" href="routing_8cc.html#957ab180ea6fccb9f64da8218db44728">name_</a>(name),
<a name="l01383"></a>01383       <a class="code" href="default__search_8cc.html#9d92e250036bc6955d86f19a4b23507c">parameters_</a>(parameters),
<a name="l01384"></a>01384       queue_(new Queue(this)),
<a name="l01385"></a>01385       trail_(new Trail(parameters.trail_block_size, parameters.compress_trail)),
<a name="l01386"></a>01386       <a class="code" href="local__search_8cc.html#80151e3e5119fd23f5c8bd4125dafc11">state_</a>(OUTSIDE_SEARCH),
<a name="l01387"></a>01387       <a class="code" href="search_8cc.html#c44f729e825c876a44b40e6027226e73">branches_</a>(0),
<a name="l01388"></a><a class="code" href="classoperations__research_1_1Solver.html#9e7d568ffc44dde3e00ba3255299f688">01388</a>       fails_(0),
<a name="l01389"></a>01389       decisions_(0),
<a name="l01390"></a><a class="code" href="classoperations__research_1_1Solver.html#204c89d453a0716e5c521dc3dc2f5604">01390</a>       <a class="code" href="local__search_8cc.html#62d4c99f22a0457f2e862212a933d552">neighbors_</a>(0),
<a name="l01391"></a>01391       filtered_neighbors_(0),
<a name="l01392"></a>01392       accepted_neighbors_(0),
<a name="l01393"></a>01393       variable_cleaner_(<a class="code" href="namespaceoperations__research.html#95ad34ed7b89a3604a3475012a6a068a" title="namespace">NewDomainIntVarCleaner</a>()),
<a name="l01394"></a>01394       timer_(new <a class="code" href="constraint__solver_8h.html#5237bcebc553d0f8eb7e399f04e6ad98">ClockTimer</a>),
<a name="l01395"></a>01395       searches_(1, new <a class="code" href="classoperations__research_1_1Search.html" title="Search class.">Search</a>(this, 0)),
<a name="l01396"></a>01396       <a class="code" href="default__search_8cc.html#85ce4db11ab9c8d2a40d2006558aa7fd">random_</a>(ACMRandom::DeterministicSeed()),
<a name="l01397"></a>01397       fail_hooks_(NULL),
<a name="l01398"></a>01398       <a class="code" href="dependency__graph_8cc.html#8ca05b086f171637a3db5ceac193956e">fail_stamp_</a>(GG_ULONGLONG(1)),
<a name="l01399"></a>01399       balancing_decision_(new BalancingDecision),
<a name="l01400"></a>01400       fail_intercept_(NULL),
<a name="l01401"></a>01401       demon_profiler_(<a class="code" href="namespaceoperations__research.html#c29a3acd03ed409504d33c2ee4966a1a" title="Forward Declarations and Profiling Support.">BuildDemonProfiler</a>(this)),
<a name="l01402"></a>01402       true_constraint_(NULL),
<a name="l01403"></a>01403       false_constraint_(NULL),
<a name="l01404"></a>01404       fail_decision_(new FailDecision()),
<a name="l01405"></a>01405       constraint_index_(0),
<a name="l01406"></a>01406       additional_constraint_index_(0),
<a name="l01407"></a>01407       model_cache_(NULL),
<a name="l01408"></a>01408       dependency_graph_(NULL),
<a name="l01409"></a>01409       propagation_monitor_(<a class="code" href="namespaceoperations__research.html#fc4c96aa6fa6a48c7ec423b9c299c5f9">BuildTrace</a>(this)),
<a name="l01410"></a>01410       print_trace_(NULL),
<a name="l01411"></a>01411       anonymous_variable_index_(0) {
<a name="l01412"></a>01412   Init();
<a name="l01413"></a>01413 }
<a name="l01414"></a>01414 
<a name="l01415"></a>01415 <a class="code" href="classoperations__research_1_1Solver.html#5b0165d313b9e2bfba93da6aff65052f">Solver::Solver</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; <a class="code" href="default__search_8cc.html#1848ae81740c68c2502b2f176cfadcef" title="A name for logging purposes.">name</a>)
<a name="l01416"></a>01416     : <a class="code" href="routing_8cc.html#957ab180ea6fccb9f64da8218db44728">name_</a>(name),
<a name="l01417"></a>01417       <a class="code" href="default__search_8cc.html#9d92e250036bc6955d86f19a4b23507c">parameters_</a>(),
<a name="l01418"></a>01418       queue_(new <a class="code" href="classoperations__research_1_1Queue.html" title="namespace">Queue</a>(this)),
<a name="l01419"></a>01419       trail_(new <a class="code" href="structoperations__research_1_1Trail.html">Trail</a>(<a class="code" href="default__search_8cc.html#9d92e250036bc6955d86f19a4b23507c">parameters_</a>.trail_block_size,
<a name="l01420"></a>01420                        <a class="code" href="default__search_8cc.html#9d92e250036bc6955d86f19a4b23507c">parameters_</a>.compress_trail)),
<a name="l01421"></a>01421       <a class="code" href="local__search_8cc.html#80151e3e5119fd23f5c8bd4125dafc11">state_</a>(OUTSIDE_SEARCH),
<a name="l01422"></a>01422       <a class="code" href="search_8cc.html#c44f729e825c876a44b40e6027226e73">branches_</a>(0),
<a name="l01423"></a>01423       fails_(0),
<a name="l01424"></a><a class="code" href="classoperations__research_1_1Solver.html#5b0165d313b9e2bfba93da6aff65052f">01424</a>       decisions_(0),
<a name="l01425"></a>01425       <a class="code" href="local__search_8cc.html#62d4c99f22a0457f2e862212a933d552">neighbors_</a>(0),
<a name="l01426"></a>01426       filtered_neighbors_(0),
<a name="l01427"></a>01427       accepted_neighbors_(0),
<a name="l01428"></a>01428       variable_cleaner_(<a class="code" href="namespaceoperations__research.html#95ad34ed7b89a3604a3475012a6a068a" title="namespace">NewDomainIntVarCleaner</a>()),
<a name="l01429"></a>01429       timer_(new <a class="code" href="constraint__solver_8h.html#5237bcebc553d0f8eb7e399f04e6ad98">ClockTimer</a>),
<a name="l01430"></a>01430       searches_(1, new <a class="code" href="classoperations__research_1_1Search.html" title="Search class.">Search</a>(this, 0)),
<a name="l01431"></a>01431       <a class="code" href="default__search_8cc.html#85ce4db11ab9c8d2a40d2006558aa7fd">random_</a>(ACMRandom::DeterministicSeed()),
<a name="l01432"></a>01432       fail_hooks_(NULL),
<a name="l01433"></a>01433       <a class="code" href="dependency__graph_8cc.html#8ca05b086f171637a3db5ceac193956e">fail_stamp_</a>(GG_ULONGLONG(1)),
<a name="l01434"></a>01434       balancing_decision_(new BalancingDecision),
<a name="l01435"></a>01435       fail_intercept_(NULL),
<a name="l01436"></a>01436       demon_profiler_(<a class="code" href="namespaceoperations__research.html#c29a3acd03ed409504d33c2ee4966a1a" title="Forward Declarations and Profiling Support.">BuildDemonProfiler</a>(this)),
<a name="l01437"></a>01437       true_constraint_(NULL),
<a name="l01438"></a>01438       false_constraint_(NULL),
<a name="l01439"></a>01439       fail_decision_(new FailDecision()),
<a name="l01440"></a>01440       constraint_index_(0),
<a name="l01441"></a>01441       additional_constraint_index_(0),
<a name="l01442"></a>01442       model_cache_(NULL),
<a name="l01443"></a>01443       dependency_graph_(NULL),
<a name="l01444"></a>01444       propagation_monitor_(<a class="code" href="namespaceoperations__research.html#fc4c96aa6fa6a48c7ec423b9c299c5f9">BuildTrace</a>(this)),
<a name="l01445"></a>01445       print_trace_(NULL),
<a name="l01446"></a>01446       anonymous_variable_index_(0) {
<a name="l01447"></a>01447   Init();
<a name="l01448"></a>01448 }
<a name="l01449"></a>01449 
<a name="l01450"></a>01450 <span class="keywordtype">void</span> Solver::Init() {
<a name="l01451"></a>01451   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classoperations__research_1_1Solver.html#d4faf53cefb2c2cdb8892b978a4b93a9" title="Number of priorities for demons.">kNumPriorities</a>; ++i) {
<a name="l01452"></a>01452     demon_runs_[i] = 0;
<a name="l01453"></a>01453   }
<a name="l01454"></a>01454   searches_.push_back(<span class="keyword">new</span> Search(<span class="keyword">this</span>));
<a name="l01455"></a>01455   PushSentinel(<a class="code" href="namespaceoperations__research.html#ec3e91d46100e1b95d4293ff52730113">SOLVER_CTOR_SENTINEL</a>);
<a name="l01456"></a>01456   InitCachedIntConstants();  <span class="comment">// to be called after the SENTINEL is set.</span>
<a name="l01457"></a>01457   InitCachedConstraint();  <span class="comment">// Cache the true constraint.</span>
<a name="l01458"></a>01458   InitBuilders();
<a name="l01459"></a>01459   timer_-&gt;Restart();
<a name="l01460"></a>01460   model_cache_.reset(<a class="code" href="namespaceoperations__research.html#257ee12a1feb2e15b6efa4b3fe283173" title="namespace">BuildModelCache</a>(<span class="keyword">this</span>));
<a name="l01461"></a>01461   dependency_graph_.reset(<a class="code" href="namespaceoperations__research.html#c3a31fd55a27058c2ba9acd41b75ec5d">BuildDependencyGraph</a>(<span class="keyword">this</span>));
<a name="l01462"></a>01462   <a class="code" href="classoperations__research_1_1Solver.html#51c801ef84c5843e4b9a1ba489a15f0f" title="Adds the propagation monitor to the solver.">AddPropagationMonitor</a>(reinterpret_cast&lt;PropagationMonitor*&gt;(demon_profiler_));
<a name="l01463"></a>01463 }
<a name="l01464"></a>01464 
<a name="l01465"></a>01465 <a class="code" href="classoperations__research_1_1Solver.html#663bdb75f27a96e424ad2a7a4ba397ec">Solver::~Solver</a>() {
<a name="l01466"></a>01466   <span class="comment">// solver destructor called with searches open.</span>
<a name="l01467"></a>01467   CHECK_EQ(2, searches_.size());
<a name="l01468"></a>01468   BacktrackToSentinel(<a class="code" href="namespaceoperations__research.html#f1ab36801da5984b89300bc340ca2570">INITIAL_SEARCH_SENTINEL</a>);
<a name="l01469"></a>01469 
<a name="l01470"></a>01470   StateInfo info;
<a name="l01471"></a>01471   <a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a6215" title="This enum is used internally in private methods Solver::PushState and Solver::PopState...">Solver::MarkerType</a> finalType = <a class="code" href="classoperations__research_1_1Solver.html#67a90d3f386c8530100f810ef54a240a">PopState</a>(&amp;info);
<a name="l01472"></a>01472   <span class="comment">// Not popping a SENTINEL in Solver destructor.</span>
<a name="l01473"></a>01473   DCHECK_EQ(finalType, <a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a62156a8779a3d27000ed1e11b3549c0470ef">SENTINEL</a>);
<a name="l01474"></a><a class="code" href="classoperations__research_1_1Solver.html#663bdb75f27a96e424ad2a7a4ba397ec">01474</a>   <span class="comment">// Not popping initial SENTINEL in Solver destructor.</span>
<a name="l01475"></a>01475   DCHECK_EQ(info.int_info, <a class="code" href="namespaceoperations__research.html#ec3e91d46100e1b95d4293ff52730113">SOLVER_CTOR_SENTINEL</a>);
<a name="l01476"></a>01476   STLDeleteElements(&amp;searches_);
<a name="l01477"></a>01477   <a class="code" href="namespaceoperations__research.html#5a382b6532b01659ec7d7dac6fb93bad">DeleteDemonProfiler</a>(demon_profiler_);
<a name="l01478"></a>01478   DeleteBuilders();
<a name="l01479"></a>01479 }
<a name="l01480"></a>01480 
<a name="l01481"></a>01481 <span class="keyword">const</span> <a class="code" href="structoperations__research_1_1SolverParameters.html#63c6fe2e32ced9f83a4064c800130651">SolverParameters::TrailCompression</a>
<a name="l01482"></a>01482 <a class="code" href="structoperations__research_1_1SolverParameters.html#6f804a79d6f2f5b989cef147e5642ecf">SolverParameters::kDefaultTrailCompression</a> = <a class="code" href="structoperations__research_1_1SolverParameters.html#63c6fe2e32ced9f83a4064c80013065161440a766f50f6084eb75e9475441c9b">SolverParameters::NO_COMPRESSION</a>;
<a name="l01483"></a>01483 <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="structoperations__research_1_1SolverParameters.html#3ca543fc47b4a89b45f5c1e5626e3226">SolverParameters::kDefaultTrailBlockSize</a> = 8000;
<a name="l01484"></a>01484 <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="structoperations__research_1_1SolverParameters.html#14b9430319840c90d5064c32e9459176">SolverParameters::kDefaultArraySplitSize</a> = 16;
<a name="l01485"></a>01485 <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="structoperations__research_1_1SolverParameters.html#b283c9875ecce4fe4991a1f73c47299f">SolverParameters::kDefaultNameStoring</a> = <span class="keyword">true</span>;
<a name="l01486"></a>01486 <span class="keyword">const</span> <a class="code" href="structoperations__research_1_1SolverParameters.html#bb1b746ad99155bea2d44ba46db07187">SolverParameters::ProfileLevel</a> <a class="code" href="structoperations__research_1_1SolverParameters.html#8e1e96280d622b55f6e620b76032f1e6">SolverParameters::kDefaultProfileLevel</a> =
<a name="l01487"></a>01487          <a class="code" href="structoperations__research_1_1SolverParameters.html#bb1b746ad99155bea2d44ba46db0718723a03d3fac4ba780d9caa8ae38f5dea9">SolverParameters::NO_PROFILING</a>;
<a name="l01488"></a>01488 <span class="keyword">const</span> <a class="code" href="structoperations__research_1_1SolverParameters.html#dc2227e594bd04f2c7081315cb8a187a">SolverParameters::TraceLevel</a> <a class="code" href="structoperations__research_1_1SolverParameters.html#4ab70d10dc885a1487d5b4c45e32d680">SolverParameters::kDefaultTraceLevel</a> =
<a name="l01489"></a>01489          <a class="code" href="structoperations__research_1_1SolverParameters.html#dc2227e594bd04f2c7081315cb8a187a32ba180aa4cc3b88ad4420b9fcdf9c36">SolverParameters::NO_TRACE</a>;
<a name="l01490"></a>01490 <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="structoperations__research_1_1SolverParameters.html#be3280854e33011564fd5696c5ef42b6">SolverParameters::kDefaultNameAllVariables</a> = <span class="keyword">false</span>;
<a name="l01491"></a>01491 
<a name="l01492"></a>01492 <span class="keywordtype">string</span> <a class="code" href="classoperations__research_1_1Solver.html#a7a09bf2f27ccbdc1d1d386bd94e142a" title="misc debug string.">Solver::DebugString</a>()<span class="keyword"> const </span>{
<a name="l01493"></a>01493   <span class="keywordtype">string</span> out = <span class="stringliteral">"Solver(name = \""</span> + name_ + <span class="stringliteral">"\", state = "</span>;
<a name="l01494"></a>01494   <span class="keywordflow">switch</span> (state_) {
<a name="l01495"></a>01495     <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95c05654b6a7479316478744b3ce4a50df" title="Before search, after search.">OUTSIDE_SEARCH</a>:
<a name="l01496"></a>01496       out += <span class="stringliteral">"OUTSIDE_SEARCH"</span>;
<a name="l01497"></a>01497       <span class="keywordflow">break</span>;
<a name="l01498"></a>01498     <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a950e9b4a7467a4d4f1a7da211e6c59251e" title="Executing the root node.">IN_ROOT_NODE</a>:
<a name="l01499"></a>01499       out += <span class="stringliteral">"IN_ROOT_NODE"</span>;
<a name="l01500"></a>01500       <span class="keywordflow">break</span>;
<a name="l01501"></a><a class="code" href="classoperations__research_1_1Solver.html#a7a09bf2f27ccbdc1d1d386bd94e142a">01501</a>     <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95066908e143fd988a03767f05e682acaf" title="Executing the search code.">IN_SEARCH</a>:
<a name="l01502"></a>01502       out += <span class="stringliteral">"IN_SEARCH"</span>;
<a name="l01503"></a>01503       <span class="keywordflow">break</span>;
<a name="l01504"></a>01504     <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95d487136b6f055fa3fadfd6a3c12aa3a3" title="After successful NextSolution and before EndSearch.">AT_SOLUTION</a>:
<a name="l01505"></a>01505       out += <span class="stringliteral">"AT_SOLUTION"</span>;
<a name="l01506"></a>01506       <span class="keywordflow">break</span>;
<a name="l01507"></a>01507     <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95401b0c79d1fa9261524343fce4dd5439" title="After failed NextSolution and before EndSearch.">NO_MORE_SOLUTIONS</a>:
<a name="l01508"></a>01508       out += <span class="stringliteral">"NO_MORE_SOLUTIONS"</span>;
<a name="l01509"></a>01509       <span class="keywordflow">break</span>;
<a name="l01510"></a>01510     <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a9530b34e2664f9b1e2fb0d1347d7a87674" title="After search, the model is infeasible.">PROBLEM_INFEASIBLE</a>:
<a name="l01511"></a>01511       out += <span class="stringliteral">"PROBLEM_INFEASIBLE"</span>;
<a name="l01512"></a>01512       <span class="keywordflow">break</span>;
<a name="l01513"></a>01513   }
<a name="l01514"></a>01514   StringAppendF(&amp;out, <span class="stringliteral">", branches = %"</span> GG_LL_FORMAT
<a name="l01515"></a>01515                 <span class="stringliteral">"d, fails = %"</span> GG_LL_FORMAT
<a name="l01516"></a>01516                 <span class="stringliteral">"d, decisions = %"</span> GG_LL_FORMAT
<a name="l01517"></a>01517                 <span class="stringliteral">"d, delayed demon runs = %"</span> GG_LL_FORMAT
<a name="l01518"></a>01518                 <span class="stringliteral">"d, var demon runs = %"</span> GG_LL_FORMAT
<a name="l01519"></a>01519                 <span class="stringliteral">"d, normal demon runs = %"</span> GG_LL_FORMAT
<a name="l01520"></a>01520                 <span class="stringliteral">"d, Run time = %"</span> GG_LL_FORMAT <span class="stringliteral">"d ms)"</span>,
<a name="l01521"></a>01521                 branches_, fails_, decisions_, demon_runs_[<a class="code" href="classoperations__research_1_1Solver.html#4b0972c731faf884eba5acab99ebb2b4f8769149902a8a2b168069cb93cc6370" title="DELAYED_PRIORITY is the lowest priority: Demons will be processed after VAR_PRIORITY...">DELAYED_PRIORITY</a>],
<a name="l01522"></a>01522                 demon_runs_[<a class="code" href="classoperations__research_1_1Solver.html#4b0972c731faf884eba5acab99ebb2b4e5f79fc80ef9ae665bcd7c0e55c02aa6" title="VAR_PRIORITY is between DELAYED_PRIORITY and NORMAL_PRIORITY.">VAR_PRIORITY</a>], demon_runs_[<a class="code" href="classoperations__research_1_1Solver.html#4b0972c731faf884eba5acab99ebb2b44f432957a8b27277538d5ee856201a4c" title="NORMAL_PRIORITY is the highest priority: Demons will be processed first.">NORMAL_PRIORITY</a>],
<a name="l01523"></a>01523                 <a class="code" href="classoperations__research_1_1Solver.html#e1b93d59fbe7e74c48de9a4a8ec3e910" title="wall_time() in ms since the creation of the solver.">wall_time</a>());
<a name="l01524"></a>01524   <span class="keywordflow">return</span> out;
<a name="l01525"></a>01525 }
<a name="l01526"></a>01526 
<a name="l01527"></a>01527 int64 <a class="code" href="classoperations__research_1_1Solver.html#5e71cbc298a43b9a8200254f5b1b44aa" title="Current memory usage in bytes.">Solver::MemoryUsage</a>() {
<a name="l01528"></a>01528   <span class="keywordflow">return</span> GetProcessMemoryUsage();
<a name="l01529"></a>01529 }
<a name="l01530"></a>01530 
<a name="l01531"></a>01531 
<a name="l01532"></a>01532 int64 <a class="code" href="classoperations__research_1_1Solver.html#e1b93d59fbe7e74c48de9a4a8ec3e910" title="wall_time() in ms since the creation of the solver.">Solver::wall_time</a>()<span class="keyword"> const </span>{
<a name="l01533"></a>01533   <span class="keywordflow">return</span> timer_-&gt;GetInMs();
<a name="l01534"></a>01534 }
<a name="l01535"></a>01535 
<a name="l01536"></a><a class="code" href="classoperations__research_1_1Solver.html#5e71cbc298a43b9a8200254f5b1b44aa">01536</a> int64 <a class="code" href="classoperations__research_1_1Solver.html#27328aaeb854db363c20ba50179c154a" title="number of solutions found since the start of the search.">Solver::solutions</a>()<span class="keyword"> const </span>{
<a name="l01537"></a>01537   <span class="keywordflow">return</span> TopLevelSearch()-&gt;<a class="code" href="classoperations__research_1_1Search.html#2eb6d13dcbce28d116b399f5b7da3c10">solution_counter</a>();
<a name="l01538"></a>01538 }
<a name="l01539"></a>01539 
<a name="l01540"></a>01540 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Solver.html#6ffc56653b5ef9643ce87d05c9ebd8d6" title="Performs PeriodicCheck on the top-level search; can be called from a nested solve...">Solver::TopPeriodicCheck</a>() {
<a name="l01541"></a><a class="code" href="classoperations__research_1_1Solver.html#e1b93d59fbe7e74c48de9a4a8ec3e910">01541</a>   TopLevelSearch()-&gt;<a class="code" href="classoperations__research_1_1Search.html#9723908316a806be6eca0eae11379680">PeriodicCheck</a>();
<a name="l01542"></a>01542 }
<a name="l01543"></a>01543 
<a name="l01544"></a>01544 <span class="keywordtype">int</span> <a class="code" href="classoperations__research_1_1Solver.html#121897bbc632a6e27428666949b781e9" title="Returns a percentage representing the propress of the search before reaching the...">Solver::TopProgressPercent</a>() {
<a name="l01545"></a><a class="code" href="classoperations__research_1_1Solver.html#27328aaeb854db363c20ba50179c154a">01545</a>   <span class="keywordflow">return</span> TopLevelSearch()-&gt;<a class="code" href="classoperations__research_1_1Search.html#f11e31ed888766fac0ee5e11fd258d21">ProgressPercent</a>();
<a name="l01546"></a>01546 }
<a name="l01547"></a>01547 
<a name="l01548"></a>01548 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Solver.html#6d2ae179cd6e66dc4cfd14307126b2cb" title="The PushState and PopState methods manipulates the states of the reversible objects...">Solver::PushState</a>() {
<a name="l01549"></a><a class="code" href="classoperations__research_1_1Solver.html#6ffc56653b5ef9643ce87d05c9ebd8d6">01549</a>   <a class="code" href="structoperations__research_1_1StateInfo.html" title="StateMarker / StateInfo struct.">StateInfo</a> info;
<a name="l01550"></a>01550   <a class="code" href="classoperations__research_1_1Solver.html#6d2ae179cd6e66dc4cfd14307126b2cb" title="The PushState and PopState methods manipulates the states of the reversible objects...">PushState</a>(<a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a6215a5148450bdc2fa1d4b40c2dd70b6dd3c">SIMPLE_MARKER</a>, info);
<a name="l01551"></a>01551 }
<a name="l01552"></a>01552 
<a name="l01553"></a><a class="code" href="classoperations__research_1_1Solver.html#121897bbc632a6e27428666949b781e9">01553</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Solver.html#67a90d3f386c8530100f810ef54a240a">Solver::PopState</a>() {
<a name="l01554"></a>01554   <a class="code" href="structoperations__research_1_1StateInfo.html" title="StateMarker / StateInfo struct.">StateInfo</a> info;
<a name="l01555"></a>01555   <a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a6215" title="This enum is used internally in private methods Solver::PushState and Solver::PopState...">Solver::MarkerType</a> t = <a class="code" href="classoperations__research_1_1Solver.html#67a90d3f386c8530100f810ef54a240a">PopState</a>(&amp;info);
<a name="l01556"></a>01556   CHECK_EQ(<a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a6215a5148450bdc2fa1d4b40c2dd70b6dd3c">SIMPLE_MARKER</a>, t);
<a name="l01557"></a><a class="code" href="classoperations__research_1_1Solver.html#6d2ae179cd6e66dc4cfd14307126b2cb">01557</a> }
<a name="l01558"></a>01558 
<a name="l01559"></a>01559 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Solver.html#6d2ae179cd6e66dc4cfd14307126b2cb" title="The PushState and PopState methods manipulates the states of the reversible objects...">Solver::PushState</a>(<a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a6215" title="This enum is used internally in private methods Solver::PushState and Solver::PopState...">Solver::MarkerType</a> t, <span class="keyword">const</span> <a class="code" href="structoperations__research_1_1StateInfo.html" title="StateMarker / StateInfo struct.">StateInfo</a>&amp; info) {
<a name="l01560"></a>01560   <a class="code" href="structoperations__research_1_1StateMarker.html">StateMarker</a>* m = <span class="keyword">new</span> <a class="code" href="structoperations__research_1_1StateMarker.html">StateMarker</a>(t, info);
<a name="l01561"></a>01561   <span class="keywordflow">if</span> (t != <a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a6215b8ed3456ae15444c88849d08123e4c03">REVERSIBLE_ACTION</a> || info.<a class="code" href="structoperations__research_1_1StateInfo.html#000fb6644096e817fbaaa6f0ec4d2dc7">int_info</a> == 0) {
<a name="l01562"></a><a class="code" href="classoperations__research_1_1Solver.html#67a90d3f386c8530100f810ef54a240a">01562</a>     m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#47e232d3c97f162917eb26a62370a3b0">rev_int_index_</a> = trail_-&gt;rev_ints_.size();
<a name="l01563"></a>01563     m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#59a871b8eb960f4f605ce92ae0b0b5cb">rev_int64_index_</a> = trail_-&gt;rev_int64s_.size();
<a name="l01564"></a>01564     m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#98de7b131b404376d33337b01eb28031">rev_uint64_index_</a> = trail_-&gt;rev_uint64s_.size();
<a name="l01565"></a>01565     m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#611fa35102e6366583df213d9a033ce5">rev_ptr_index_</a> = trail_-&gt;rev_ptrs_.size();
<a name="l01566"></a>01566     m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#e15d50e63cbb570a6c5bd9b207e4fd86">rev_boolvar_list_index_</a> = trail_-&gt;rev_boolvar_list_.size();
<a name="l01567"></a>01567     m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#cfe80591d75fad1f8b61d0be54f83be1">rev_bools_index_</a> = trail_-&gt;rev_bools_.size();
<a name="l01568"></a>01568     m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#567759b019a07447185219b3b049a56b">rev_int_memory_index_</a> = trail_-&gt;rev_int_memory_.size();
<a name="l01569"></a>01569     m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#3716106fcd2f164dd83d0ee3d7f48ea4">rev_int64_memory_index_</a> = trail_-&gt;rev_int64_memory_.size();
<a name="l01570"></a>01570     m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#0d2c3347f6d80cf1754b596f5c4cd3f3">rev_object_memory_index_</a> = trail_-&gt;rev_object_memory_.size();
<a name="l01571"></a>01571     m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#b9edca8db5e3933b8343ebc6242c51b0">rev_object_array_memory_index_</a> = trail_-&gt;rev_object_array_memory_.size();
<a name="l01572"></a>01572     m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#59f571a7c091f1c6613f7a3fd81e2b9f">rev_memory_index_</a> = trail_-&gt;rev_memory_.size();
<a name="l01573"></a>01573     m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#7376e157224557b0ac9471eee71c2e04">rev_memory_array_index_</a> = trail_-&gt;rev_memory_array_.size();
<a name="l01574"></a>01574   }
<a name="l01575"></a>01575   searches_.back()-&gt;marker_stack_.push_back(m);
<a name="l01576"></a>01576   queue_-&gt;increase_stamp();
<a name="l01577"></a>01577 }
<a name="l01578"></a>01578 
<a name="l01579"></a>01579 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Solver.html#12783cb5a67a23a12104dfd9f51d3c92" title="When SaveValue() is not the best way to go, one can create a reversible action that...">Solver::AddBacktrackAction</a>(Action* a, <span class="keywordtype">bool</span> fast) {
<a name="l01580"></a>01580   StateInfo info(a, static_cast&lt;int&gt;(fast));
<a name="l01581"></a>01581   <a class="code" href="classoperations__research_1_1Solver.html#6d2ae179cd6e66dc4cfd14307126b2cb" title="The PushState and PopState methods manipulates the states of the reversible objects...">PushState</a>(<a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a6215b8ed3456ae15444c88849d08123e4c03">REVERSIBLE_ACTION</a>, info);
<a name="l01582"></a>01582 }
<a name="l01583"></a>01583 
<a name="l01584"></a>01584 <a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a6215" title="This enum is used internally in private methods Solver::PushState and Solver::PopState...">Solver::MarkerType</a> <a class="code" href="classoperations__research_1_1Solver.html#67a90d3f386c8530100f810ef54a240a">Solver::PopState</a>(StateInfo* info) {
<a name="l01585"></a>01585   CHECK(!searches_.back()-&gt;marker_stack_.empty())
<a name="l01586"></a>01586       &lt;&lt; <span class="stringliteral">"PopState() on an empty stack"</span>;
<a name="l01587"></a>01587   CHECK(info != NULL);
<a name="l01588"></a><a class="code" href="classoperations__research_1_1Solver.html#12783cb5a67a23a12104dfd9f51d3c92">01588</a>   <a class="code" href="structoperations__research_1_1StateMarker.html">StateMarker</a>* m = searches_.back()-&gt;marker_stack_.back();
<a name="l01589"></a>01589   <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#4e3fc46334e87c1db43418232af07a43">type_</a> != <a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a6215b8ed3456ae15444c88849d08123e4c03">REVERSIBLE_ACTION</a> || m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#a511a58fff101f893be1792b30533a99">info_</a>.<a class="code" href="structoperations__research_1_1StateInfo.html#000fb6644096e817fbaaa6f0ec4d2dc7">int_info</a> == 0) {
<a name="l01590"></a>01590     trail_-&gt;BacktrackTo(m);
<a name="l01591"></a>01591   }
<a name="l01592"></a>01592   <a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a6215" title="This enum is used internally in private methods Solver::PushState and Solver::PopState...">Solver::MarkerType</a> t = m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#4e3fc46334e87c1db43418232af07a43">type_</a>;
<a name="l01593"></a>01593   (*info) = m-&gt;<a class="code" href="structoperations__research_1_1StateMarker.html#a511a58fff101f893be1792b30533a99">info_</a>;
<a name="l01594"></a>01594   searches_.back()-&gt;marker_stack_.pop_back();
<a name="l01595"></a>01595   <span class="keyword">delete</span> m;
<a name="l01596"></a>01596   queue_-&gt;increase_stamp();
<a name="l01597"></a>01597   <span class="keywordflow">return</span> t;
<a name="l01598"></a>01598 }
<a name="l01599"></a>01599 
<a name="l01600"></a>01600 <span class="keywordtype">void</span> Solver::check_alloc_state() {
<a name="l01601"></a>01601   <span class="keywordflow">switch</span> (state_) {
<a name="l01602"></a>01602     <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95c05654b6a7479316478744b3ce4a50df" title="Before search, after search.">OUTSIDE_SEARCH</a>:
<a name="l01603"></a>01603     <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a950e9b4a7467a4d4f1a7da211e6c59251e" title="Executing the root node.">IN_ROOT_NODE</a>:
<a name="l01604"></a>01604     <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95066908e143fd988a03767f05e682acaf" title="Executing the search code.">IN_SEARCH</a>:
<a name="l01605"></a>01605     <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95401b0c79d1fa9261524343fce4dd5439" title="After failed NextSolution and before EndSearch.">NO_MORE_SOLUTIONS</a>:
<a name="l01606"></a>01606     <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a9530b34e2664f9b1e2fb0d1347d7a87674" title="After search, the model is infeasible.">PROBLEM_INFEASIBLE</a>:
<a name="l01607"></a>01607       <span class="keywordflow">break</span>;
<a name="l01608"></a>01608     <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95d487136b6f055fa3fadfd6a3c12aa3a3" title="After successful NextSolution and before EndSearch.">AT_SOLUTION</a>:
<a name="l01609"></a>01609       LOG(FATAL) &lt;&lt; <span class="stringliteral">"allocating at a leaf node"</span>;
<a name="l01610"></a>01610     <span class="keywordflow">default</span>:
<a name="l01611"></a>01611       LOG(FATAL) &lt;&lt; <span class="stringliteral">"This switch was supposed to be exhaustive, but it is not!"</span>;
<a name="l01612"></a>01612   }
<a name="l01613"></a>01613 }
<a name="l01614"></a>01614 
<a name="l01615"></a>01615 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Solver.html#e8f2aca4ff70252d643ac2a0ca02e44d" title="Adds a fail hook, that is an action that will be called after each failure.">Solver::AddFailHook</a>(Action* a) {
<a name="l01616"></a>01616   <span class="keywordflow">if</span> (fail_hooks_ == NULL) {
<a name="l01617"></a>01617     <a class="code" href="classoperations__research_1_1Solver.html#7ccd4144085fe2217fd92798283e99df" title="reversibility">SaveValue</a>(reinterpret_cast&lt;void**&gt;(&amp;fail_hooks_));
<a name="l01618"></a>01618     fail_hooks_ = UnsafeRevAlloc(<span class="keyword">new</span> SimpleRevFIFO&lt;Action*&gt;);
<a name="l01619"></a>01619   }
<a name="l01620"></a>01620   fail_hooks_-&gt;Push(<span class="keyword">this</span>, a);
<a name="l01621"></a>01621 }
<a name="l01622"></a>01622 
<a name="l01623"></a>01623 <span class="keywordtype">void</span> Solver::CallFailHooks() {
<a name="l01624"></a><a class="code" href="classoperations__research_1_1Solver.html#e8f2aca4ff70252d643ac2a0ca02e44d">01624</a>   <span class="keywordflow">if</span> (fail_hooks_ != NULL) {
<a name="l01625"></a>01625     <span class="keywordflow">for</span> (<a class="code" href="classoperations__research_1_1SimpleRevFIFO.html" title="utility classes">SimpleRevFIFO&lt;Action*&gt;::Iterator</a> it(fail_hooks_); it.ok(); ++it) {
<a name="l01626"></a>01626       (*it)-&gt;Run(<span class="keyword">this</span>);
<a name="l01627"></a>01627     }
<a name="l01628"></a>01628   }
<a name="l01629"></a>01629 }
<a name="l01630"></a>01630 
<a name="l01631"></a>01631 <span class="keywordtype">void</span> Solver::FreezeQueue() {
<a name="l01632"></a>01632   queue_-&gt;Freeze();
<a name="l01633"></a>01633 }
<a name="l01634"></a>01634 
<a name="l01635"></a>01635 <span class="keywordtype">void</span> Solver::UnfreezeQueue() {
<a name="l01636"></a>01636   queue_-&gt;Unfreeze();
<a name="l01637"></a>01637 }
<a name="l01638"></a>01638 
<a name="l01639"></a>01639 <span class="keywordtype">void</span> Solver::Enqueue(Demon* d) {
<a name="l01640"></a>01640   queue_-&gt;Enqueue(d);
<a name="l01641"></a>01641 }
<a name="l01642"></a>01642 
<a name="l01643"></a>01643 <span class="keywordtype">void</span> Solver::ProcessDemonsOnQueue() {
<a name="l01644"></a>01644   queue_-&gt;ProcessNormalDemons();
<a name="l01645"></a>01645 }
<a name="l01646"></a>01646 
<a name="l01647"></a>01647 uint64 <a class="code" href="classoperations__research_1_1Solver.html#f17dc31a0a12a7c6c9c09a8a8e2d94e4" title="The stamp indicates how many moves in the search tree we have performed.">Solver::stamp</a>()<span class="keyword"> const </span>{
<a name="l01648"></a>01648   <span class="keywordflow">return</span> queue_-&gt;stamp();
<a name="l01649"></a>01649 }
<a name="l01650"></a>01650 
<a name="l01651"></a>01651 uint64 <a class="code" href="classoperations__research_1_1Solver.html#0acf6942724a40e662a40df1f804eb51" title="The fail_stamp() is incremented after each backtrack.">Solver::fail_stamp</a>()<span class="keyword"> const </span>{
<a name="l01652"></a>01652   <span class="keywordflow">return</span> fail_stamp_;
<a name="l01653"></a>01653 }
<a name="l01654"></a>01654 
<a name="l01655"></a>01655 <span class="keywordtype">void</span> Solver::set_queue_action_on_fail(Action* a) {
<a name="l01656"></a><a class="code" href="classoperations__research_1_1Solver.html#f17dc31a0a12a7c6c9c09a8a8e2d94e4">01656</a>   queue_-&gt;set_action_on_fail(a);
<a name="l01657"></a>01657 }
<a name="l01658"></a>01658 
<a name="l01659"></a>01659 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Solver.html#3c3b1b166d9cd1613a05e960899c19c9">SetQueueCleanerOnFail</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> solver, <a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <span class="keyword">const</span> <a class="code" href="expr__array_8cc.html#472a99923cbe11ae7b5a5d157d9ad465">var</a>) {
<a name="l01660"></a><a class="code" href="classoperations__research_1_1Solver.html#0acf6942724a40e662a40df1f804eb51">01660</a>   solver-&gt;<a class="code" href="classoperations__research_1_1Solver.html#9f939894fd37da401bd1178e2c0f0f11">set_queue_cleaner_on_fail</a>(var);
<a name="l01661"></a>01661 }
<a name="l01662"></a>01662 
<a name="l01663"></a>01663 <span class="keywordtype">void</span> Solver::clear_queue_action_on_fail() {
<a name="l01664"></a>01664   queue_-&gt;clear_action_on_fail();
<a name="l01665"></a>01665 }
<a name="l01666"></a>01666 
<a name="l01667"></a>01667 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Solver.html#9c522a6cff91adae19af5cce7d8e411f" title="propagation">Solver::AddConstraint</a>(<a class="code" href="classoperations__research_1_1Solver.html#697ed9eaa8955d595a023663ab1e8418">Constraint</a>* <span class="keyword">const</span> c) {
<a name="l01668"></a><a class="code" href="namespaceoperations__research.html#3b7cd70aea9c32dce5901bda5745531f">01668</a>   <span class="keywordflow">if</span> (c == true_constraint_) {
<a name="l01669"></a>01669     <span class="keywordflow">return</span>;
<a name="l01670"></a>01670   }
<a name="l01671"></a>01671   <span class="keywordflow">if</span> (state_ == <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95066908e143fd988a03767f05e682acaf" title="Executing the search code.">IN_SEARCH</a>) {
<a name="l01672"></a>01672     queue_-&gt;AddConstraint(c);
<a name="l01673"></a>01673   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (state_ == <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a950e9b4a7467a4d4f1a7da211e6c59251e" title="Executing the root node.">IN_ROOT_NODE</a>) {
<a name="l01674"></a>01674     DCHECK_GE(constraint_index_, 0);
<a name="l01675"></a>01675     DCHECK_LE(constraint_index_, constraints_list_.size());
<a name="l01676"></a><a class="code" href="classoperations__research_1_1Solver.html#9c522a6cff91adae19af5cce7d8e411f">01676</a>     <span class="keyword">const</span> <span class="keywordtype">int</span> constraint_parent =
<a name="l01677"></a>01677         constraint_index_ == constraints_list_.size() ?
<a name="l01678"></a>01678         additional_constraints_parent_list_[additional_constraint_index_] :
<a name="l01679"></a>01679         constraint_index_;
<a name="l01680"></a>01680     additional_constraints_list_.push_back(c);
<a name="l01681"></a>01681     additional_constraints_parent_list_.push_back(constraint_parent);
<a name="l01682"></a>01682   } <span class="keywordflow">else</span> {
<a name="l01683"></a>01683     <span class="keywordflow">if</span> (FLAGS_cp_show_constraints) {
<a name="l01684"></a>01684       LOG(INFO) &lt;&lt; c-&gt;DebugString();
<a name="l01685"></a>01685     }
<a name="l01686"></a>01686     constraints_list_.push_back(c);
<a name="l01687"></a>01687   }
<a name="l01688"></a>01688 }
<a name="l01689"></a>01689 
<a name="l01690"></a>01690 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Solver.html#d0e990ebec2ca872a13f2c67c4b68a1e" title="Adds the constraint &amp;#39;c&amp;#39; to the solver and marks it as a cast constraint,...">Solver::AddCastConstraint</a>(CastConstraint* <span class="keyword">const</span> constraint,
<a name="l01691"></a>01691                                <a class="code" href="classoperations__research_1_1Solver.html#34419e55556ff4e92b447fe895bdb9c3">IntVar</a>* <span class="keyword">const</span> target_var,
<a name="l01692"></a>01692                                IntExpr* <span class="keyword">const</span> expr) {
<a name="l01693"></a>01693   <span class="keywordflow">if</span> (constraint != NULL) {
<a name="l01694"></a>01694     <span class="keywordflow">if</span> (state_ != <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95066908e143fd988a03767f05e682acaf" title="Executing the search code.">IN_SEARCH</a>) {
<a name="l01695"></a>01695       cast_constraints_.insert(constraint);
<a name="l01696"></a>01696       cast_information_[target_var] =
<a name="l01697"></a>01697           Solver::IntegerCastInfo(target_var, expr, constraint);
<a name="l01698"></a>01698     }
<a name="l01699"></a><a class="code" href="classoperations__research_1_1Solver.html#d0e990ebec2ca872a13f2c67c4b68a1e">01699</a>     <a class="code" href="classoperations__research_1_1Solver.html#9c522a6cff91adae19af5cce7d8e411f" title="propagation">AddConstraint</a>(constraint);
<a name="l01700"></a>01700   }
<a name="l01701"></a>01701 }
<a name="l01702"></a>01702 
<a name="l01703"></a>01703 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Solver.html#88de4c7ed8872eaece9bd09b1a7c882f" title="Accepts the given model visitor.">Solver::Accept</a>(ModelVisitor* <span class="keyword">const</span> visitor)<span class="keyword"> const </span>{
<a name="l01704"></a>01704   std::vector&lt;SearchMonitor*&gt; monitors;
<a name="l01705"></a>01705   <a class="code" href="classoperations__research_1_1Solver.html#88de4c7ed8872eaece9bd09b1a7c882f" title="Accepts the given model visitor.">Accept</a>(visitor, monitors);
<a name="l01706"></a>01706 }
<a name="l01707"></a>01707 
<a name="l01708"></a>01708 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Solver.html#88de4c7ed8872eaece9bd09b1a7c882f" title="Accepts the given model visitor.">Solver::Accept</a>(ModelVisitor* <span class="keyword">const</span> visitor,
<a name="l01709"></a>01709                     <span class="keyword">const</span> std::vector&lt;SearchMonitor*&gt;&amp; monitors)<span class="keyword"> const </span>{
<a name="l01710"></a>01710   visitor-&gt;BeginVisitModel(name_);
<a name="l01711"></a>01711   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="pack_8cc.html#750b5d744c39a06bfb13e6eb010e35d0">index</a> = 0; <a class="code" href="pack_8cc.html#750b5d744c39a06bfb13e6eb010e35d0">index</a> &lt; constraints_list_.size(); ++<a class="code" href="pack_8cc.html#750b5d744c39a06bfb13e6eb010e35d0">index</a>) {
<a name="l01712"></a><a class="code" href="classoperations__research_1_1Solver.html#88de4c7ed8872eaece9bd09b1a7c882f">01712</a>     <a class="code" href="classoperations__research_1_1Constraint.html" title="A constraint is the main modeling object.">Constraint</a>* <span class="keyword">const</span> constraint = constraints_list_[<a class="code" href="pack_8cc.html#750b5d744c39a06bfb13e6eb010e35d0">index</a>];
<a name="l01713"></a>01713     constraint-&gt;<a class="code" href="classoperations__research_1_1Constraint.html#816c36feb4ec4ffce6a8d3490029301c" title="Accepts the given visitor.">Accept</a>(visitor);
<a name="l01714"></a>01714   }
<a name="l01715"></a>01715   <span class="keywordflow">if</span> (state_ == <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a950e9b4a7467a4d4f1a7da211e6c59251e" title="Executing the root node.">IN_ROOT_NODE</a>) {
<a name="l01716"></a>01716     TopLevelSearch()-&gt;<a class="code" href="classoperations__research_1_1Search.html#843d04e8d884a1cbfeec5cce85c619dd">Accept</a>(visitor);
<a name="l01717"></a><a class="code" href="classoperations__research_1_1Solver.html#e4200b38caf2f098cf43cfb0db9544a4">01717</a>   } <span class="keywordflow">else</span> {
<a name="l01718"></a>01718     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; monitors.size(); ++i) {
<a name="l01719"></a>01719       monitors[i]-&gt;Accept(visitor);
<a name="l01720"></a>01720     }
<a name="l01721"></a>01721   }
<a name="l01722"></a>01722   visitor-&gt;EndVisitModel(name_);
<a name="l01723"></a>01723 }
<a name="l01724"></a>01724 
<a name="l01725"></a>01725 <span class="keywordtype">void</span> Solver::ProcessConstraints() {
<a name="l01726"></a>01726   <span class="comment">// Both constraints_list_ and additional_constraints_list_ are used in</span>
<a name="l01727"></a>01727   <span class="comment">// a FIFO way.</span>
<a name="l01728"></a>01728   <span class="keywordflow">if</span> (FLAGS_cp_print_model) {
<a name="l01729"></a>01729     ModelVisitor* <span class="keyword">const</span> visitor = <a class="code" href="classoperations__research_1_1Solver.html#dd0408c5d62170393c7d9f231b74d329" title="ModelVisitor.">MakePrintModelVisitor</a>();
<a name="l01730"></a>01730     <a class="code" href="classoperations__research_1_1Solver.html#88de4c7ed8872eaece9bd09b1a7c882f" title="Accepts the given model visitor.">Accept</a>(visitor);
<a name="l01731"></a>01731   }
<a name="l01732"></a>01732   <span class="keywordflow">if</span> (FLAGS_cp_model_stats) {
<a name="l01733"></a>01733     ModelVisitor* <span class="keyword">const</span> visitor = <a class="code" href="classoperations__research_1_1Solver.html#fc6f3bbb86ad33b7ef6c459a9241c413" title="Displays some nice statistics on the model.">MakeStatisticsModelVisitor</a>();
<a name="l01734"></a>01734     <a class="code" href="classoperations__research_1_1Solver.html#88de4c7ed8872eaece9bd09b1a7c882f" title="Accepts the given model visitor.">Accept</a>(visitor);
<a name="l01735"></a>01735   }
<a name="l01736"></a>01736   <span class="keywordflow">if</span> (!FLAGS_cp_export_file.empty()) {
<a name="l01737"></a>01737     File::Init();
<a name="l01738"></a>01738     File* file = File::Open(FLAGS_cp_export_file, <span class="stringliteral">"wb"</span>);
<a name="l01739"></a>01739     <span class="keywordflow">if</span> (file == NULL) {
<a name="l01740"></a>01740       LOG(WARNING) &lt;&lt; <span class="stringliteral">"Cannot open "</span> &lt;&lt; FLAGS_cp_export_file;
<a name="l01741"></a>01741     } <span class="keywordflow">else</span> {
<a name="l01742"></a>01742       CPModelProto export_proto;
<a name="l01743"></a>01743       <a class="code" href="classoperations__research_1_1Solver.html#2663a7feeb159961b7e3d08968cc374f" title="Exports the model to protobuf.">ExportModel</a>(&amp;export_proto);
<a name="l01744"></a>01744       VLOG(1) &lt;&lt; export_proto.DebugString();
<a name="l01745"></a>01745       RecordWriter writer(file);
<a name="l01746"></a>01746       writer.WriteProtocolMessage(export_proto);
<a name="l01747"></a>01747       writer.Close();
<a name="l01748"></a>01748     }
<a name="l01749"></a>01749   }
<a name="l01750"></a>01750 
<a name="l01751"></a>01751   <span class="keywordflow">if</span> (FLAGS_cp_no_solve) {
<a name="l01752"></a>01752     LOG(INFO) &lt;&lt; <span class="stringliteral">"Forcing early failure"</span>;
<a name="l01753"></a>01753     <a class="code" href="classoperations__research_1_1Solver.html#45534161a4dda7e1997bc0effd606648" title="Abandon the current branch in the search tree. A backtrack will follow.">Fail</a>();
<a name="l01754"></a>01754   }
<a name="l01755"></a>01755 
<a name="l01756"></a>01756   <span class="comment">// Clear state before processing constraints.</span>
<a name="l01757"></a>01757   <span class="keyword">const</span> <span class="keywordtype">int</span> constraints_size = constraints_list_.size();
<a name="l01758"></a>01758   additional_constraints_list_.clear();
<a name="l01759"></a>01759   additional_constraints_parent_list_.clear();
<a name="l01760"></a>01760 
<a name="l01761"></a>01761   <span class="keywordflow">for</span> (constraint_index_ = 0;
<a name="l01762"></a>01762        constraint_index_ &lt; constraints_size;
<a name="l01763"></a>01763        ++constraint_index_) {
<a name="l01764"></a>01764     <a class="code" href="classoperations__research_1_1Solver.html#697ed9eaa8955d595a023663ab1e8418">Constraint</a>* <span class="keyword">const</span> constraint = constraints_list_[constraint_index_];
<a name="l01765"></a>01765     propagation_monitor_-&gt;BeginConstraintInitialPropagation(constraint);
<a name="l01766"></a>01766     constraint-&gt;PostAndPropagate();
<a name="l01767"></a>01767     propagation_monitor_-&gt;EndConstraintInitialPropagation(constraint);
<a name="l01768"></a>01768   }
<a name="l01769"></a>01769   CHECK_EQ(constraints_list_.size(), constraints_size);
<a name="l01770"></a>01770 
<a name="l01771"></a>01771   <span class="comment">// Process nested constraints added during the previous step.</span>
<a name="l01772"></a>01772   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> additional_constraint_index_ = 0;
<a name="l01773"></a>01773        additional_constraint_index_ &lt; additional_constraints_list_.size();
<a name="l01774"></a>01774        ++additional_constraint_index_) {
<a name="l01775"></a>01775     <a class="code" href="classoperations__research_1_1Solver.html#697ed9eaa8955d595a023663ab1e8418">Constraint</a>* <span class="keyword">const</span> nested =
<a name="l01776"></a>01776         additional_constraints_list_[additional_constraint_index_];
<a name="l01777"></a>01777     <span class="keyword">const</span> <span class="keywordtype">int</span> parent_index =
<a name="l01778"></a>01778         additional_constraints_parent_list_[additional_constraint_index_];
<a name="l01779"></a>01779     <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1Solver.html#697ed9eaa8955d595a023663ab1e8418">Constraint</a>* <span class="keyword">const</span> parent = constraints_list_[parent_index];
<a name="l01780"></a>01780     propagation_monitor_-&gt;BeginNestedConstraintInitialPropagation(parent,
<a name="l01781"></a>01781                                                                   nested);
<a name="l01782"></a>01782     nested-&gt;PostAndPropagate();
<a name="l01783"></a>01783     propagation_monitor_-&gt;EndNestedConstraintInitialPropagation(parent, nested);
<a name="l01784"></a>01784   }
<a name="l01785"></a>01785 }
<a name="l01786"></a>01786 
<a name="l01787"></a>01787 <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1Solver.html#6d31c124181afb65d1441712e5f392d2" title="Returns true whether the current search has been created using a Solve() call instead...">Solver::CurrentlyInSolve</a>()<span class="keyword"> const </span>{
<a name="l01788"></a>01788   DCHECK_GT(<a class="code" href="classoperations__research_1_1Solver.html#0f605fdb1307a1ac4931e6a181c9e154" title="Gets the number of nested searches.">SolveDepth</a>(), 0);
<a name="l01789"></a>01789   DCHECK(searches_.back() != NULL);
<a name="l01790"></a>01790   <span class="keywordflow">return</span> searches_.back()-&gt;created_by_solve();
<a name="l01791"></a>01791 }
<a name="l01792"></a>01792 
<a name="l01793"></a>01793 <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1Solver.html#3ce9d85b90e2416f59ee89b13579c725">Solver::Solve</a>(DecisionBuilder* <span class="keyword">const</span> db, <a class="code" href="classoperations__research_1_1Solver.html#ac32a6eabe1d316d7ff5f92fedd1ec5b">SearchMonitor</a>* <span class="keyword">const</span> m1) {
<a name="l01794"></a>01794   std::vector&lt;SearchMonitor*&gt; monitors;
<a name="l01795"></a>01795   monitors.push_back(m1);
<a name="l01796"></a><a class="code" href="classoperations__research_1_1Solver.html#6d31c124181afb65d1441712e5f392d2">01796</a>   <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1Solver.html#3ce9d85b90e2416f59ee89b13579c725">Solve</a>(db, monitors);
<a name="l01797"></a>01797 }
<a name="l01798"></a>01798 
<a name="l01799"></a>01799 <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1Solver.html#3ce9d85b90e2416f59ee89b13579c725">Solver::Solve</a>(<a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* <span class="keyword">const</span> db) {
<a name="l01800"></a>01800   std::vector&lt;SearchMonitor*&gt; monitors;
<a name="l01801"></a>01801   <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1Solver.html#3ce9d85b90e2416f59ee89b13579c725">Solve</a>(db, monitors);
<a name="l01802"></a><a class="code" href="classoperations__research_1_1Solver.html#de33b8a9dce522094d5ce4b53fd5299d">01802</a> }
<a name="l01803"></a>01803 
<a name="l01804"></a>01804 <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1Solver.html#3ce9d85b90e2416f59ee89b13579c725">Solver::Solve</a>(<a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* <span class="keyword">const</span> db,
<a name="l01805"></a>01805                    <a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>* <span class="keyword">const</span> m1,
<a name="l01806"></a>01806                    <a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>* <span class="keyword">const</span> m2) {
<a name="l01807"></a>01807   std::vector&lt;SearchMonitor*&gt; monitors;
<a name="l01808"></a><a class="code" href="classoperations__research_1_1Solver.html#ab76d0849165f2c5b70ca910114607cd">01808</a>   monitors.push_back(m1);
<a name="l01809"></a>01809   monitors.push_back(m2);
<a name="l01810"></a>01810   <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1Solver.html#3ce9d85b90e2416f59ee89b13579c725">Solve</a>(db, monitors);
<a name="l01811"></a>01811 }
<a name="l01812"></a>01812 
<a name="l01813"></a><a class="code" href="classoperations__research_1_1Solver.html#ae3ef7a28da87aeb3fbd258210f805c7">01813</a> <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1Solver.html#3ce9d85b90e2416f59ee89b13579c725">Solver::Solve</a>(<a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* <span class="keyword">const</span> db,
<a name="l01814"></a>01814                    <a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>* <span class="keyword">const</span> m1,
<a name="l01815"></a>01815                    <a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>* <span class="keyword">const</span> m2,
<a name="l01816"></a>01816                    <a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>* <span class="keyword">const</span> m3) {
<a name="l01817"></a>01817   std::vector&lt;SearchMonitor*&gt; monitors;
<a name="l01818"></a>01818   monitors.push_back(m1);
<a name="l01819"></a>01819   monitors.push_back(m2);
<a name="l01820"></a>01820   monitors.push_back(m3);
<a name="l01821"></a>01821   <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1Solver.html#3ce9d85b90e2416f59ee89b13579c725">Solve</a>(db, monitors);
<a name="l01822"></a><a class="code" href="classoperations__research_1_1Solver.html#18f600b8b9594c59d9da9fb1b93cfa9b">01822</a> }
<a name="l01823"></a>01823 
<a name="l01824"></a>01824 <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1Solver.html#3ce9d85b90e2416f59ee89b13579c725">Solver::Solve</a>(<a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* <span class="keyword">const</span> db,
<a name="l01825"></a>01825                    <a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>* <span class="keyword">const</span> m1,
<a name="l01826"></a>01826                    <a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>* <span class="keyword">const</span> m2,
<a name="l01827"></a>01827                    <a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>* <span class="keyword">const</span> m3,
<a name="l01828"></a>01828                    <a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>* <span class="keyword">const</span> m4) {
<a name="l01829"></a>01829   std::vector&lt;SearchMonitor*&gt; monitors;
<a name="l01830"></a>01830   monitors.push_back(m1);
<a name="l01831"></a>01831   monitors.push_back(m2);
<a name="l01832"></a>01832   monitors.push_back(m3);
<a name="l01833"></a><a class="code" href="classoperations__research_1_1Solver.html#dadd60fc9e9d63a293b606376a171578">01833</a>   monitors.push_back(m4);
<a name="l01834"></a>01834   <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1Solver.html#3ce9d85b90e2416f59ee89b13579c725">Solve</a>(db, monitors);
<a name="l01835"></a>01835 }
<a name="l01836"></a>01836 
<a name="l01837"></a>01837 <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1Solver.html#3ce9d85b90e2416f59ee89b13579c725">Solver::Solve</a>(<a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* <span class="keyword">const</span> db,
<a name="l01838"></a>01838                    <span class="keyword">const</span> std::vector&lt;SearchMonitor*&gt;&amp; monitors) {
<a name="l01839"></a>01839   <a class="code" href="classoperations__research_1_1Solver.html#67ed18b7174df0eb483834276f19ce73" title="Opens a new top level search.">NewSearch</a>(db, monitors);
<a name="l01840"></a>01840   searches_.back()-&gt;set_created_by_solve(<span class="keyword">true</span>);  <span class="comment">// Overwrites default.</span>
<a name="l01841"></a>01841   <a class="code" href="classoperations__research_1_1Solver.html#11ed2a5d7bb8fb1a8967fee572ab9c47" title="namespace">NextSolution</a>();
<a name="l01842"></a>01842   <span class="keyword">const</span> <span class="keywordtype">bool</span> solution_found = searches_.back()-&gt;solution_counter() &gt; 0;
<a name="l01843"></a>01843   <a class="code" href="classoperations__research_1_1Solver.html#b95c7f997dbe36deb51e7c0213bdf445">EndSearch</a>();
<a name="l01844"></a>01844   <span class="keywordflow">return</span> solution_found;
<a name="l01845"></a>01845 }
<a name="l01846"></a><a class="code" href="classoperations__research_1_1Solver.html#3ce9d85b90e2416f59ee89b13579c725">01846</a> 
<a name="l01847"></a>01847 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Solver.html#67ed18b7174df0eb483834276f19ce73" title="Opens a new top level search.">Solver::NewSearch</a>(<a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* <span class="keyword">const</span> db, <a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>* <span class="keyword">const</span> m1) {
<a name="l01848"></a>01848   std::vector&lt;SearchMonitor*&gt; monitors;
<a name="l01849"></a>01849   monitors.push_back(m1);
<a name="l01850"></a>01850   <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1Solver.html#67ed18b7174df0eb483834276f19ce73" title="Opens a new top level search.">NewSearch</a>(db, monitors);
<a name="l01851"></a>01851 }
<a name="l01852"></a>01852 
<a name="l01853"></a>01853 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Solver.html#67ed18b7174df0eb483834276f19ce73" title="Opens a new top level search.">Solver::NewSearch</a>(<a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* <span class="keyword">const</span> db) {
<a name="l01854"></a>01854   std::vector&lt;SearchMonitor*&gt; monitors;
<a name="l01855"></a>01855   <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1Solver.html#67ed18b7174df0eb483834276f19ce73" title="Opens a new top level search.">NewSearch</a>(db, monitors);
<a name="l01856"></a><a class="code" href="classoperations__research_1_1Solver.html#0e93535e454db167f3b2bac3ffc18610">01856</a> }
<a name="l01857"></a>01857 
<a name="l01858"></a>01858 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Solver.html#67ed18b7174df0eb483834276f19ce73" title="Opens a new top level search.">Solver::NewSearch</a>(<a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* <span class="keyword">const</span> db,
<a name="l01859"></a>01859                        <a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>* <span class="keyword">const</span> m1,
<a name="l01860"></a>01860                        <a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>* <span class="keyword">const</span> m2) {
<a name="l01861"></a>01861   std::vector&lt;SearchMonitor*&gt; monitors;
<a name="l01862"></a><a class="code" href="classoperations__research_1_1Solver.html#92bf29bae6bb68ecae8d09e477183689">01862</a>   monitors.push_back(m1);
<a name="l01863"></a>01863   monitors.push_back(m2);
<a name="l01864"></a>01864   <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1Solver.html#67ed18b7174df0eb483834276f19ce73" title="Opens a new top level search.">NewSearch</a>(db, monitors);
<a name="l01865"></a>01865 }
<a name="l01866"></a>01866 
<a name="l01867"></a><a class="code" href="classoperations__research_1_1Solver.html#77376dffe41cb00920902a485c137b75">01867</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Solver.html#67ed18b7174df0eb483834276f19ce73" title="Opens a new top level search.">Solver::NewSearch</a>(<a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* <span class="keyword">const</span> db,
<a name="l01868"></a>01868                        <a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>* <span class="keyword">const</span> m1,
<a name="l01869"></a>01869                        <a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>* <span class="keyword">const</span> m2,
<a name="l01870"></a>01870                        <a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>* <span class="keyword">const</span> m3) {
<a name="l01871"></a>01871   std::vector&lt;SearchMonitor*&gt; monitors;
<a name="l01872"></a>01872   monitors.push_back(m1);
<a name="l01873"></a>01873   monitors.push_back(m2);
<a name="l01874"></a>01874   monitors.push_back(m3);
<a name="l01875"></a>01875   <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1Solver.html#67ed18b7174df0eb483834276f19ce73" title="Opens a new top level search.">NewSearch</a>(db, monitors);
<a name="l01876"></a><a class="code" href="classoperations__research_1_1Solver.html#309a2fb045ca55e103b3705b3ad3ba39">01876</a> }
<a name="l01877"></a>01877 
<a name="l01878"></a>01878 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Solver.html#67ed18b7174df0eb483834276f19ce73" title="Opens a new top level search.">Solver::NewSearch</a>(<a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* <span class="keyword">const</span> db,
<a name="l01879"></a>01879                        <a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>* <span class="keyword">const</span> m1,
<a name="l01880"></a>01880                        <a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>* <span class="keyword">const</span> m2,
<a name="l01881"></a>01881                        <a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>* <span class="keyword">const</span> m3,
<a name="l01882"></a>01882                        <a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>* <span class="keyword">const</span> m4) {
<a name="l01883"></a>01883   std::vector&lt;SearchMonitor*&gt; monitors;
<a name="l01884"></a>01884   monitors.push_back(m1);
<a name="l01885"></a>01885   monitors.push_back(m2);
<a name="l01886"></a>01886   monitors.push_back(m3);
<a name="l01887"></a><a class="code" href="classoperations__research_1_1Solver.html#5b0d44ae2db74b96268885785bd9c328">01887</a>   monitors.push_back(m4);
<a name="l01888"></a>01888   <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1Solver.html#67ed18b7174df0eb483834276f19ce73" title="Opens a new top level search.">NewSearch</a>(db, monitors);
<a name="l01889"></a>01889 }
<a name="l01890"></a>01890 
<a name="l01891"></a>01891 <span class="keyword">extern</span> <a class="code" href="classoperations__research_1_1PropagationMonitor.html" title="PropagationMonitor.">PropagationMonitor</a>* <a class="code" href="namespaceoperations__research.html#b106dcbbb133296156caf4ca1e9f8dcc">BuildPrintTrace</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s);
<a name="l01892"></a>01892 
<a name="l01893"></a>01893 <span class="comment">// Opens a new top level search.</span>
<a name="l01894"></a>01894 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Solver.html#67ed18b7174df0eb483834276f19ce73" title="Opens a new top level search.">Solver::NewSearch</a>(<a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* <span class="keyword">const</span> db,
<a name="l01895"></a>01895                        <span class="keyword">const</span> std::vector&lt;SearchMonitor*&gt;&amp; monitors) {
<a name="l01896"></a>01896   <span class="comment">// TODO(user) : reset statistics</span>
<a name="l01897"></a>01897 
<a name="l01898"></a>01898   <span class="keyword">const</span> <span class="keywordtype">int</span> size = monitors.size();
<a name="l01899"></a>01899 
<a name="l01900"></a>01900   CHECK_NOTNULL(db);
<a name="l01901"></a>01901   <span class="keyword">const</span> <span class="keywordtype">bool</span> nested = state_ == <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95066908e143fd988a03767f05e682acaf" title="Executing the search code.">IN_SEARCH</a>;
<a name="l01902"></a>01902 
<a name="l01903"></a><a class="code" href="classoperations__research_1_1Solver.html#67ed18b7174df0eb483834276f19ce73">01903</a>   <span class="keywordflow">if</span> (state_ == <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a950e9b4a7467a4d4f1a7da211e6c59251e" title="Executing the root node.">IN_ROOT_NODE</a>) {
<a name="l01904"></a>01904     LOG(FATAL) &lt;&lt; <span class="stringliteral">"Cannot start new searches here."</span>;
<a name="l01905"></a>01905   }
<a name="l01906"></a>01906 
<a name="l01907"></a>01907   <a class="code" href="classoperations__research_1_1Search.html" title="Search class.">Search</a>* <span class="keyword">const</span> search = nested ? <span class="keyword">new</span> <a class="code" href="classoperations__research_1_1Search.html" title="Search class.">Search</a>(<span class="keyword">this</span>) : searches_.back();
<a name="l01908"></a>01908   search-&gt;<a class="code" href="classoperations__research_1_1Search.html#1fcd92000011aeb8f6dc5454bfba38a9">set_created_by_solve</a>(<span class="keyword">false</span>);  <span class="comment">// default behavior.</span>
<a name="l01909"></a>01909 
<a name="l01910"></a>01910   <span class="comment">// ----- jumps to correct state -----</span>
<a name="l01911"></a>01911 
<a name="l01912"></a>01912   <span class="keywordflow">if</span> (nested) {
<a name="l01913"></a>01913     <span class="comment">// Nested searches are created on demand, and deleted afterwards.</span>
<a name="l01914"></a>01914     DCHECK_GE(searches_.size(), 2);
<a name="l01915"></a>01915     searches_.push_back(search);
<a name="l01916"></a>01916   } <span class="keywordflow">else</span> {
<a name="l01917"></a>01917     <span class="comment">// Top level search is persistent.</span>
<a name="l01918"></a>01918     <span class="comment">// TODO(user): delete top level search after EndSearch().</span>
<a name="l01919"></a>01919     DCHECK_EQ(2, searches_.size());
<a name="l01920"></a>01920     <span class="comment">// TODO(user): Check if these two lines are still necessary.</span>
<a name="l01921"></a>01921     BacktrackToSentinel(<a class="code" href="namespaceoperations__research.html#f1ab36801da5984b89300bc340ca2570">INITIAL_SEARCH_SENTINEL</a>);
<a name="l01922"></a>01922     state_ = <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95c05654b6a7479316478744b3ce4a50df" title="Before search, after search.">OUTSIDE_SEARCH</a>;
<a name="l01923"></a>01923   }
<a name="l01924"></a>01924 
<a name="l01925"></a>01925   <span class="comment">// ----- manages all monitors -----</span>
<a name="l01926"></a>01926 
<a name="l01927"></a>01927   <span class="comment">// Always install the main propagation monitor.</span>
<a name="l01928"></a>01928   propagation_monitor_-&gt;Install();
<a name="l01929"></a>01929   <span class="keywordflow">if</span> (demon_profiler_ != NULL) {
<a name="l01930"></a>01930     <a class="code" href="namespaceoperations__research.html#a8bbbade1fbab7f5db2a3a260896fe14" title="Exported Functions.">InstallDemonProfiler</a>(demon_profiler_);
<a name="l01931"></a>01931   }
<a name="l01932"></a>01932 
<a name="l01933"></a>01933   <span class="comment">// Push monitors and enter search.</span>
<a name="l01934"></a>01934   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l01935"></a>01935     <span class="keywordflow">if</span> (monitors[i] != NULL) {
<a name="l01936"></a>01936       monitors[i]-&gt;Install();
<a name="l01937"></a>01937     }
<a name="l01938"></a>01938   }
<a name="l01939"></a>01939   std::vector&lt;SearchMonitor*&gt; extras;
<a name="l01940"></a>01940   db-&gt;<a class="code" href="classoperations__research_1_1DecisionBuilder.html#61ba3c6d0da12541495cfea7e892ec99" title="This method will be called at the start of the search.">AppendMonitors</a>(<span class="keyword">this</span>, &amp;extras);
<a name="l01941"></a>01941   <span class="keywordflow">for</span> (ConstIter&lt;std::vector&lt;SearchMonitor*&gt; &gt; it(extras); !it.at_end(); ++it) {
<a name="l01942"></a>01942     <a class="code" href="classoperations__research_1_1Solver.html#ac32a6eabe1d316d7ff5f92fedd1ec5b">SearchMonitor</a>* <span class="keyword">const</span> monitor = *it;
<a name="l01943"></a>01943     <span class="keywordflow">if</span> (monitor != NULL) {
<a name="l01944"></a>01944       monitor-&gt;Install();
<a name="l01945"></a>01945     }
<a name="l01946"></a>01946   }
<a name="l01947"></a>01947   <span class="comment">// Install the print trace if needed.</span>
<a name="l01948"></a>01948   <span class="comment">// The print_trace needs to be last to detect propagation from the objective.</span>
<a name="l01949"></a>01949   <span class="keywordflow">if</span> (nested) {
<a name="l01950"></a>01950     <span class="keywordflow">if</span> (print_trace_ != NULL) {  <span class="comment">// Was installed at the top level?</span>
<a name="l01951"></a>01951       print_trace_-&gt;Install();  <span class="comment">// Propagates to nested search.</span>
<a name="l01952"></a>01952     }
<a name="l01953"></a>01953   } <span class="keywordflow">else</span> {  <span class="comment">// Top level search</span>
<a name="l01954"></a>01954     print_trace_ = NULL;  <span class="comment">// Clears it first.</span>
<a name="l01955"></a>01955     <span class="keywordflow">if</span> (FLAGS_cp_trace_propagation) {
<a name="l01956"></a>01956       print_trace_ = <a class="code" href="namespaceoperations__research.html#b106dcbbb133296156caf4ca1e9f8dcc">BuildPrintTrace</a>(<span class="keyword">this</span>);
<a name="l01957"></a>01957       print_trace_-&gt;Install();
<a name="l01958"></a>01958     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FLAGS_cp_trace_search) {
<a name="l01959"></a>01959       <span class="comment">// This is useful to trace the exact behavior of the search.</span>
<a name="l01960"></a>01960       <span class="comment">// The '######## ' prefix is the same as the progagation trace.</span>
<a name="l01961"></a>01961       <span class="comment">// Search trace is subsumed by propagation trace, thus only one</span>
<a name="l01962"></a>01962       <span class="comment">// is necessary.</span>
<a name="l01963"></a>01963       <a class="code" href="classoperations__research_1_1Solver.html#ac32a6eabe1d316d7ff5f92fedd1ec5b">SearchMonitor</a>* <span class="keyword">const</span> trace = <a class="code" href="classoperations__research_1_1Solver.html#0aba46021e61873b012ecc06ad66d928" title="Search Trace.">MakeSearchTrace</a>(<span class="stringliteral">"######## "</span>);
<a name="l01964"></a>01964       trace-&gt;Install();
<a name="l01965"></a>01965     }
<a name="l01966"></a>01966   }
<a name="l01967"></a>01967 
<a name="l01968"></a>01968   <span class="comment">// ----- enters search -----</span>
<a name="l01969"></a>01969 
<a name="l01970"></a>01970   search-&gt;<a class="code" href="classoperations__research_1_1Search.html#b3a81afa65291b9bdd3f3a168ce55aa4">EnterSearch</a>();
<a name="l01971"></a>01971 
<a name="l01972"></a>01972   <span class="comment">// Push sentinel and set decision builder.</span>
<a name="l01973"></a>01973   PushSentinel(<a class="code" href="namespaceoperations__research.html#f1ab36801da5984b89300bc340ca2570">INITIAL_SEARCH_SENTINEL</a>);
<a name="l01974"></a>01974   search-&gt;<a class="code" href="classoperations__research_1_1Search.html#4b37a519f7faebaeb4b6be5c62757c2b">set_decision_builder</a>(db);
<a name="l01975"></a>01975 }
<a name="l01976"></a>01976 
<a name="l01977"></a>01977 <span class="comment">// Backtrack to the last open right branch in the search tree.</span>
<a name="l01978"></a>01978 <span class="comment">// It returns true in case the search tree has been completely explored.</span>
<a name="l01979"></a>01979 <span class="keywordtype">bool</span> Solver::BacktrackOneLevel(Decision** <span class="keyword">const</span> fail_decision) {
<a name="l01980"></a>01980   <span class="keywordtype">bool</span> no_more_solutions = <span class="keyword">false</span>;
<a name="l01981"></a>01981   <span class="keywordtype">bool</span> end_loop = <span class="keyword">false</span>;
<a name="l01982"></a>01982   <span class="keywordflow">while</span> (!end_loop) {
<a name="l01983"></a>01983     StateInfo info;
<a name="l01984"></a>01984     <a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a6215" title="This enum is used internally in private methods Solver::PushState and Solver::PopState...">Solver::MarkerType</a> t = <a class="code" href="classoperations__research_1_1Solver.html#67a90d3f386c8530100f810ef54a240a">PopState</a>(&amp;info);
<a name="l01985"></a>01985     <span class="keywordflow">switch</span> (t) {
<a name="l01986"></a>01986       <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a62156a8779a3d27000ed1e11b3549c0470ef">SENTINEL</a>:
<a name="l01987"></a>01987         CHECK_EQ(info.ptr_info, <span class="keyword">this</span>) &lt;&lt; <span class="stringliteral">"Wrong sentinel found"</span>;
<a name="l01988"></a>01988         CHECK((info.int_info == <a class="code" href="namespaceoperations__research.html#750b3027192fb2ccc71c4b318aa4f850">ROOT_NODE_SENTINEL</a> &amp;&amp; <a class="code" href="classoperations__research_1_1Solver.html#0f605fdb1307a1ac4931e6a181c9e154" title="Gets the number of nested searches.">SolveDepth</a>() == 1) ||
<a name="l01989"></a>01989               (info.int_info == <a class="code" href="namespaceoperations__research.html#f1ab36801da5984b89300bc340ca2570">INITIAL_SEARCH_SENTINEL</a> &amp;&amp;
<a name="l01990"></a>01990                <a class="code" href="classoperations__research_1_1Solver.html#0f605fdb1307a1ac4931e6a181c9e154" title="Gets the number of nested searches.">SolveDepth</a>() &gt; 1));
<a name="l01991"></a>01991         searches_.back()-&gt;sentinel_pushed_--;
<a name="l01992"></a>01992         no_more_solutions = <span class="keyword">true</span>;
<a name="l01993"></a>01993         end_loop = <span class="keyword">true</span>;
<a name="l01994"></a>01994         <span class="keywordflow">break</span>;
<a name="l01995"></a>01995       <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a6215a5148450bdc2fa1d4b40c2dd70b6dd3c">SIMPLE_MARKER</a>:
<a name="l01996"></a>01996         LOG(ERROR)
<a name="l01997"></a>01997             &lt;&lt; <span class="stringliteral">"Simple markers should not be encountered during search"</span>;
<a name="l01998"></a>01998         <span class="keywordflow">break</span>;
<a name="l01999"></a>01999       <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a621568e4780981758b35943123d19ea5c070">CHOICE_POINT</a>:
<a name="l02000"></a>02000         <span class="keywordflow">if</span> (info.int_info == 0) {  <span class="comment">// was left branch</span>
<a name="l02001"></a>02001           (*fail_decision) = <span class="keyword">reinterpret_cast&lt;</span>Decision*<span class="keyword">&gt;</span>(info.ptr_info);
<a name="l02002"></a>02002           end_loop = <span class="keyword">true</span>;
<a name="l02003"></a>02003           searches_.back()-&gt;set_search_depth(info.depth);
<a name="l02004"></a>02004           searches_.back()-&gt;set_search_left_depth(info.left_depth);
<a name="l02005"></a>02005         }
<a name="l02006"></a>02006         <span class="keywordflow">break</span>;
<a name="l02007"></a>02007       <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a6215b8ed3456ae15444c88849d08123e4c03">REVERSIBLE_ACTION</a>: {
<a name="l02008"></a>02008         Action* d = <span class="keyword">reinterpret_cast&lt;</span>Action*<span class="keyword">&gt;</span>(info.ptr_info);
<a name="l02009"></a>02009         d-&gt;Run(<span class="keyword">this</span>);
<a name="l02010"></a>02010         <span class="keywordflow">break</span>;
<a name="l02011"></a>02011       }
<a name="l02012"></a>02012     }
<a name="l02013"></a>02013   }
<a name="l02014"></a>02014   Search* <span class="keyword">const</span> search = searches_.back();
<a name="l02015"></a>02015   search-&gt;EndFail();
<a name="l02016"></a>02016   CallFailHooks();
<a name="l02017"></a>02017   fail_stamp_++;
<a name="l02018"></a>02018   <span class="keywordflow">if</span> (no_more_solutions) {
<a name="l02019"></a>02019     search-&gt;NoMoreSolutions();
<a name="l02020"></a>02020   }
<a name="l02021"></a>02021   <span class="keywordflow">return</span> no_more_solutions;
<a name="l02022"></a>02022 }
<a name="l02023"></a>02023 
<a name="l02024"></a>02024 <span class="keywordtype">void</span> Solver::PushSentinel(<span class="keywordtype">int</span> magic_code) {
<a name="l02025"></a>02025   StateInfo info(<span class="keyword">this</span>, magic_code);
<a name="l02026"></a>02026   <a class="code" href="classoperations__research_1_1Solver.html#6d2ae179cd6e66dc4cfd14307126b2cb" title="The PushState and PopState methods manipulates the states of the reversible objects...">PushState</a>(<a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a62156a8779a3d27000ed1e11b3549c0470ef">SENTINEL</a>, info);
<a name="l02027"></a>02027   <span class="comment">// We do not count the sentinel pushed in the ctor.</span>
<a name="l02028"></a>02028   <span class="keywordflow">if</span> (magic_code != <a class="code" href="namespaceoperations__research.html#ec3e91d46100e1b95d4293ff52730113">SOLVER_CTOR_SENTINEL</a>) {
<a name="l02029"></a>02029     searches_.back()-&gt;sentinel_pushed_++;
<a name="l02030"></a>02030   }
<a name="l02031"></a>02031   <span class="keyword">const</span> <span class="keywordtype">int</span> pushed = searches_.back()-&gt;sentinel_pushed_;
<a name="l02032"></a>02032   DCHECK((magic_code == <a class="code" href="namespaceoperations__research.html#ec3e91d46100e1b95d4293ff52730113">SOLVER_CTOR_SENTINEL</a>) ||
<a name="l02033"></a>02033          (magic_code == <a class="code" href="namespaceoperations__research.html#f1ab36801da5984b89300bc340ca2570">INITIAL_SEARCH_SENTINEL</a> &amp;&amp; pushed == 1) ||
<a name="l02034"></a>02034          (magic_code == <a class="code" href="namespaceoperations__research.html#750b3027192fb2ccc71c4b318aa4f850">ROOT_NODE_SENTINEL</a> &amp;&amp; pushed == 2));
<a name="l02035"></a>02035 }
<a name="l02036"></a>02036 
<a name="l02037"></a>02037 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Solver.html#13e7e93a66ce0f15343c48c66d615e47">Solver::RestartSearch</a>() {
<a name="l02038"></a>02038   Search* <span class="keyword">const</span> search = searches_.back();
<a name="l02039"></a>02039   CHECK_NE(0, search-&gt;sentinel_pushed_);
<a name="l02040"></a>02040   <span class="keywordflow">if</span> (<a class="code" href="classoperations__research_1_1Solver.html#0f605fdb1307a1ac4931e6a181c9e154" title="Gets the number of nested searches.">SolveDepth</a>() == 1) {  <span class="comment">// top level.</span>
<a name="l02041"></a>02041     <span class="keywordflow">if</span> (search-&gt;sentinel_pushed_ &gt; 1) {
<a name="l02042"></a>02042       BacktrackToSentinel(<a class="code" href="namespaceoperations__research.html#750b3027192fb2ccc71c4b318aa4f850">ROOT_NODE_SENTINEL</a>);
<a name="l02043"></a>02043     }
<a name="l02044"></a>02044     CHECK_EQ(1, search-&gt;sentinel_pushed_);
<a name="l02045"></a>02045     PushSentinel(<a class="code" href="namespaceoperations__research.html#750b3027192fb2ccc71c4b318aa4f850">ROOT_NODE_SENTINEL</a>);
<a name="l02046"></a><a class="code" href="classoperations__research_1_1Solver.html#13e7e93a66ce0f15343c48c66d615e47">02046</a>     state_ = <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95066908e143fd988a03767f05e682acaf" title="Executing the search code.">IN_SEARCH</a>;
<a name="l02047"></a>02047   } <span class="keywordflow">else</span> {
<a name="l02048"></a>02048     CHECK_EQ(<a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95066908e143fd988a03767f05e682acaf" title="Executing the search code.">IN_SEARCH</a>, state_);
<a name="l02049"></a>02049     <span class="keywordflow">if</span> (search-&gt;sentinel_pushed_ &gt; 0) {
<a name="l02050"></a>02050       BacktrackToSentinel(<a class="code" href="namespaceoperations__research.html#f1ab36801da5984b89300bc340ca2570">INITIAL_SEARCH_SENTINEL</a>);
<a name="l02051"></a>02051     }
<a name="l02052"></a>02052     CHECK_EQ(0, search-&gt;sentinel_pushed_);
<a name="l02053"></a>02053     PushSentinel(<a class="code" href="namespaceoperations__research.html#f1ab36801da5984b89300bc340ca2570">INITIAL_SEARCH_SENTINEL</a>);
<a name="l02054"></a>02054   }
<a name="l02055"></a>02055 
<a name="l02056"></a>02056   search-&gt;RestartSearch();
<a name="l02057"></a>02057 }
<a name="l02058"></a>02058 
<a name="l02059"></a>02059 <span class="comment">// Backtrack to the initial search sentinel.</span>
<a name="l02060"></a>02060 <span class="comment">// Does not change the state, this should be done by the caller.</span>
<a name="l02061"></a>02061 <span class="keywordtype">void</span> Solver::BacktrackToSentinel(<span class="keywordtype">int</span> magic_code) {
<a name="l02062"></a>02062   Search* <span class="keyword">const</span> search = searches_.back();
<a name="l02063"></a>02063   <span class="keywordtype">bool</span> end_loop = search-&gt;sentinel_pushed_ == 0;
<a name="l02064"></a>02064   <span class="keywordflow">while</span> (!end_loop) {
<a name="l02065"></a>02065     StateInfo info;
<a name="l02066"></a>02066     <a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a6215" title="This enum is used internally in private methods Solver::PushState and Solver::PopState...">Solver::MarkerType</a> t = <a class="code" href="classoperations__research_1_1Solver.html#67a90d3f386c8530100f810ef54a240a">PopState</a>(&amp;info);
<a name="l02067"></a>02067     <span class="keywordflow">switch</span> (t) {
<a name="l02068"></a>02068       <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a62156a8779a3d27000ed1e11b3549c0470ef">SENTINEL</a>: {
<a name="l02069"></a>02069         CHECK_EQ(info.ptr_info, <span class="keyword">this</span>) &lt;&lt; <span class="stringliteral">"Wrong sentinel found"</span>;
<a name="l02070"></a>02070         CHECK_GE(--search-&gt;sentinel_pushed_, 0);
<a name="l02071"></a>02071         search-&gt;set_search_depth(0);
<a name="l02072"></a>02072         search-&gt;set_search_left_depth(0);
<a name="l02073"></a>02073 
<a name="l02074"></a>02074         <span class="keywordflow">if</span> (info.int_info == magic_code) {
<a name="l02075"></a>02075           end_loop = <span class="keyword">true</span>;
<a name="l02076"></a>02076         }
<a name="l02077"></a>02077         <span class="keywordflow">break</span>;
<a name="l02078"></a>02078       }
<a name="l02079"></a>02079       <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a6215a5148450bdc2fa1d4b40c2dd70b6dd3c">SIMPLE_MARKER</a>:
<a name="l02080"></a>02080         <span class="keywordflow">break</span>;
<a name="l02081"></a>02081       <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a621568e4780981758b35943123d19ea5c070">CHOICE_POINT</a>:
<a name="l02082"></a>02082         <span class="keywordflow">break</span>;
<a name="l02083"></a>02083       <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a6215b8ed3456ae15444c88849d08123e4c03">REVERSIBLE_ACTION</a>: {
<a name="l02084"></a>02084         Demon* d = <span class="keyword">reinterpret_cast&lt;</span>Demon*<span class="keyword">&gt;</span>(info.ptr_info);
<a name="l02085"></a>02085         d-&gt;Run(<span class="keyword">this</span>);
<a name="l02086"></a>02086         <span class="keywordflow">break</span>;
<a name="l02087"></a>02087       }
<a name="l02088"></a>02088     }
<a name="l02089"></a>02089   }
<a name="l02090"></a>02090   fail_stamp_++;
<a name="l02091"></a>02091 }
<a name="l02092"></a>02092 
<a name="l02093"></a>02093 <span class="comment">// Closes the current search without backtrack.</span>
<a name="l02094"></a>02094 <span class="keywordtype">void</span> Solver::JumpToSentinelWhenNested() {
<a name="l02095"></a>02095   CHECK_GT(<a class="code" href="classoperations__research_1_1Solver.html#0f605fdb1307a1ac4931e6a181c9e154" title="Gets the number of nested searches.">SolveDepth</a>(), 1) &lt;&lt; <span class="stringliteral">"calling JumpToSentinel from top level"</span>;
<a name="l02096"></a>02096   Search* c = searches_.back();
<a name="l02097"></a>02097   Search* p = ParentSearch();
<a name="l02098"></a>02098   <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;
<a name="l02099"></a>02099   <span class="keywordflow">while</span> (!c-&gt;marker_stack_.empty()) {
<a name="l02100"></a>02100     StateMarker* <span class="keyword">const</span> m = c-&gt;marker_stack_.back();
<a name="l02101"></a>02101     <span class="keywordflow">if</span> (m-&gt;type_ == <a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a6215b8ed3456ae15444c88849d08123e4c03">REVERSIBLE_ACTION</a>) {
<a name="l02102"></a>02102       p-&gt;marker_stack_.push_back(m);
<a name="l02103"></a>02103     } <span class="keywordflow">else</span> {
<a name="l02104"></a>02104       <span class="keywordflow">if</span> (m-&gt;type_ == <a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a62156a8779a3d27000ed1e11b3549c0470ef">SENTINEL</a>) {
<a name="l02105"></a>02105         CHECK_EQ(c-&gt;marker_stack_.size(), 1) &lt;&lt; <span class="stringliteral">"Sentinel found too early"</span>;
<a name="l02106"></a>02106         found = <span class="keyword">true</span>;
<a name="l02107"></a>02107       }
<a name="l02108"></a>02108       <span class="keyword">delete</span> m;
<a name="l02109"></a>02109     }
<a name="l02110"></a>02110     c-&gt;marker_stack_.pop_back();
<a name="l02111"></a>02111   }
<a name="l02112"></a>02112   c-&gt;set_search_depth(0);
<a name="l02113"></a>02113   c-&gt;set_search_left_depth(0);
<a name="l02114"></a>02114   CHECK_EQ(found, <span class="keyword">true</span>) &lt;&lt; <span class="stringliteral">"Sentinel not found"</span>;
<a name="l02115"></a>02115 }
<a name="l02116"></a>02116 
<a name="l02117"></a>02117 <span class="keyword">namespace </span>{
<a name="l02118"></a>02118 <span class="keyword">class </span>ReverseDecision : <span class="keyword">public</span> Decision {
<a name="l02119"></a>02119  <span class="keyword">public</span>:
<a name="l02120"></a>02120   <span class="keyword">explicit</span> ReverseDecision(Decision* <span class="keyword">const</span> d) : <a class="code" href="constraint__solver_8cc.html#1452e4944dcf272b8a473664908dc004">decision_</a>(d) {
<a name="l02121"></a>02121     CHECK(d != NULL);
<a name="l02122"></a>02122   }
<a name="l02123"></a>02123   <span class="keyword">virtual</span> ~ReverseDecision() {}
<a name="l02124"></a>02124 
<a name="l02125"></a>02125   <span class="keyword">virtual</span> <span class="keywordtype">void</span> Apply(<a class="code" href="classoperations__research_1_1Solver.html#5b0165d313b9e2bfba93da6aff65052f">Solver</a>* <span class="keyword">const</span> s) {
<a name="l02126"></a>02126     <a class="code" href="constraint__solver_8cc.html#1452e4944dcf272b8a473664908dc004">decision_</a>-&gt;Refute(s);
<a name="l02127"></a>02127   }
<a name="l02128"></a>02128 
<a name="l02129"></a>02129   <span class="keyword">virtual</span> <span class="keywordtype">void</span> Refute(<a class="code" href="classoperations__research_1_1Solver.html#5b0165d313b9e2bfba93da6aff65052f">Solver</a>* <span class="keyword">const</span> s) {
<a name="l02130"></a>02130     <a class="code" href="constraint__solver_8cc.html#1452e4944dcf272b8a473664908dc004">decision_</a>-&gt;Apply(s);
<a name="l02131"></a>02131   }
<a name="l02132"></a>02132 
<a name="l02133"></a>02133   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Solver.html#88de4c7ed8872eaece9bd09b1a7c882f" title="Accepts the given model visitor.">Accept</a>(DecisionVisitor* <span class="keyword">const</span> visitor)<span class="keyword"> const </span>{
<a name="l02134"></a>02134     <a class="code" href="constraint__solver_8cc.html#1452e4944dcf272b8a473664908dc004">decision_</a>-&gt;Accept(visitor);
<a name="l02135"></a>02135   }
<a name="l02136"></a>02136 
<a name="l02137"></a>02137   <span class="keyword">virtual</span> <span class="keywordtype">string</span> <a class="code" href="classoperations__research_1_1Solver.html#a7a09bf2f27ccbdc1d1d386bd94e142a" title="misc debug string.">DebugString</a>()<span class="keyword"> const </span>{
<a name="l02138"></a>02138     <span class="keywordtype">string</span> str = <span class="stringliteral">"Reverse("</span>;
<a name="l02139"></a>02139     str += <a class="code" href="constraint__solver_8cc.html#1452e4944dcf272b8a473664908dc004">decision_</a>-&gt;DebugString();
<a name="l02140"></a>02140     str += <span class="stringliteral">")"</span>;
<a name="l02141"></a>02141     <span class="keywordflow">return</span> str;
<a name="l02142"></a>02142   }
<a name="l02143"></a>02143 
<a name="l02144"></a>02144  <span class="keyword">private</span>:
<a name="l02145"></a>02145   Decision* <span class="keyword">const</span> <a class="code" href="constraint__solver_8cc.html#1452e4944dcf272b8a473664908dc004">decision_</a>;
<a name="l02146"></a>02146 };
<a name="l02147"></a>02147 }  <span class="comment">// namespace</span>
<a name="l02148"></a>02148 
<a name="l02149"></a>02149 <span class="comment">// Search for the next solution in the search tree.</span>
<a name="l02150"></a>02150 <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1Solver.html#11ed2a5d7bb8fb1a8967fee572ab9c47" title="namespace">Solver::NextSolution</a>() {
<a name="l02151"></a>02151   Search* <span class="keyword">const</span> search = searches_.back();
<a name="l02152"></a>02152   Decision* fd = NULL;
<a name="l02153"></a>02153   <span class="keyword">const</span> <span class="keywordtype">int</span> solve_depth = <a class="code" href="classoperations__research_1_1Solver.html#0f605fdb1307a1ac4931e6a181c9e154" title="Gets the number of nested searches.">SolveDepth</a>();
<a name="l02154"></a><a class="code" href="constraint__solver_8cc.html#1452e4944dcf272b8a473664908dc004">02154</a>   <span class="keyword">const</span> <span class="keywordtype">bool</span> top_level = solve_depth &lt;= 1;
<a name="l02155"></a>02155 
<a name="l02156"></a>02156   <span class="keywordflow">if</span> (solve_depth == 0 &amp;&amp; !search-&gt;decision_builder()) {
<a name="l02157"></a>02157     LOG(WARNING) &lt;&lt; <span class="stringliteral">"NextSolution() called without a NewSearch before"</span>;
<a name="l02158"></a>02158     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02159"></a><a class="code" href="classoperations__research_1_1Solver.html#11ed2a5d7bb8fb1a8967fee572ab9c47">02159</a>   }
<a name="l02160"></a>02160 
<a name="l02161"></a>02161   <span class="keywordflow">if</span> (top_level) {  <span class="comment">// Manage top level state.</span>
<a name="l02162"></a>02162     <span class="keywordflow">switch</span> (state_) {
<a name="l02163"></a>02163       <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a9530b34e2664f9b1e2fb0d1347d7a87674" title="After search, the model is infeasible.">PROBLEM_INFEASIBLE</a>:
<a name="l02164"></a>02164         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02165"></a>02165       <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95401b0c79d1fa9261524343fce4dd5439" title="After failed NextSolution and before EndSearch.">NO_MORE_SOLUTIONS</a>:
<a name="l02166"></a>02166         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02167"></a>02167       <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95d487136b6f055fa3fadfd6a3c12aa3a3" title="After successful NextSolution and before EndSearch.">AT_SOLUTION</a>: {
<a name="l02168"></a>02168         <span class="keywordflow">if</span> (BacktrackOneLevel(&amp;fd)) {  <span class="comment">// No more solutions.</span>
<a name="l02169"></a>02169           state_ = <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95401b0c79d1fa9261524343fce4dd5439" title="After failed NextSolution and before EndSearch.">NO_MORE_SOLUTIONS</a>;
<a name="l02170"></a>02170           <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02171"></a>02171         }
<a name="l02172"></a>02172         state_ = <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95066908e143fd988a03767f05e682acaf" title="Executing the search code.">IN_SEARCH</a>;
<a name="l02173"></a>02173         <span class="keywordflow">break</span>;
<a name="l02174"></a>02174       }
<a name="l02175"></a>02175       <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95c05654b6a7479316478744b3ce4a50df" title="Before search, after search.">OUTSIDE_SEARCH</a>: {
<a name="l02176"></a>02176         state_ = <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a950e9b4a7467a4d4f1a7da211e6c59251e" title="Executing the root node.">IN_ROOT_NODE</a>;
<a name="l02177"></a>02177         search-&gt;BeginInitialPropagation();
<a name="l02178"></a>02178         <a class="code" href="constraint__solver_8cc.html#458c844702d69839c667500d86ae49c8" title="We cannot use a method/function for this as we would lose the context in the setjmp...">CP_TRY</a>(search) {
<a name="l02179"></a>02179           ProcessConstraints();
<a name="l02180"></a>02180           search-&gt;EndInitialPropagation();
<a name="l02181"></a>02181           PushSentinel(<a class="code" href="namespaceoperations__research.html#750b3027192fb2ccc71c4b318aa4f850">ROOT_NODE_SENTINEL</a>);
<a name="l02182"></a>02182           state_ = <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95066908e143fd988a03767f05e682acaf" title="Executing the search code.">IN_SEARCH</a>;
<a name="l02183"></a>02183           search-&gt;ClearBuffer();
<a name="l02184"></a>02184         } <a class="code" href="constraint__solver_8cc.html#40910cf9a9eb89daac6c929006a03416">CP_ON_FAIL</a> {
<a name="l02185"></a>02185           queue_-&gt;AfterFailure();
<a name="l02186"></a>02186           BacktrackToSentinel(<a class="code" href="namespaceoperations__research.html#f1ab36801da5984b89300bc340ca2570">INITIAL_SEARCH_SENTINEL</a>);
<a name="l02187"></a>02187           state_ = <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a9530b34e2664f9b1e2fb0d1347d7a87674" title="After search, the model is infeasible.">PROBLEM_INFEASIBLE</a>;
<a name="l02188"></a>02188           <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02189"></a>02189         }
<a name="l02190"></a>02190         <span class="keywordflow">break</span>;
<a name="l02191"></a>02191       }
<a name="l02192"></a>02192       <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95066908e143fd988a03767f05e682acaf" title="Executing the search code.">IN_SEARCH</a>:  <span class="comment">// Usually after a RestartSearch</span>
<a name="l02193"></a>02193         <span class="keywordflow">break</span>;
<a name="l02194"></a>02194       <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a950e9b4a7467a4d4f1a7da211e6c59251e" title="Executing the root node.">IN_ROOT_NODE</a>:
<a name="l02195"></a>02195         LOG(FATAL) &lt;&lt; <span class="stringliteral">"Should not happen"</span>;
<a name="l02196"></a>02196         <span class="keywordflow">break</span>;
<a name="l02197"></a>02197     }
<a name="l02198"></a>02198   }
<a name="l02199"></a>02199 
<a name="l02200"></a>02200   <span class="keyword">volatile</span> <span class="keywordtype">bool</span> finish = <span class="keyword">false</span>;
<a name="l02201"></a>02201   <span class="keyword">volatile</span> <span class="keywordtype">bool</span> result = <span class="keyword">false</span>;
<a name="l02202"></a>02202   DecisionBuilder* <span class="keyword">const</span> db = search-&gt;decision_builder();
<a name="l02203"></a>02203 
<a name="l02204"></a>02204   <span class="keywordflow">while</span> (!finish) {
<a name="l02205"></a>02205     <a class="code" href="constraint__solver_8cc.html#458c844702d69839c667500d86ae49c8" title="We cannot use a method/function for this as we would lose the context in the setjmp...">CP_TRY</a>(search) {
<a name="l02206"></a>02206       <span class="keywordflow">if</span> (fd != NULL) {
<a name="l02207"></a>02207         StateInfo i1(fd,
<a name="l02208"></a>02208                      1,
<a name="l02209"></a>02209                      search-&gt;search_depth(),
<a name="l02210"></a>02210                      search-&gt;left_search_depth());  <span class="comment">// 1 for right branch</span>
<a name="l02211"></a>02211         <a class="code" href="classoperations__research_1_1Solver.html#6d2ae179cd6e66dc4cfd14307126b2cb" title="The PushState and PopState methods manipulates the states of the reversible objects...">PushState</a>(<a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a621568e4780981758b35943123d19ea5c070">CHOICE_POINT</a>, i1);
<a name="l02212"></a>02212         search-&gt;RefuteDecision(fd);
<a name="l02213"></a>02213         branches_++;
<a name="l02214"></a>02214         fd-&gt;Refute(<span class="keyword">this</span>);
<a name="l02215"></a>02215         search-&gt;AfterDecision(fd, <span class="keyword">false</span>);
<a name="l02216"></a>02216         search-&gt;RightMove();
<a name="l02217"></a>02217         fd = NULL;
<a name="l02218"></a>02218       }
<a name="l02219"></a>02219       Decision* d = NULL;
<a name="l02220"></a>02220       <span class="keywordflow">for</span> (;;) {
<a name="l02221"></a>02221         search-&gt;BeginNextDecision(db);
<a name="l02222"></a>02222         d = db-&gt;Next(<span class="keyword">this</span>);
<a name="l02223"></a>02223         search-&gt;EndNextDecision(db, d);
<a name="l02224"></a>02224         <span class="keywordflow">if</span> (d == fail_decision_) {
<a name="l02225"></a>02225           <a class="code" href="classoperations__research_1_1Solver.html#45534161a4dda7e1997bc0effd606648" title="Abandon the current branch in the search tree. A backtrack will follow.">Fail</a>();  <span class="comment">// fail now instead of after 2 branches.</span>
<a name="l02226"></a>02226         }
<a name="l02227"></a>02227         <span class="keywordflow">if</span> (d != NULL) {
<a name="l02228"></a>02228           <a class="code" href="classoperations__research_1_1Solver.html#5f87c832967334179f0f9c8d05380847" title="The Solver is responsible for creating the search tree.">DecisionModification</a> modification = search-&gt;ModifyDecision();
<a name="l02229"></a>02229           <span class="keywordflow">switch</span> (modification) {
<a name="l02230"></a>02230             <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#5f87c832967334179f0f9c8d053808479bbb245ecd3725f5a67fd4c8466ee678" title="Applies right branch first.">SWITCH_BRANCHES</a>: {
<a name="l02231"></a>02231               d = <a class="code" href="classoperations__research_1_1Solver.html#c668195dafc8397ada82227f605b0ed4" title="Registers the given object as being reversible.">RevAlloc</a>(<span class="keyword">new</span> ReverseDecision(d));
<a name="l02232"></a>02232             }  <span class="comment">// We reverse the decision and fall through the normal code.</span>
<a name="l02233"></a>02233             <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#5f87c832967334179f0f9c8d05380847a8dfadb94521ac7979525ae94f618d57" title="Keeps the default behavior, i.e.">NO_CHANGE</a>: {
<a name="l02234"></a>02234               decisions_++;
<a name="l02235"></a>02235               StateInfo i2(d,
<a name="l02236"></a>02236                            0,
<a name="l02237"></a>02237                            search-&gt;search_depth(),
<a name="l02238"></a>02238                            search-&gt;left_search_depth());  <span class="comment">// 0 for left branch</span>
<a name="l02239"></a>02239               <a class="code" href="classoperations__research_1_1Solver.html#6d2ae179cd6e66dc4cfd14307126b2cb" title="The PushState and PopState methods manipulates the states of the reversible objects...">PushState</a>(<a class="code" href="classoperations__research_1_1Solver.html#e6dee2b402434520635e66e9d58a621568e4780981758b35943123d19ea5c070">CHOICE_POINT</a>, i2);
<a name="l02240"></a>02240               search-&gt;ApplyDecision(d);
<a name="l02241"></a>02241               branches_++;
<a name="l02242"></a>02242               d-&gt;Apply(<span class="keyword">this</span>);
<a name="l02243"></a>02243               search-&gt;AfterDecision(d, <span class="keyword">true</span>);
<a name="l02244"></a>02244               search-&gt;LeftMove();
<a name="l02245"></a>02245               <span class="keywordflow">break</span>;
<a name="l02246"></a>02246             }
<a name="l02247"></a>02247             <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#5f87c832967334179f0f9c8d053808477a7d1379ff946fd786c118c3358ce438" title="Right branches are ignored.">KEEP_LEFT</a>: {
<a name="l02248"></a>02248               search-&gt;ApplyDecision(d);
<a name="l02249"></a>02249               d-&gt;Apply(<span class="keyword">this</span>);
<a name="l02250"></a>02250               search-&gt;AfterDecision(d, <span class="keyword">true</span>);
<a name="l02251"></a>02251               <span class="keywordflow">break</span>;
<a name="l02252"></a>02252             }
<a name="l02253"></a>02253             <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#5f87c832967334179f0f9c8d053808471322e52b2ac49d3b2975acb1f4603cae" title="Left branches are ignored.">KEEP_RIGHT</a>: {
<a name="l02254"></a>02254               search-&gt;RefuteDecision(d);
<a name="l02255"></a>02255               d-&gt;Refute(<span class="keyword">this</span>);
<a name="l02256"></a>02256               search-&gt;AfterDecision(d, <span class="keyword">false</span>);
<a name="l02257"></a>02257               <span class="keywordflow">break</span>;
<a name="l02258"></a>02258             }
<a name="l02259"></a>02259             <span class="keywordflow">case</span> <a class="code" href="classoperations__research_1_1Solver.html#5f87c832967334179f0f9c8d05380847f16daaa1fec927c823d4d0441f4c742b" title="Backtracks to the previous decisions, i.e.">KILL_BOTH</a>: {
<a name="l02260"></a>02260               <a class="code" href="classoperations__research_1_1Solver.html#45534161a4dda7e1997bc0effd606648" title="Abandon the current branch in the search tree. A backtrack will follow.">Fail</a>();
<a name="l02261"></a>02261             }
<a name="l02262"></a>02262           }
<a name="l02263"></a>02263         } <span class="keywordflow">else</span> {
<a name="l02264"></a>02264           <span class="keywordflow">break</span>;
<a name="l02265"></a>02265         }
<a name="l02266"></a>02266       }
<a name="l02267"></a>02267       <span class="keywordflow">if</span> (search-&gt;AcceptSolution()) {
<a name="l02268"></a>02268         search-&gt;IncrementSolutionCounter();
<a name="l02269"></a>02269         <span class="keywordflow">if</span> (!search-&gt;AtSolution() || !<a class="code" href="classoperations__research_1_1Solver.html#6d31c124181afb65d1441712e5f392d2" title="Returns true whether the current search has been created using a Solve() call instead...">CurrentlyInSolve</a>()) {
<a name="l02270"></a>02270           result = <span class="keyword">true</span>;
<a name="l02271"></a>02271           finish = <span class="keyword">true</span>;
<a name="l02272"></a>02272         } <span class="keywordflow">else</span> {
<a name="l02273"></a>02273           <a class="code" href="classoperations__research_1_1Solver.html#45534161a4dda7e1997bc0effd606648" title="Abandon the current branch in the search tree. A backtrack will follow.">Fail</a>();
<a name="l02274"></a>02274         }
<a name="l02275"></a>02275       } <span class="keywordflow">else</span> {
<a name="l02276"></a>02276         <a class="code" href="classoperations__research_1_1Solver.html#45534161a4dda7e1997bc0effd606648" title="Abandon the current branch in the search tree. A backtrack will follow.">Fail</a>();
<a name="l02277"></a>02277       }
<a name="l02278"></a>02278     } <a class="code" href="constraint__solver_8cc.html#40910cf9a9eb89daac6c929006a03416">CP_ON_FAIL</a> {
<a name="l02279"></a>02279       queue_-&gt;AfterFailure();
<a name="l02280"></a>02280       <span class="keywordflow">if</span> (search-&gt;should_finish()) {
<a name="l02281"></a>02281         fd = NULL;
<a name="l02282"></a>02282         BacktrackToSentinel(top_level ?
<a name="l02283"></a>02283                             <a class="code" href="namespaceoperations__research.html#750b3027192fb2ccc71c4b318aa4f850">ROOT_NODE_SENTINEL</a> :
<a name="l02284"></a>02284                             <a class="code" href="namespaceoperations__research.html#f1ab36801da5984b89300bc340ca2570">INITIAL_SEARCH_SENTINEL</a>);
<a name="l02285"></a>02285         result = <span class="keyword">false</span>;
<a name="l02286"></a>02286         finish = <span class="keyword">true</span>;
<a name="l02287"></a>02287         search-&gt;set_should_finish(<span class="keyword">false</span>);
<a name="l02288"></a>02288         search-&gt;set_should_restart(<span class="keyword">false</span>);
<a name="l02289"></a>02289         <span class="comment">// We do not need to push back the sentinel as we are exiting anyway.</span>
<a name="l02290"></a>02290       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (search-&gt;should_restart()) {
<a name="l02291"></a>02291         fd = NULL;
<a name="l02292"></a>02292         BacktrackToSentinel(top_level ?
<a name="l02293"></a>02293                             <a class="code" href="namespaceoperations__research.html#750b3027192fb2ccc71c4b318aa4f850">ROOT_NODE_SENTINEL</a> :
<a name="l02294"></a>02294                             <a class="code" href="namespaceoperations__research.html#f1ab36801da5984b89300bc340ca2570">INITIAL_SEARCH_SENTINEL</a>);
<a name="l02295"></a>02295         search-&gt;set_should_finish(<span class="keyword">false</span>);
<a name="l02296"></a>02296         search-&gt;set_should_restart(<span class="keyword">false</span>);
<a name="l02297"></a>02297         PushSentinel(top_level ? <a class="code" href="namespaceoperations__research.html#750b3027192fb2ccc71c4b318aa4f850">ROOT_NODE_SENTINEL</a> : <a class="code" href="namespaceoperations__research.html#f1ab36801da5984b89300bc340ca2570">INITIAL_SEARCH_SENTINEL</a>);
<a name="l02298"></a>02298         search-&gt;RestartSearch();
<a name="l02299"></a>02299       } <span class="keywordflow">else</span> {
<a name="l02300"></a>02300         <span class="keywordflow">if</span> (BacktrackOneLevel(&amp;fd)) {  <span class="comment">// no more solutions.</span>
<a name="l02301"></a>02301           result = <span class="keyword">false</span>;
<a name="l02302"></a>02302           finish = <span class="keyword">true</span>;
<a name="l02303"></a>02303         }
<a name="l02304"></a>02304       }
<a name="l02305"></a>02305     }
<a name="l02306"></a>02306   }
<a name="l02307"></a>02307   <span class="keywordflow">if</span> (result) {
<a name="l02308"></a>02308     search-&gt;ClearBuffer();
<a name="l02309"></a>02309   }
<a name="l02310"></a>02310   <span class="keywordflow">if</span> (top_level) {  <span class="comment">// Manage state after NextSolution().</span>
<a name="l02311"></a>02311     state_ = (result ? <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95d487136b6f055fa3fadfd6a3c12aa3a3" title="After successful NextSolution and before EndSearch.">AT_SOLUTION</a> : <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95401b0c79d1fa9261524343fce4dd5439" title="After failed NextSolution and before EndSearch.">NO_MORE_SOLUTIONS</a>);
<a name="l02312"></a>02312   }
<a name="l02313"></a>02313   <span class="keywordflow">return</span> result;
<a name="l02314"></a>02314 }
<a name="l02315"></a>02315 
<a name="l02316"></a>02316 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Solver.html#b95c7f997dbe36deb51e7c0213bdf445">Solver::EndSearch</a>() {
<a name="l02317"></a>02317   Search* <span class="keyword">const</span> search = searches_.back();
<a name="l02318"></a>02318   <span class="keywordflow">if</span> (search-&gt;backtrack_at_the_end_of_the_search()) {
<a name="l02319"></a>02319     BacktrackToSentinel(<a class="code" href="namespaceoperations__research.html#f1ab36801da5984b89300bc340ca2570">INITIAL_SEARCH_SENTINEL</a>);
<a name="l02320"></a>02320   } <span class="keywordflow">else</span> {
<a name="l02321"></a>02321     CHECK_GT(searches_.size(), 2);
<a name="l02322"></a>02322     <span class="keywordflow">if</span> (search-&gt;sentinel_pushed_ &gt; 0) {
<a name="l02323"></a>02323       JumpToSentinelWhenNested();
<a name="l02324"></a>02324     }
<a name="l02325"></a><a class="code" href="classoperations__research_1_1Solver.html#b95c7f997dbe36deb51e7c0213bdf445">02325</a>   }
<a name="l02326"></a>02326   search-&gt;ExitSearch();
<a name="l02327"></a>02327   search-&gt;Clear();
<a name="l02328"></a>02328   <span class="keywordflow">if</span> (2 == searches_.size()) {  <span class="comment">// Ending top level search.</span>
<a name="l02329"></a>02329     <span class="comment">// Restores the state.</span>
<a name="l02330"></a>02330     state_ = <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95c05654b6a7479316478744b3ce4a50df" title="Before search, after search.">OUTSIDE_SEARCH</a>;
<a name="l02331"></a>02331     <span class="comment">// Checks if we want to export the profile info.</span>
<a name="l02332"></a>02332     <span class="keywordflow">if</span> (!FLAGS_cp_profile_file.empty()) {
<a name="l02333"></a>02333       LOG(INFO) &lt;&lt; <span class="stringliteral">"Exporting profile to "</span> &lt;&lt; FLAGS_cp_profile_file;
<a name="l02334"></a>02334       <a class="code" href="classoperations__research_1_1Solver.html#acb810c77f38bf40bd88aae49dc02598" title="Exports the profiling information in a human readable overview.">ExportProfilingOverview</a>(FLAGS_cp_profile_file);
<a name="l02335"></a>02335     }
<a name="l02336"></a>02336   } <span class="keywordflow">else</span> {  <span class="comment">// We clean the nested Search.</span>
<a name="l02337"></a>02337     <span class="keyword">delete</span> search;
<a name="l02338"></a>02338     searches_.pop_back();
<a name="l02339"></a>02339   }
<a name="l02340"></a>02340 }
<a name="l02341"></a>02341 
<a name="l02342"></a>02342 <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1Solver.html#09eee3e49a13e6bb086712d171b2aef8" title="Checks whether the given assignment satisfies all the relevant constraints.">Solver::CheckAssignment</a>(Assignment* <span class="keyword">const</span> solution) {
<a name="l02343"></a>02343   CHECK(solution);
<a name="l02344"></a>02344   <span class="keywordflow">if</span> (state_ == <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95066908e143fd988a03767f05e682acaf" title="Executing the search code.">IN_SEARCH</a> || state_ == <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a950e9b4a7467a4d4f1a7da211e6c59251e" title="Executing the root node.">IN_ROOT_NODE</a>) {
<a name="l02345"></a>02345     LOG(FATAL) &lt;&lt; <span class="stringliteral">"CheckAssignment is only available at the top level."</span>;
<a name="l02346"></a>02346   }
<a name="l02347"></a>02347   <span class="comment">// Check state and go to OUTSIDE_SEARCH.</span>
<a name="l02348"></a>02348   Search* <span class="keyword">const</span> search = searches_.back();
<a name="l02349"></a>02349   search-&gt;set_created_by_solve(<span class="keyword">false</span>);  <span class="comment">// default behavior.</span>
<a name="l02350"></a>02350 
<a name="l02351"></a><a class="code" href="classoperations__research_1_1Solver.html#09eee3e49a13e6bb086712d171b2aef8">02351</a>   BacktrackToSentinel(<a class="code" href="namespaceoperations__research.html#f1ab36801da5984b89300bc340ca2570">INITIAL_SEARCH_SENTINEL</a>);
<a name="l02352"></a>02352   state_ = <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95c05654b6a7479316478744b3ce4a50df" title="Before search, after search.">OUTSIDE_SEARCH</a>;
<a name="l02353"></a>02353 
<a name="l02354"></a>02354   <span class="comment">// Push monitors and enter search.</span>
<a name="l02355"></a>02355   search-&gt;EnterSearch();
<a name="l02356"></a>02356 
<a name="l02357"></a>02357   <span class="comment">// Push sentinel and set decision builder.</span>
<a name="l02358"></a>02358   DCHECK_EQ(0, <a class="code" href="classoperations__research_1_1Solver.html#0f605fdb1307a1ac4931e6a181c9e154" title="Gets the number of nested searches.">SolveDepth</a>());
<a name="l02359"></a>02359   DCHECK_EQ(2, searches_.size());
<a name="l02360"></a>02360   PushSentinel(<a class="code" href="namespaceoperations__research.html#f1ab36801da5984b89300bc340ca2570">INITIAL_SEARCH_SENTINEL</a>);
<a name="l02361"></a>02361   search-&gt;BeginInitialPropagation();
<a name="l02362"></a>02362   <a class="code" href="constraint__solver_8cc.html#458c844702d69839c667500d86ae49c8" title="We cannot use a method/function for this as we would lose the context in the setjmp...">CP_TRY</a>(search) {
<a name="l02363"></a>02363     state_ = <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a950e9b4a7467a4d4f1a7da211e6c59251e" title="Executing the root node.">IN_ROOT_NODE</a>;
<a name="l02364"></a>02364     <a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a> * <span class="keyword">const</span> restore = <a class="code" href="classoperations__research_1_1Solver.html#19dfeb751bdd2c5f2d1900c05a3c31a2" title="Returns a DecisionBuilder which restores an Assignment (calls void Assignment::Restore())...">MakeRestoreAssignment</a>(solution);
<a name="l02365"></a>02365     restore-&gt;<a class="code" href="classoperations__research_1_1DecisionBuilder.html#3bcaa4dd991e8ddb4d0e48cfbca58592" title="This is the main method of the decision builder class.">Next</a>(<span class="keyword">this</span>);
<a name="l02366"></a>02366     ProcessConstraints();
<a name="l02367"></a>02367     search-&gt;EndInitialPropagation();
<a name="l02368"></a>02368     BacktrackToSentinel(<a class="code" href="namespaceoperations__research.html#f1ab36801da5984b89300bc340ca2570">INITIAL_SEARCH_SENTINEL</a>);
<a name="l02369"></a>02369     search-&gt;ClearBuffer();
<a name="l02370"></a>02370     state_ = <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a95c05654b6a7479316478744b3ce4a50df" title="Before search, after search.">OUTSIDE_SEARCH</a>;
<a name="l02371"></a>02371     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02372"></a>02372   } <a class="code" href="constraint__solver_8cc.html#40910cf9a9eb89daac6c929006a03416">CP_ON_FAIL</a> {
<a name="l02373"></a>02373     <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="pack_8cc.html#750b5d744c39a06bfb13e6eb010e35d0">index</a> = constraint_index_ &lt; constraints_list_.size() ?
<a name="l02374"></a>02374         constraint_index_ :
<a name="l02375"></a>02375         additional_constraints_parent_list_[additional_constraint_index_];
<a name="l02376"></a>02376     <a class="code" href="classoperations__research_1_1Constraint.html" title="A constraint is the main modeling object.">Constraint</a>* <span class="keyword">const</span> ct = constraints_list_[index];
<a name="l02377"></a>02377     <span class="keywordflow">if</span> (ct-&gt;<a class="code" href="classoperations__research_1_1PropagationBaseObject.html#89b827a71613c6c120d5ac326202df7e" title="Naming.">name</a>().empty()) {
<a name="l02378"></a>02378       LOG(INFO) &lt;&lt; <span class="stringliteral">"Failing constraint = "</span> &lt;&lt; ct-&gt;<a class="code" href="classoperations__research_1_1Constraint.html#f870afb5d6c1fba1d70b38eb581f8cca" title="Constraint class.">DebugString</a>();
<a name="l02379"></a>02379     } <span class="keywordflow">else</span> {
<a name="l02380"></a>02380       LOG(INFO) &lt;&lt; <span class="stringliteral">"Failing constraint = "</span> &lt;&lt; ct-&gt;<a class="code" href="classoperations__research_1_1PropagationBaseObject.html#89b827a71613c6c120d5ac326202df7e" title="Naming.">name</a>() &lt;&lt; <span class="stringliteral">":"</span>
<a name="l02381"></a>02381                 &lt;&lt; ct-&gt;<a class="code" href="classoperations__research_1_1Constraint.html#f870afb5d6c1fba1d70b38eb581f8cca" title="Constraint class.">DebugString</a>();
<a name="l02382"></a>02382     }
<a name="l02383"></a>02383     queue_-&gt;AfterFailure();
<a name="l02384"></a>02384     BacktrackToSentinel(<a class="code" href="namespaceoperations__research.html#f1ab36801da5984b89300bc340ca2570">INITIAL_SEARCH_SENTINEL</a>);
<a name="l02385"></a>02385     state_ = <a class="code" href="classoperations__research_1_1Solver.html#5b5712802e63dcd3ee5abfd37e0f2a9530b34e2664f9b1e2fb0d1347d7a87674" title="After search, the model is infeasible.">PROBLEM_INFEASIBLE</a>;
<a name="l02386"></a>02386     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02387"></a>02387   }
<a name="l02388"></a>02388 }
<a name="l02389"></a>02389 
<a name="l02390"></a>02390 <span class="keyword">namespace </span>{
<a name="l02391"></a>02391 <span class="keyword">class </span>AddConstraintDecisionBuilder : <span class="keyword">public</span> DecisionBuilder {
<a name="l02392"></a>02392  <span class="keyword">public</span>:
<a name="l02393"></a>02393   <span class="keyword">explicit</span> AddConstraintDecisionBuilder(<a class="code" href="classoperations__research_1_1Solver.html#697ed9eaa8955d595a023663ab1e8418">Constraint</a>* <span class="keyword">const</span> ct)
<a name="l02394"></a>02394       : <a class="code" href="constraint__solver_8cc.html#ebf1a2cc48de2bc261b73d521c1196c0">constraint_</a>(ct) {
<a name="l02395"></a>02395     CHECK_NOTNULL(ct);
<a name="l02396"></a>02396   }
<a name="l02397"></a>02397 
<a name="l02398"></a>02398   <span class="keyword">virtual</span> ~AddConstraintDecisionBuilder() {}
<a name="l02399"></a>02399 
<a name="l02400"></a>02400   <span class="keyword">virtual</span> Decision* Next(<a class="code" href="classoperations__research_1_1Solver.html#5b0165d313b9e2bfba93da6aff65052f">Solver</a>* <span class="keyword">const</span> solver) {
<a name="l02401"></a>02401     solver-&gt;AddConstraint(<a class="code" href="constraint__solver_8cc.html#ebf1a2cc48de2bc261b73d521c1196c0">constraint_</a>);
<a name="l02402"></a>02402     <span class="keywordflow">return</span> NULL;
<a name="l02403"></a>02403   }
<a name="l02404"></a>02404 
<a name="l02405"></a>02405   <span class="keyword">virtual</span> <span class="keywordtype">string</span> <a class="code" href="classoperations__research_1_1Solver.html#a7a09bf2f27ccbdc1d1d386bd94e142a" title="misc debug string.">DebugString</a>()<span class="keyword"> const </span>{
<a name="l02406"></a>02406     <span class="keywordflow">return</span> StringPrintf(<span class="stringliteral">"AddConstraintDecisionBuilder(%s)"</span>,
<a name="l02407"></a>02407                         <a class="code" href="constraint__solver_8cc.html#ebf1a2cc48de2bc261b73d521c1196c0">constraint_</a>-&gt;DebugString().c_str());
<a name="l02408"></a>02408   }
<a name="l02409"></a>02409  <span class="keyword">private</span>:
<a name="l02410"></a>02410   <a class="code" href="classoperations__research_1_1Solver.html#697ed9eaa8955d595a023663ab1e8418">Constraint</a>* <span class="keyword">const</span> <a class="code" href="constraint__solver_8cc.html#ebf1a2cc48de2bc261b73d521c1196c0">constraint_</a>;
<a name="l02411"></a>02411 };
<a name="l02412"></a>02412 }  <span class="comment">// namespace</span>
<a name="l02413"></a>02413 
<a name="l02414"></a>02414 DecisionBuilder* <a class="code" href="classoperations__research_1_1Solver.html#cdda06352e878920cf0b82c4bd033ae9" title="Returns a decision builder that will add the given constraint to the model.">Solver::MakeConstraintAdder</a>(<a class="code" href="classoperations__research_1_1Solver.html#697ed9eaa8955d595a023663ab1e8418">Constraint</a>* <span class="keyword">const</span> ct) {
<a name="l02415"></a>02415   <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1Solver.html#c668195dafc8397ada82227f605b0ed4" title="Registers the given object as being reversible.">RevAlloc</a>(<span class="keyword">new</span> AddConstraintDecisionBuilder(ct));
<a name="l02416"></a>02416 }
<a name="l02417"></a>02417 
<a name="l02418"></a>02418 <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1Solver.html#4ca185d2cb8bccaa1a7571aac84bb8dd" title="Checks whether adding this constraint will lead to an immediate failure.">Solver::CheckConstraint</a>(<a class="code" href="classoperations__research_1_1Solver.html#697ed9eaa8955d595a023663ab1e8418">Constraint</a>* <span class="keyword">const</span> ct) {
<a name="l02419"></a><a class="code" href="constraint__solver_8cc.html#ebf1a2cc48de2bc261b73d521c1196c0">02419</a>   <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1Solver.html#3ce9d85b90e2416f59ee89b13579c725">Solve</a>(<a class="code" href="classoperations__research_1_1Solver.html#cdda06352e878920cf0b82c4bd033ae9" title="Returns a decision builder that will add the given constraint to the model.">MakeConstraintAdder</a>(ct));
<a name="l02420"></a>02420 }
<a name="l02421"></a>02421 
<a name="l02422"></a>02422 <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1Solver.html#4610adb8edc9b5804370b55e84d9c99b" title="SolveAndCommit using a decision builder and up to three search monitors, usually...">Solver::SolveAndCommit</a>(DecisionBuilder* <span class="keyword">const</span> db,
<a name="l02423"></a><a class="code" href="classoperations__research_1_1Solver.html#cdda06352e878920cf0b82c4bd033ae9">02423</a>                             <a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>* <span class="keyword">const</span> m1) {
<a name="l02424"></a>02424   std::vector&lt;SearchMonitor*&gt; monitors;
<a name="l02425"></a>02425   monitors.push_back(m1);
<a name="l02426"></a>02426   <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1Solver.html#4610adb8edc9b5804370b55e84d9c99b" title="SolveAndCommit using a decision builder and up to three search monitors, usually...">SolveAndCommit</a>(db, monitors);
<a name="l02427"></a><a class="code" href="classoperations__research_1_1Solver.html#4ca185d2cb8bccaa1a7571aac84bb8dd">02427</a> }
<a name="l02428"></a>02428 
<a name="l02429"></a>02429 <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1Solver.html#4610adb8edc9b5804370b55e84d9c99b" title="SolveAndCommit using a decision builder and up to three search monitors, usually...">Solver::SolveAndCommit</a>(<a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* <span class="keyword">const</span> db) {
<a name="l02430"></a>02430   std::vector&lt;SearchMonitor*&gt; monitors;
<a name="l02431"></a><a class="code" href="classoperations__research_1_1Solver.html#879bcbe8ed7dcfbc3d93f35b09402423">02431</a>   <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1Solver.html#4610adb8edc9b5804370b55e84d9c99b" title="SolveAndCommit using a decision builder and up to three search monitors, usually...">SolveAndCommit</a>(db, monitors);
<a name="l02432"></a>02432 }
<a name="l02433"></a>02433 
<a name="l02434"></a>02434 <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1Solver.html#4610adb8edc9b5804370b55e84d9c99b" title="SolveAndCommit using a decision builder and up to three search monitors, usually...">Solver::SolveAndCommit</a>(<a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* <span class="keyword">const</span> db,
<a name="l02435"></a>02435                             <a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>* <span class="keyword">const</span> m1,
<a name="l02436"></a>02436                             <a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>* <span class="keyword">const</span> m2) {
<a name="l02437"></a>02437   std::vector&lt;SearchMonitor*&gt; monitors;
<a name="l02438"></a><a class="code" href="classoperations__research_1_1Solver.html#85fd9d56a17aa81fcb33410f8e6f5e49">02438</a>   monitors.push_back(m1);
<a name="l02439"></a>02439   monitors.push_back(m2);
<a name="l02440"></a>02440   <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1Solver.html#4610adb8edc9b5804370b55e84d9c99b" title="SolveAndCommit using a decision builder and up to three search monitors, usually...">SolveAndCommit</a>(db, monitors);
<a name="l02441"></a>02441 }
<a name="l02442"></a>02442 
<a name="l02443"></a><a class="code" href="classoperations__research_1_1Solver.html#960a0af1bd12b441511189d394df3d9f">02443</a> <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1Solver.html#4610adb8edc9b5804370b55e84d9c99b" title="SolveAndCommit using a decision builder and up to three search monitors, usually...">Solver::SolveAndCommit</a>(<a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* <span class="keyword">const</span> db,
<a name="l02444"></a>02444                             <a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>* <span class="keyword">const</span> m1,
<a name="l02445"></a>02445                             <a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>* <span class="keyword">const</span> m2,
<a name="l02446"></a>02446                             <a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>* <span class="keyword">const</span> m3) {
<a name="l02447"></a>02447   std::vector&lt;SearchMonitor*&gt; monitors;
<a name="l02448"></a>02448   monitors.push_back(m1);
<a name="l02449"></a>02449   monitors.push_back(m2);
<a name="l02450"></a>02450   monitors.push_back(m3);
<a name="l02451"></a>02451   <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1Solver.html#4610adb8edc9b5804370b55e84d9c99b" title="SolveAndCommit using a decision builder and up to three search monitors, usually...">SolveAndCommit</a>(db, monitors);
<a name="l02452"></a><a class="code" href="classoperations__research_1_1Solver.html#ed9077a5e312e08f6a0e472a718f7b7e">02452</a> }
<a name="l02453"></a>02453 
<a name="l02454"></a>02454 <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1Solver.html#4610adb8edc9b5804370b55e84d9c99b" title="SolveAndCommit using a decision builder and up to three search monitors, usually...">Solver::SolveAndCommit</a>(<a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* <span class="keyword">const</span> db,
<a name="l02455"></a>02455                             <span class="keyword">const</span> std::vector&lt;SearchMonitor*&gt;&amp; monitors) {
<a name="l02456"></a>02456   <a class="code" href="classoperations__research_1_1Solver.html#67ed18b7174df0eb483834276f19ce73" title="Opens a new top level search.">NewSearch</a>(db, monitors);
<a name="l02457"></a>02457   searches_.back()-&gt;set_created_by_solve(<span class="keyword">true</span>);  <span class="comment">// Overwrites default.</span>
<a name="l02458"></a>02458   searches_.back()-&gt;set_backtrack_at_the_end_of_the_search(<span class="keyword">false</span>);
<a name="l02459"></a>02459   <a class="code" href="classoperations__research_1_1Solver.html#11ed2a5d7bb8fb1a8967fee572ab9c47" title="namespace">NextSolution</a>();
<a name="l02460"></a>02460   <span class="keyword">const</span> <span class="keywordtype">bool</span> solution_found = searches_.back()-&gt;solution_counter() &gt; 0;
<a name="l02461"></a>02461   <a class="code" href="classoperations__research_1_1Solver.html#b95c7f997dbe36deb51e7c0213bdf445">EndSearch</a>();
<a name="l02462"></a>02462   <span class="keywordflow">return</span> solution_found;
<a name="l02463"></a><a class="code" href="classoperations__research_1_1Solver.html#4610adb8edc9b5804370b55e84d9c99b">02463</a> }
<a name="l02464"></a>02464 
<a name="l02465"></a>02465 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Solver.html#45534161a4dda7e1997bc0effd606648" title="Abandon the current branch in the search tree. A backtrack will follow.">Solver::Fail</a>() {
<a name="l02466"></a>02466   <span class="keywordflow">if</span> (fail_intercept_) {
<a name="l02467"></a>02467     fail_intercept_-&gt;Run();
<a name="l02468"></a>02468     <span class="keywordflow">return</span>;
<a name="l02469"></a>02469   }
<a name="l02470"></a>02470   <a class="code" href="constraint__solver_8cc.html#c13a1be8287ff935b4a93be3cc716e79">ConstraintSolverFailsHere</a>();
<a name="l02471"></a>02471   fails_++;
<a name="l02472"></a>02472   searches_.back()-&gt;BeginFail();
<a name="l02473"></a>02473   searches_.back()-&gt;JumpBack();
<a name="l02474"></a><a class="code" href="classoperations__research_1_1Solver.html#45534161a4dda7e1997bc0effd606648">02474</a> }
<a name="l02475"></a>02475 
<a name="l02476"></a>02476 <span class="comment">// ----- Cast Expression -----</span>
<a name="l02477"></a>02477 
<a name="l02478"></a>02478 <a class="code" href="classoperations__research_1_1IntExpr.html" title="The class IntExpr is the base of all integer expressions in constraint programming...">IntExpr</a>* Solver::CastExpression(<a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <span class="keyword">const</span> var)<span class="keyword"> const </span>{
<a name="l02479"></a>02479   <span class="keyword">const</span> IntegerCastInfo* <span class="keyword">const</span> cast_info =
<a name="l02480"></a>02480       FindOrNull(cast_information_, var);
<a name="l02481"></a>02481   <span class="keywordflow">if</span> (cast_info != NULL) {
<a name="l02482"></a>02482     <span class="keywordflow">return</span> cast_info-&gt;expression;
<a name="l02483"></a>02483   }
<a name="l02484"></a>02484   <span class="keywordflow">return</span> NULL;
<a name="l02485"></a>02485 }
<a name="l02486"></a>02486 
<a name="l02487"></a>02487 <span class="comment">// --- Propagation object names ---</span>
<a name="l02488"></a>02488 
<a name="l02489"></a>02489 <span class="keywordtype">string</span> Solver::GetName(<span class="keyword">const</span> <a class="code" href="classoperations__research_1_1Solver.html#cd6c49bd62ce1a1777a1c0e644f1186e">PropagationBaseObject</a>* <span class="keywordtype">object</span>) {
<a name="l02490"></a>02490   <span class="keyword">const</span> <span class="keywordtype">string</span>* <a class="code" href="default__search_8cc.html#1848ae81740c68c2502b2f176cfadcef" title="A name for logging purposes.">name</a> = FindOrNull(propagation_object_names_, <span class="keywordtype">object</span>);
<a name="l02491"></a>02491   <span class="keywordflow">if</span> (name != NULL) {
<a name="l02492"></a>02492     <span class="keywordflow">return</span> *name;
<a name="l02493"></a>02493   }
<a name="l02494"></a>02494   <span class="keyword">const</span> IntegerCastInfo* <span class="keyword">const</span> cast_info =
<a name="l02495"></a>02495       FindOrNull(cast_information_, <span class="keywordtype">object</span>);
<a name="l02496"></a>02496   <span class="keywordflow">if</span> (cast_info != NULL &amp;&amp; cast_info-&gt;expression != NULL) {
<a name="l02497"></a>02497     <span class="keywordflow">if</span> (cast_info-&gt;expression-&gt;HasName()) {
<a name="l02498"></a>02498       <span class="keywordflow">return</span> StringPrintf(<span class="stringliteral">"Var&lt;%s&gt;"</span>,
<a name="l02499"></a>02499                           cast_info-&gt;expression-&gt;name().c_str());
<a name="l02500"></a>02500     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FLAGS_cp_name_cast_variables) {
<a name="l02501"></a>02501       <span class="keywordflow">return</span> StringPrintf(<span class="stringliteral">"Var&lt;%s&gt;"</span>,
<a name="l02502"></a>02502                           cast_info-&gt;expression-&gt;DebugString().c_str());
<a name="l02503"></a>02503     } <span class="keywordflow">else</span> {
<a name="l02504"></a>02504       <span class="keyword">const</span> <span class="keywordtype">string</span> new_name =
<a name="l02505"></a>02505           StringPrintf(<span class="stringliteral">"CastVar&lt;%d&gt;"</span>, anonymous_variable_index_++);
<a name="l02506"></a>02506       propagation_object_names_[object] = new_name;
<a name="l02507"></a>02507       <span class="keywordflow">return</span> new_name;
<a name="l02508"></a>02508     }
<a name="l02509"></a>02509   }
<a name="l02510"></a>02510   <span class="keyword">const</span> <span class="keywordtype">string</span> base_name = <span class="keywordtype">object</span>-&gt;BaseName();
<a name="l02511"></a>02511   <span class="keywordflow">if</span> (FLAGS_cp_name_variables &amp;&amp; !base_name.empty()) {
<a name="l02512"></a>02512     <span class="keyword">const</span> <span class="keywordtype">string</span> new_name =
<a name="l02513"></a>02513         StringPrintf(<span class="stringliteral">"%s_%d"</span>, base_name.c_str(), anonymous_variable_index_++);
<a name="l02514"></a>02514     propagation_object_names_[object] = new_name;
<a name="l02515"></a>02515     <span class="keywordflow">return</span> new_name;
<a name="l02516"></a>02516   }
<a name="l02517"></a>02517   <span class="keywordflow">return</span> empty_name_;
<a name="l02518"></a>02518 }
<a name="l02519"></a>02519 
<a name="l02520"></a>02520 <span class="keywordtype">void</span> Solver::SetName(<span class="keyword">const</span> <a class="code" href="classoperations__research_1_1Solver.html#cd6c49bd62ce1a1777a1c0e644f1186e">PropagationBaseObject</a>* <span class="keywordtype">object</span>, <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; name) {
<a name="l02521"></a>02521   <span class="keywordflow">if</span> (parameters_.store_names
<a name="l02522"></a>02522       &amp;&amp; GetName(<span class="keywordtype">object</span>).compare(name) != 0) {  <span class="comment">// in particular if name.empty()</span>
<a name="l02523"></a>02523     propagation_object_names_[object] = name;
<a name="l02524"></a>02524   }
<a name="l02525"></a>02525 }
<a name="l02526"></a>02526 
<a name="l02527"></a>02527 <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1Solver.html#0066847d31e9271e0cbb445781f5d409" title="Returns whether the object has been named or not.">Solver::HasName</a>(<span class="keyword">const</span> <a class="code" href="classoperations__research_1_1Solver.html#cd6c49bd62ce1a1777a1c0e644f1186e">PropagationBaseObject</a>* <span class="keyword">const</span> <span class="keywordtype">object</span>)<span class="keyword"> const </span>{
<a name="l02528"></a>02528   <span class="keywordflow">return</span> ContainsKey(propagation_object_names_, <span class="keywordtype">object</span>) ||
<a name="l02529"></a>02529       (!<span class="keywordtype">object</span>-&gt;BaseName().empty() &amp;&amp; FLAGS_cp_name_variables);
<a name="l02530"></a>02530 }
<a name="l02531"></a>02531 
<a name="l02532"></a>02532 <span class="comment">// ------------------ Useful Operators ------------------</span>
<a name="l02533"></a>02533 
<a name="l02534"></a>02534 std::ostream&amp; <a class="code" href="namespaceoperations__research.html#82d722796fae06c7fb9d1d8a37c91c99" title="NOLINT.">operator &lt;&lt;</a>(std::ostream&amp; out, <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1Solver.html#5b0165d313b9e2bfba93da6aff65052f">Solver</a>* <span class="keyword">const</span> s) {  <span class="comment">// NOLINT</span>
<a name="l02535"></a>02535   out &lt;&lt; s-&gt;DebugString();
<a name="l02536"></a><a class="code" href="classoperations__research_1_1Solver.html#0066847d31e9271e0cbb445781f5d409">02536</a>   <span class="keywordflow">return</span> out;
<a name="l02537"></a>02537 }
<a name="l02538"></a>02538 
<a name="l02539"></a>02539 std::ostream&amp; <a class="code" href="namespaceoperations__research.html#82d722796fae06c7fb9d1d8a37c91c99" title="NOLINT.">operator &lt;&lt;</a>(std::ostream&amp; out, <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1BaseObject.html" title="Useful Search and Modeling Objects.">BaseObject</a>* <span class="keyword">const</span> o) {  <span class="comment">// NOLINT</span>
<a name="l02540"></a>02540   out &lt;&lt; o-&gt;<a class="code" href="classoperations__research_1_1BaseObject.html#f3317b4111dc4a7b6939cb9c52592e93">DebugString</a>();
<a name="l02541"></a>02541   <span class="keywordflow">return</span> out;
<a name="l02542"></a>02542 }
<a name="l02543"></a><a class="code" href="namespaceoperations__research.html#87fdc0126f6fc98ffb86ba1aa618f322">02543</a> 
<a name="l02544"></a>02544 <span class="comment">// ---------- PropagationBaseObject ---------</span>
<a name="l02545"></a>02545 
<a name="l02546"></a>02546 <span class="keywordtype">string</span> <a class="code" href="default__search_8cc.html#1848ae81740c68c2502b2f176cfadcef" title="A name for logging purposes.">PropagationBaseObject::name</a>()<span class="keyword"> const </span>{
<a name="l02547"></a>02547   <span class="comment">// TODO(user) : merge with GetName() code to remove a string copy.</span>
<a name="l02548"></a><a class="code" href="namespaceoperations__research.html#b563b868509e5ca6c0db57a038d863e4">02548</a>   <span class="keywordflow">return</span> <a class="code" href="ac4r__table_8cc.html#bd6bfbf6753a5deb0ce273fad6408e1e">solver_</a>-&gt;<a class="code" href="classoperations__research_1_1Solver.html#096d7a5f6986d4729b241f790811cc1d" title="Naming.">GetName</a>(<span class="keyword">this</span>);
<a name="l02549"></a>02549 }
<a name="l02550"></a>02550 
<a name="l02551"></a>02551 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1PropagationBaseObject.html#8b98dbf206a52e5f327b3640f71193da">PropagationBaseObject::set_name</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; name) {
<a name="l02552"></a>02552   <a class="code" href="ac4r__table_8cc.html#bd6bfbf6753a5deb0ce273fad6408e1e">solver_</a>-&gt;<a class="code" href="classoperations__research_1_1Solver.html#5ae7fc1d889cf010c17b9a05ebff5004">SetName</a>(<span class="keyword">this</span>, name);
<a name="l02553"></a>02553 }
<a name="l02554"></a>02554 
<a name="l02555"></a><a class="code" href="classoperations__research_1_1PropagationBaseObject.html#89b827a71613c6c120d5ac326202df7e">02555</a> <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1PropagationBaseObject.html#0f2327dbde296e49312e18cce89606c7" title="Returns whether the object has been named or not.">PropagationBaseObject::HasName</a>()<span class="keyword"> const </span>{
<a name="l02556"></a>02556   <span class="keywordflow">return</span> solver_-&gt;<a class="code" href="classoperations__research_1_1Solver.html#0066847d31e9271e0cbb445781f5d409" title="Returns whether the object has been named or not.">HasName</a>(<span class="keyword">this</span>);
<a name="l02557"></a>02557 }
<a name="l02558"></a>02558 
<a name="l02559"></a>02559 <span class="keywordtype">string</span> <a class="code" href="classoperations__research_1_1PropagationBaseObject.html#bf3a6b538e34511049ce77932548b2c1" title="Returns a base name for automatic naming.">PropagationBaseObject::BaseName</a>()<span class="keyword"> const </span>{
<a name="l02560"></a><a class="code" href="classoperations__research_1_1PropagationBaseObject.html#8b98dbf206a52e5f327b3640f71193da">02560</a>   <span class="keywordflow">return</span> <span class="stringliteral">""</span>;
<a name="l02561"></a>02561 }
<a name="l02562"></a>02562 
<a name="l02563"></a>02563 <span class="comment">// ---------- Decision Builder ----------</span>
<a name="l02564"></a><a class="code" href="classoperations__research_1_1PropagationBaseObject.html#0f2327dbde296e49312e18cce89606c7">02564</a> 
<a name="l02565"></a>02565 <span class="keywordtype">string</span> <a class="code" href="classoperations__research_1_1DecisionBuilder.html#b40ddf22d94afceffdf966b2e4a5e60d" title="Decision Builder.">DecisionBuilder::DebugString</a>()<span class="keyword"> const </span>{
<a name="l02566"></a>02566   <span class="keywordflow">return</span> <span class="stringliteral">"DecisionBuilder"</span>;
<a name="l02567"></a>02567 }
<a name="l02568"></a><a class="code" href="classoperations__research_1_1PropagationBaseObject.html#bf3a6b538e34511049ce77932548b2c1">02568</a> 
<a name="l02569"></a>02569 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1DecisionBuilder.html#61ba3c6d0da12541495cfea7e892ec99" title="This method will be called at the start of the search.">DecisionBuilder::AppendMonitors</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> solver,
<a name="l02570"></a>02570                                      std::vector&lt;SearchMonitor*&gt;* <span class="keyword">const</span> extras) {}
<a name="l02571"></a>02571 
<a name="l02572"></a>02572 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1DecisionBuilder.html#e7ca51f2177acc62d1a863694278ba20">DecisionBuilder::Accept</a>(<a class="code" href="classoperations__research_1_1ModelVisitor.html" title="Model visitor.">ModelVisitor</a>* <span class="keyword">const</span> visitor)<span class="keyword"> const </span>{}
<a name="l02573"></a>02573 
<a name="l02574"></a><a class="code" href="classoperations__research_1_1DecisionBuilder.html#b40ddf22d94afceffdf966b2e4a5e60d">02574</a> <span class="comment">// ---------- Decision and DecisionVisitor ----------</span>
<a name="l02575"></a>02575 
<a name="l02576"></a>02576 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Decision.html#33b0dbb456da08b13b087b39bf689a0a" title="Accepts the given visitor.">Decision::Accept</a>(<a class="code" href="classoperations__research_1_1DecisionVisitor.html" title="A DecisionVisitor is used to inspect a decision.">DecisionVisitor</a>* <span class="keyword">const</span> visitor)<span class="keyword"> const </span>{
<a name="l02577"></a>02577   visitor-&gt;<a class="code" href="classoperations__research_1_1DecisionVisitor.html#baff8996ecb74099352b015f418a2fbe">VisitUnknownDecision</a>();
<a name="l02578"></a><a class="code" href="classoperations__research_1_1DecisionBuilder.html#61ba3c6d0da12541495cfea7e892ec99">02578</a> }
<a name="l02579"></a>02579 
<a name="l02580"></a>02580 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1DecisionVisitor.html#e221fd58e12c43591bc2fbb6316246af">DecisionVisitor::VisitSetVariableValue</a>(<a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <span class="keyword">const</span> var, int64 <a class="code" href="search_8cc.html#21edc7ca4cc5802c8779d68556bc09cf">value</a>) {}
<a name="l02581"></a><a class="code" href="classoperations__research_1_1DecisionBuilder.html#e7ca51f2177acc62d1a863694278ba20">02581</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1DecisionVisitor.html#b33faf731850ebfc3574b741e072dae0">DecisionVisitor::VisitSplitVariableDomain</a>(<a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <span class="keyword">const</span> var,
<a name="l02582"></a>02582                                                int64 <a class="code" href="search_8cc.html#21edc7ca4cc5802c8779d68556bc09cf">value</a>,
<a name="l02583"></a>02583                                                <span class="keywordtype">bool</span> lower) {}
<a name="l02584"></a>02584 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1DecisionVisitor.html#baff8996ecb74099352b015f418a2fbe">DecisionVisitor::VisitUnknownDecision</a>() {}
<a name="l02585"></a><a class="code" href="classoperations__research_1_1Decision.html#33b0dbb456da08b13b087b39bf689a0a">02585</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1DecisionVisitor.html#852961fc968273745ab1cd207864089a">DecisionVisitor::VisitScheduleOrPostpone</a>(<a class="code" href="classoperations__research_1_1IntervalVar.html" title="Interval Var.">IntervalVar</a>* <span class="keyword">const</span> var,
<a name="l02586"></a>02586                                               int64 est) {}
<a name="l02587"></a>02587 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1DecisionVisitor.html#5f7b7ca0a12c0228edf144a7d7a04eb5">DecisionVisitor::VisitRankFirstInterval</a>(<a class="code" href="classoperations__research_1_1SequenceVar.html" title="SequenceVar.">SequenceVar</a>* <span class="keyword">const</span> sequence,
<a name="l02588"></a>02588                                              <span class="keywordtype">int</span> index) {}
<a name="l02589"></a><a class="code" href="classoperations__research_1_1DecisionVisitor.html#e221fd58e12c43591bc2fbb6316246af">02589</a> 
<a name="l02590"></a><a class="code" href="classoperations__research_1_1DecisionVisitor.html#b33faf731850ebfc3574b741e072dae0">02590</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1DecisionVisitor.html#f4f1a09fd57bf28b94b319491cf6fec6">DecisionVisitor::VisitRankLastInterval</a>(<a class="code" href="classoperations__research_1_1SequenceVar.html" title="SequenceVar.">SequenceVar</a>* <span class="keyword">const</span> sequence,
<a name="l02591"></a>02591                                             <span class="keywordtype">int</span> index) {}
<a name="l02592"></a>02592 
<a name="l02593"></a><a class="code" href="classoperations__research_1_1DecisionVisitor.html#baff8996ecb74099352b015f418a2fbe">02593</a> <span class="comment">// ---------- ModelVisitor ----------</span>
<a name="l02594"></a><a class="code" href="classoperations__research_1_1DecisionVisitor.html#852961fc968273745ab1cd207864089a">02594</a> 
<a name="l02595"></a>02595 <span class="comment">// Tags for constraints, arguments, extensions.</span>
<a name="l02596"></a><a class="code" href="classoperations__research_1_1DecisionVisitor.html#5f7b7ca0a12c0228edf144a7d7a04eb5">02596</a> 
<a name="l02597"></a>02597 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#f237b4297d5a32fad634e70e0f35881e" title="Constraint and Expression types.">ModelVisitor::kAbs</a>[] = <span class="stringliteral">"Abs"</span>;
<a name="l02598"></a>02598 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#12d92246d1c0fb5ff6b82d45c977bfc9">ModelVisitor::kAbsEqual</a>[] = <span class="stringliteral">"AbsEqual"</span>;
<a name="l02599"></a><a class="code" href="classoperations__research_1_1DecisionVisitor.html#f4f1a09fd57bf28b94b319491cf6fec6">02599</a> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#9d53b5ab302c38ad2b48781ef7c09714">ModelVisitor::kAllDifferent</a>[] = <span class="stringliteral">"AllDifferent"</span>;
<a name="l02600"></a>02600 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#f6e81e895ddd806684b6481e17830e57">ModelVisitor::kAllowedAssignments</a>[] = <span class="stringliteral">"AllowedAssignments"</span>;
<a name="l02601"></a>02601 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#f4f2f6bf053fb598e924ef6c8395c9d6">ModelVisitor::kBetween</a>[] = <span class="stringliteral">"Between"</span>;
<a name="l02602"></a>02602 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#04149f75f6acc506c609260f80b9d6db">ModelVisitor::kConvexPiecewise</a>[] = <span class="stringliteral">"ConvexPiecewise"</span>;
<a name="l02603"></a>02603 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#c8cd1e9c2a4e7f6b0439612681e23fb9">ModelVisitor::kCountEqual</a>[] = <span class="stringliteral">"CountEqual"</span>;
<a name="l02604"></a>02604 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#901b5725b984b498fb302cf86592418e">ModelVisitor::kCumulative</a>[] = <span class="stringliteral">"Cumulative"</span>;
<a name="l02605"></a>02605 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#2075ef405e2f03aabc0420352e714c10">ModelVisitor::kDeviation</a>[] = <span class="stringliteral">"Deviation"</span>;
<a name="l02606"></a>02606 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#4f8fa646f05f32445266b6b495c05de4">ModelVisitor::kDifference</a>[] = <span class="stringliteral">"Difference"</span>;
<a name="l02607"></a>02607 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#c69c0d4cf1ead77c36da8acf18194676">ModelVisitor::kDisjunctive</a>[] = <span class="stringliteral">"Disjunctive"</span>;
<a name="l02608"></a>02608 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#49245843ccae49bc4676975060163f88">ModelVisitor::kDistribute</a>[] = <span class="stringliteral">"Distribute"</span>;
<a name="l02609"></a>02609 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#f53b38d07e9a888fa528a2e6cb8537cf">ModelVisitor::kDivide</a>[] = <span class="stringliteral">"Divide"</span>;
<a name="l02610"></a>02610 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#99e162d169d5fc96e8fd71a5efa04409">ModelVisitor::kDurationExpr</a>[] = <span class="stringliteral">"DurationExpression"</span>;
<a name="l02611"></a>02611 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#3ef4a8a187561b5182f7578ea2dfd210">ModelVisitor::kElement</a>[] = <span class="stringliteral">"Element"</span>;
<a name="l02612"></a>02612 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#ae8e23d29479cc50508f7edccefb3537">ModelVisitor::kElementEqual</a>[] = <span class="stringliteral">"ElementEqual"</span>;
<a name="l02613"></a>02613 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#7d8a4a7185089e79385835fa75d8de5a">ModelVisitor::kEndExpr</a>[] = <span class="stringliteral">"EndExpression"</span>;
<a name="l02614"></a>02614 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#cc630d2155a877f5dd7230c511b1349b">ModelVisitor::kEquality</a>[] = <span class="stringliteral">"Equal"</span>;
<a name="l02615"></a>02615 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#34a2dcbfe5b8659d6c243ff7d5e52e0a">ModelVisitor::kFalseConstraint</a>[] = <span class="stringliteral">"FalseConstraint"</span>;
<a name="l02616"></a>02616 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#c9deb5675c83c9622c16d5ea83348dae">ModelVisitor::kGreater</a>[] = <span class="stringliteral">"Greater"</span>;
<a name="l02617"></a>02617 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#0f8ad9f298e615c31b81f617d5c56238">ModelVisitor::kGreaterOrEqual</a>[] = <span class="stringliteral">"GreaterOrEqual"</span>;
<a name="l02618"></a>02618 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#2925569323bc7a01152e05d02c4bce09">ModelVisitor::kIntegerVariable</a>[] = <span class="stringliteral">"IntegerVariable"</span>;
<a name="l02619"></a>02619 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#259012e2900d5fb84e7ff92f0d44cf37">ModelVisitor::kIntervalBinaryRelation</a>[] = <span class="stringliteral">"IntervalBinaryRelation"</span>;
<a name="l02620"></a>02620 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#68258c9c17b19ca4ded994013ca75e01">ModelVisitor::kIntervalDisjunction</a>[] = <span class="stringliteral">"IntervalDisjunction"</span>;
<a name="l02621"></a>02621 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#71f43f95983162ce498dade8e06f5e1c">ModelVisitor::kIntervalUnaryRelation</a>[] = <span class="stringliteral">"IntervalUnaryRelation"</span>;
<a name="l02622"></a>02622 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#3afc77916ce1c8573c520dd029d62ee4">ModelVisitor::kIntervalVariable</a>[] = <span class="stringliteral">"IntervalVariable"</span>;
<a name="l02623"></a>02623 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#b2ab7dfbe08c84a2d1314d38c0482a37">ModelVisitor::kIsBetween</a>[] = <span class="stringliteral">"IsBetween;"</span>;
<a name="l02624"></a>02624 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#6d31cbb260939681010e0941313a4e0e">ModelVisitor::kIsDifferent</a>[] = <span class="stringliteral">"IsDifferent"</span>;
<a name="l02625"></a>02625 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#8feccfbc16c375ee83a94a4d8edad55c">ModelVisitor::kIsEqual</a>[] = <span class="stringliteral">"IsEqual"</span>;
<a name="l02626"></a>02626 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#4d96c99325fc6eb41b6daf243b8d7bf2">ModelVisitor::kIsGreater</a>[] = <span class="stringliteral">"IsGreater"</span>;
<a name="l02627"></a>02627 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#883f273197f38719d051bf343bcf3782">ModelVisitor::kIsGreaterOrEqual</a>[] = <span class="stringliteral">"IsGreaterOrEqual"</span>;
<a name="l02628"></a>02628 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#a1aa94546128b14d4fb2959dec0481a5">ModelVisitor::kIsLess</a>[] = <span class="stringliteral">"IsLess"</span>;
<a name="l02629"></a>02629 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#fc7c4b24ee14135df5abd72ffdb674a2">ModelVisitor::kIsLessOrEqual</a>[] = <span class="stringliteral">"IsLessOrEqual"</span>;
<a name="l02630"></a>02630 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#3026ed97c97b223ac9655f44ef17c211">ModelVisitor::kIsMember</a>[] = <span class="stringliteral">"IsMember;"</span>;
<a name="l02631"></a>02631 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#ff3d0b871ad4b2bce8e1cc3c5544e0e6">ModelVisitor::kLess</a>[] = <span class="stringliteral">"Less"</span>;
<a name="l02632"></a>02632 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#7f423157942a9e13483cb47ea7eb0596">ModelVisitor::kLessOrEqual</a>[] = <span class="stringliteral">"LessOrEqual"</span>;
<a name="l02633"></a>02633 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#b7dfac8a95e08194a4c1f22bce571e2f">ModelVisitor::kLinkExprVar</a>[] = <span class="stringliteral">"CastExpressionIntoVariable"</span>;
<a name="l02634"></a>02634 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#662783708ea2228742e5376c1e0dcb13">ModelVisitor::kMapDomain</a>[] = <span class="stringliteral">"MapDomain"</span>;
<a name="l02635"></a>02635 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#4828f6c7561c772d860f5cef93eaa00d">ModelVisitor::kMax</a>[] = <span class="stringliteral">"Max"</span>;
<a name="l02636"></a>02636 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#81beb95062a8c9cea38ad1c30b2703ad">ModelVisitor::kMaxEqual</a>[] = <span class="stringliteral">"MaxEqual"</span>;
<a name="l02637"></a>02637 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#6f06624dec0cef88e369f20cc7626cc7">ModelVisitor::kMember</a>[] = <span class="stringliteral">"Member"</span>;
<a name="l02638"></a>02638 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#11527e1008e9035c77635f1b0bac9649">ModelVisitor::kMin</a>[] = <span class="stringliteral">"Min"</span>;
<a name="l02639"></a>02639 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#440e4514d9020272d4add11b95f2d419">ModelVisitor::kMinEqual</a>[] = <span class="stringliteral">"MinEqual"</span>;
<a name="l02640"></a>02640 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#3b69ad067003985cbb5d27426019c48f">ModelVisitor::kNoCycle</a>[] = <span class="stringliteral">"NoCycle"</span>;
<a name="l02641"></a>02641 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#c89808f8ad29c7685cee359604f81f1c">ModelVisitor::kNonEqual</a>[] = <span class="stringliteral">"NonEqual"</span>;
<a name="l02642"></a>02642 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#499497ff0c618be51b930ee2861b0282">ModelVisitor::kOpposite</a>[] = <span class="stringliteral">"Opposite"</span>;
<a name="l02643"></a>02643 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#a36752b1daacb1d0256429cd7f88fdca">ModelVisitor::kPack</a>[] = <span class="stringliteral">"Pack"</span>;
<a name="l02644"></a>02644 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#a520552506118ffdda400fc33759e080">ModelVisitor::kPathCumul</a>[] = <span class="stringliteral">"PathCumul"</span>;
<a name="l02645"></a>02645 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#75d76394543768bc3e195cfb9541f26e">ModelVisitor::kPerformedExpr</a>[] = <span class="stringliteral">"PerformedExpression"</span>;
<a name="l02646"></a>02646 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#f94f57464dec230abb4f9e0d7ce641ba">ModelVisitor::kPower</a>[] = <span class="stringliteral">"Power"</span>;
<a name="l02647"></a>02647 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#53106d7bfbc4d68f3a15b268464866c2">ModelVisitor::kProduct</a>[] = <span class="stringliteral">"Product"</span>;
<a name="l02648"></a>02648 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#a583902252e49cdbbe0da8208d738a3a">ModelVisitor::kScalProd</a>[] = <span class="stringliteral">"ScalarProduct"</span>;
<a name="l02649"></a>02649 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#955991ba66a3ed3f48fee5c08c2cc107">ModelVisitor::kScalProdEqual</a>[] = <span class="stringliteral">"ScalarProductEqual"</span>;
<a name="l02650"></a>02650 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#0a4e79e6b1c43f85541caca7d384311d">ModelVisitor::kScalProdGreaterOrEqual</a>[] =
<a name="l02651"></a>02651     <span class="stringliteral">"ScalarProductGreaterOrEqual"</span>;
<a name="l02652"></a>02652 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#87b6ec3e7fa83b67e26ecdf89aa047d5">ModelVisitor::kScalProdLessOrEqual</a>[] = <span class="stringliteral">"ScalarProductLessOrEqual"</span>;
<a name="l02653"></a>02653 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#be5a471c67142fbb3a2337c23b2fce1a">ModelVisitor::kSemiContinuous</a>[] = <span class="stringliteral">"SemiContinuous"</span>;
<a name="l02654"></a>02654 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#3fdbfba4f5a46688763629983082bff7">ModelVisitor::kSequenceVariable</a>[] = <span class="stringliteral">"SequenceVariable"</span>;
<a name="l02655"></a>02655 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#6dcdf7fec5d3f3ee8638b5148df418a0">ModelVisitor::kSortingConstraint</a>[] = <span class="stringliteral">"SortingConstraint"</span>;
<a name="l02656"></a>02656 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#b030b9586356bd410d3e944f2be7b3f7">ModelVisitor::kSquare</a>[] = <span class="stringliteral">"Square"</span>;
<a name="l02657"></a>02657 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#17fdff9cce2e850e6e24d1514447b5e7">ModelVisitor::kStartExpr</a>[]= <span class="stringliteral">"StartExpression"</span>;
<a name="l02658"></a>02658 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#82fa72cdeffb288a216a74107d13e279">ModelVisitor::kSum</a>[] = <span class="stringliteral">"Sum"</span>;
<a name="l02659"></a>02659 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#bba42d1775fe8a5d7e18dc034980377b">ModelVisitor::kSumEqual</a>[] = <span class="stringliteral">"SumEqual"</span>;
<a name="l02660"></a>02660 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#714cf066f84e3a56c0a8b261cb5b7ca6">ModelVisitor::kSumGreaterOrEqual</a>[] = <span class="stringliteral">"SumGreaterOrEqual"</span>;
<a name="l02661"></a>02661 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#8ac8fd8ddbe46a941a1689296baad984">ModelVisitor::kSumLessOrEqual</a>[] = <span class="stringliteral">"SumLessOrEqual"</span>;
<a name="l02662"></a>02662 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#4b2d45046ac9428afa60b34c760348b1">ModelVisitor::kTransition</a>[]= <span class="stringliteral">"Transition"</span>;
<a name="l02663"></a>02663 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#dd5629d92a6eab9043d3d96b25278d80">ModelVisitor::kTrueConstraint</a>[] = <span class="stringliteral">"TrueConstraint"</span>;
<a name="l02664"></a>02664 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#8e3b1e1767be3398b402fc0801fb2dd7">ModelVisitor::kVarBoundWatcher</a>[] = <span class="stringliteral">"VarBoundWatcher"</span>;
<a name="l02665"></a>02665 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#03d6f4ce75e9822c6874959b6445620a">ModelVisitor::kVarValueWatcher</a>[] = <span class="stringliteral">"VarValueWatcher"</span>;
<a name="l02666"></a>02666 
<a name="l02667"></a>02667 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#d0d68c9da1a9674a1c60b8236e6aa8f4" title="Extension names:.">ModelVisitor::kCountAssignedItemsExtension</a>[] = <span class="stringliteral">"CountAssignedItems"</span>;
<a name="l02668"></a>02668 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#d1fed75e372d8f8a7c411e322b2128e0">ModelVisitor::kCountUsedBinsExtension</a>[] = <span class="stringliteral">"CountUsedBins"</span>;
<a name="l02669"></a>02669 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#e4e71fbb68d896433470427eb34bba49">ModelVisitor::kInt64ToBoolExtension</a>[] = <span class="stringliteral">"Int64ToBoolFunction"</span>;
<a name="l02670"></a>02670 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#46015e0c5630a4aea9c68c91efbe7e87">ModelVisitor::kInt64ToInt64Extension</a>[] = <span class="stringliteral">"Int64ToInt64Function"</span>;
<a name="l02671"></a>02671 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#4cc5527e9cd79248c6c340a6a3219ad8">ModelVisitor::kObjectiveExtension</a>[] = <span class="stringliteral">"Objective"</span>;
<a name="l02672"></a>02672 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#31c783db2f49c971d9e5fd04b2f44afd">ModelVisitor::kSearchLimitExtension</a>[] = <span class="stringliteral">"SearchLimit"</span>;
<a name="l02673"></a>02673 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#bcbd28e3c23fb65eb82e94736969fb22">ModelVisitor::kUsageEqualVariableExtension</a>[] = <span class="stringliteral">"UsageEqualVariable"</span>;
<a name="l02674"></a>02674 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#a76042caf36172237c8f504a6498844c">ModelVisitor::kUsageLessConstantExtension</a>[] = <span class="stringliteral">"UsageLessConstant"</span>;
<a name="l02675"></a>02675 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#9b7bd80d7e781b8217abbaa9b983ba76">ModelVisitor::kVariableGroupExtension</a>[] = <span class="stringliteral">"VariableGroup"</span>;
<a name="l02676"></a>02676 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#207090253b5462feb778f1e2296225d3">ModelVisitor::kVariableUsageLessConstantExtension</a>[] =
<a name="l02677"></a>02677     <span class="stringliteral">"VariableUsageLessConstant"</span>;
<a name="l02678"></a>02678 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#e3e0223c51780ba07af39b5664c60f08">ModelVisitor::kWeightedSumOfAssignedEqualVariableExtension</a>[] =
<a name="l02679"></a>02679     <span class="stringliteral">"WeightedSumOfAssignedEqualVariable"</span>;
<a name="l02680"></a>02680 
<a name="l02681"></a>02681 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#4c53308d038be7910b43e68319342888" title="argument names:">ModelVisitor::kActiveArgument</a>[] = <span class="stringliteral">"active"</span>;
<a name="l02682"></a>02682 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#246551c143afeca38e54ee391221f794">ModelVisitor::kAssumePathsArgument</a>[] = <span class="stringliteral">"assume_paths"</span>;
<a name="l02683"></a>02683 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#bb5b0c6b461e53b5e469dec368524afa">ModelVisitor::kBranchesLimitArgument</a>[] = <span class="stringliteral">"branches_limit"</span>;
<a name="l02684"></a>02684 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#8a28f6a283b36f33e5c2dbf78fd469d1">ModelVisitor::kCapacityArgument</a>[] = <span class="stringliteral">"capacity"</span>;
<a name="l02685"></a>02685 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#f28bc6ea6c93475b07de4dba3bebe82c">ModelVisitor::kCardsArgument</a>[] = <span class="stringliteral">"cardinalities"</span>;
<a name="l02686"></a>02686 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#60faa007b3ec2b3498e87a85f8bb7dcd">ModelVisitor::kCoefficientsArgument</a>[] = <span class="stringliteral">"coefficients"</span>;
<a name="l02687"></a>02687 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#d7d22759d6e79c236d2048b98c6ed68d">ModelVisitor::kCountArgument</a>[] = <span class="stringliteral">"count"</span>;
<a name="l02688"></a>02688 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#aec7de2b7686703a04a4d4f7685a1a63">ModelVisitor::kCumulativeArgument</a>[] = <span class="stringliteral">"cumulative"</span>;
<a name="l02689"></a>02689 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#025dc5d4e2e6dc292e2a560267d35155">ModelVisitor::kCumulsArgument</a>[] = <span class="stringliteral">"cumuls"</span>;
<a name="l02690"></a>02690 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#bff9361235ca0ca8bbc14a794063912c">ModelVisitor::kDemandsArgument</a>[] = <span class="stringliteral">"demands"</span>;
<a name="l02691"></a>02691 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#520c279d7b58467967214b4cb21d2461">ModelVisitor::kDurationMinArgument</a>[] = <span class="stringliteral">"duration_min"</span>;
<a name="l02692"></a>02692 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#3661aa4d73fd410ddaf99d6b458bd259">ModelVisitor::kDurationMaxArgument</a>[] = <span class="stringliteral">"duration_max"</span>;
<a name="l02693"></a>02693 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#444e1ca24ca8beec7e4a3ce5dd15af2d">ModelVisitor::kEarlyCostArgument</a>[] = <span class="stringliteral">"early_cost"</span>;
<a name="l02694"></a>02694 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#87503235aa0fb7144f57d631b9231bb1">ModelVisitor::kEarlyDateArgument</a>[] = <span class="stringliteral">"early_date"</span>;
<a name="l02695"></a>02695 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#5e0edf9658d3039a51091660153d979a">ModelVisitor::kEndMinArgument</a>[] = <span class="stringliteral">"end_min"</span>;
<a name="l02696"></a>02696 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#98e416c6c7ff5aa71a24996a4b3c087e">ModelVisitor::kEndMaxArgument</a>[] = <span class="stringliteral">"end_max"</span>;
<a name="l02697"></a>02697 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#61afd1001ead67043c4e0f085189eaea">ModelVisitor::kExpressionArgument</a>[] = <span class="stringliteral">"expression"</span>;
<a name="l02698"></a>02698 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#41e6a88c68dab9ef9b464e2e7449b0af">ModelVisitor::kFailuresLimitArgument</a>[] = <span class="stringliteral">"failures_limit"</span>;
<a name="l02699"></a>02699 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#3b254aa01a5c2a2d06c899ca76bd7297">ModelVisitor::kFinalStatesArgument</a>[] = <span class="stringliteral">"final_states"</span>;
<a name="l02700"></a>02700 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#3564bba1b8dab3ae42e46b5ff47e2f30">ModelVisitor::kFixedChargeArgument</a>[] = <span class="stringliteral">"fixed_charge"</span>;
<a name="l02701"></a>02701 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#bb758de7b8748842781922b4283ce95f">ModelVisitor::kIndex2Argument</a>[] = <span class="stringliteral">"index2"</span>;
<a name="l02702"></a>02702 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#a1e297c6fb5caf00d9232b13b1802882">ModelVisitor::kIndexArgument</a>[] = <span class="stringliteral">"index"</span>;
<a name="l02703"></a>02703 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#2ce107313ce7196e785f2959020b74f2">ModelVisitor::kInitialState</a>[] = <span class="stringliteral">"initial_state"</span>;
<a name="l02704"></a>02704 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#b0c83054666cc242b5069d6a6a433b68">ModelVisitor::kIntervalArgument</a>[] = <span class="stringliteral">"interval"</span>;
<a name="l02705"></a>02705 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#ff5a82a9b1a253d046302f2616a9383c">ModelVisitor::kIntervalsArgument</a>[] = <span class="stringliteral">"intervals"</span>;
<a name="l02706"></a>02706 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#5b9dea6c0cc2a0ca1b79430a9b3a211a">ModelVisitor::kLateCostArgument</a>[] = <span class="stringliteral">"late_cost"</span>;
<a name="l02707"></a>02707 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#83205c64f88e9941d8767cc459e6c5ce">ModelVisitor::kLateDateArgument</a>[] = <span class="stringliteral">"late_date"</span>;
<a name="l02708"></a>02708 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#cd0feb9d9d925a318c3fa123784d52a0">ModelVisitor::kLeftArgument</a>[] = <span class="stringliteral">"left"</span>;
<a name="l02709"></a>02709 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#7213cf091575f0010732d47135e778e4">ModelVisitor::kMaxArgument</a>[] = <span class="stringliteral">"max_value"</span>;
<a name="l02710"></a>02710 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#a83a5b44afcd8f9ad11414355ea5869a">ModelVisitor::kMaximizeArgument</a>[] = <span class="stringliteral">"maximize"</span>;
<a name="l02711"></a>02711 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#5e5f836d61d9769129cc130e0b9093d5">ModelVisitor::kMinArgument</a>[] = <span class="stringliteral">"min_value"</span>;
<a name="l02712"></a>02712 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#52b7b98ec0bb4a98031aa25b69205d74">ModelVisitor::kNextsArgument</a>[] = <span class="stringliteral">"nexts"</span>;
<a name="l02713"></a>02713 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#d67dcce0ab471e17b90a4809891a6b10">ModelVisitor::kOptionalArgument</a>[] = <span class="stringliteral">"optional"</span>;
<a name="l02714"></a>02714 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#5860a3bea485a559d264b9981fff957b">ModelVisitor::kRangeArgument</a>[] = <span class="stringliteral">"range"</span>;
<a name="l02715"></a>02715 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#6c47313b9ec17de71b7890ce2b1428b8">ModelVisitor::kRelationArgument</a>[] = <span class="stringliteral">"relation"</span>;
<a name="l02716"></a>02716 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#852120192da92a3ca6fbbcb09bcb8b7e">ModelVisitor::kRightArgument</a>[] = <span class="stringliteral">"right"</span>;
<a name="l02717"></a>02717 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#2400305da392fec27dd268dd01ae5e76">ModelVisitor::kSequenceArgument</a>[] = <span class="stringliteral">"sequence"</span>;
<a name="l02718"></a>02718 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#96f367518be03a50369fbe0681d68bdf">ModelVisitor::kSequencesArgument</a>[] = <span class="stringliteral">"sequences"</span>;
<a name="l02719"></a>02719 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#f2556fbcf3669f7167b56e7a8c96ee5b">ModelVisitor::kSmartTimeCheckArgument</a>[] = <span class="stringliteral">"smart_time_check"</span>;
<a name="l02720"></a>02720 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#6e4650bdd2c49b50c446668331a95f7c">ModelVisitor::kSizeArgument</a>[] = <span class="stringliteral">"size"</span>;
<a name="l02721"></a>02721 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#12716d6c10e1b670cd9ee24eb839c9af">ModelVisitor::kSolutionLimitArgument</a>[] = <span class="stringliteral">"solutions_limit"</span>;
<a name="l02722"></a>02722 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#d4f65ed60edb2e405c9662d11c2558e1">ModelVisitor::kStartMinArgument</a>[] = <span class="stringliteral">"start_min"</span>;
<a name="l02723"></a>02723 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#0375054ffd52562c496a1404f505cdea">ModelVisitor::kStartMaxArgument</a>[] = <span class="stringliteral">"start_max"</span>;
<a name="l02724"></a>02724 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#0bc61bbf510f981d1b6f64fb383ae24c">ModelVisitor::kStepArgument</a>[] = <span class="stringliteral">"step"</span>;
<a name="l02725"></a>02725 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#64578e607ee4cd1e14208a78f5a7fb36">ModelVisitor::kTargetArgument</a>[] = <span class="stringliteral">"target_variable"</span>;
<a name="l02726"></a>02726 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#f90ec67001f655db6fc643c8746b38b6">ModelVisitor::kTimeLimitArgument</a>[] = <span class="stringliteral">"time_limit"</span>;
<a name="l02727"></a>02727 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#759d8a7331e1924cddfb493b3b585fff">ModelVisitor::kTransitsArgument</a>[] = <span class="stringliteral">"transits"</span>;
<a name="l02728"></a>02728 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#419f3b98090d93d516a8b91014e92e84">ModelVisitor::kTuplesArgument</a>[] = <span class="stringliteral">"tuples"</span>;
<a name="l02729"></a>02729 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#7d375108c569631374e3248701fa1c4e">ModelVisitor::kValueArgument</a>[] = <span class="stringliteral">"value"</span>;
<a name="l02730"></a>02730 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#9e63103e84b2e61255935c1dd2d48130">ModelVisitor::kValuesArgument</a>[] = <span class="stringliteral">"values"</span>;
<a name="l02731"></a>02731 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#b2d79708656faa6ca3381c630a5eeff7">ModelVisitor::kVarsArgument</a>[] = <span class="stringliteral">"variables"</span>;
<a name="l02732"></a>02732 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#b66c0292ecf9e2fcd1b8b848f1a3040c">ModelVisitor::kVariableArgument</a>[] = <span class="stringliteral">"variable"</span>;
<a name="l02733"></a>02733 
<a name="l02734"></a>02734 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#424ecb795cdbf034e7df929f850e4c4b" title="Operations.">ModelVisitor::kMirrorOperation</a>[] = <span class="stringliteral">"mirror"</span>;
<a name="l02735"></a>02735 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#a54ab84e6f6e700d1a9dee049a9e5ddf">ModelVisitor::kRelaxedMaxOperation</a>[] = <span class="stringliteral">"relaxed_max"</span>;
<a name="l02736"></a>02736 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#326f130b7811c91a37198e63fd580ecc">ModelVisitor::kRelaxedMinOperation</a>[] = <span class="stringliteral">"relaxed_min"</span>;
<a name="l02737"></a>02737 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#39c4bdf69e58faab655152f779e5e858">ModelVisitor::kSumOperation</a>[] = <span class="stringliteral">"sum"</span>;
<a name="l02738"></a>02738 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#2ab60d6e4bb3dfa90dbcd719dcaad758">ModelVisitor::kDifferenceOperation</a>[] = <span class="stringliteral">"difference"</span>;
<a name="l02739"></a>02739 <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#75443f9417cbc530eeafea7477684f3a">ModelVisitor::kProductOperation</a>[] = <span class="stringliteral">"product"</span>;
<a name="l02740"></a>02740 
<a name="l02741"></a>02741 
<a name="l02742"></a>02742 <span class="comment">// Methods</span>
<a name="l02743"></a>02743 
<a name="l02744"></a>02744 <a class="code" href="classoperations__research_1_1ModelVisitor.html#2ce0e07fea8345b36a2b8bb0b18a0366" title="Methods.">ModelVisitor::~ModelVisitor</a>() {}
<a name="l02745"></a>02745 
<a name="l02746"></a>02746 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#effe687b21079d1d50b407ebb43d9c02" title="Virtual methods for visitors.">ModelVisitor::BeginVisitModel</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; type_name) {}
<a name="l02747"></a>02747 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#2675aad9af880079211e264d04a23d48">ModelVisitor::EndVisitModel</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; type_name) {}
<a name="l02748"></a>02748 
<a name="l02749"></a>02749 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#2ee7b13da9c480a6dc87b12e1915b84c">ModelVisitor::BeginVisitConstraint</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; type_name,
<a name="l02750"></a>02750                                         <span class="keyword">const</span> Constraint* <span class="keyword">const</span> constraint) {}
<a name="l02751"></a>02751 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#59a147d5cabdf4a7d8ac032552e544df">ModelVisitor::EndVisitConstraint</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; type_name,
<a name="l02752"></a>02752                                       <span class="keyword">const</span> Constraint* <span class="keyword">const</span> constraint) {}
<a name="l02753"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#2ce0e07fea8345b36a2b8bb0b18a0366">02753</a> 
<a name="l02754"></a>02754 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#fcc7401ed9bf51e99225f02d0b03f214">ModelVisitor::BeginVisitExtension</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; type) {
<a name="l02755"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#effe687b21079d1d50b407ebb43d9c02">02755</a> }
<a name="l02756"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#2675aad9af880079211e264d04a23d48">02756</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#426dbfd4590f57a63ab12cde22c101fc">ModelVisitor::EndVisitExtension</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; type) {}
<a name="l02757"></a>02757 
<a name="l02758"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#2ee7b13da9c480a6dc87b12e1915b84c">02758</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#34fb5875ef83539724a754727ae32416">ModelVisitor::BeginVisitIntegerExpression</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; type_name,
<a name="l02759"></a>02759                                                <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1IntExpr.html" title="The class IntExpr is the base of all integer expressions in constraint programming...">IntExpr</a>* <span class="keyword">const</span> expr) {}
<a name="l02760"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#59a147d5cabdf4a7d8ac032552e544df">02760</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#34fce60f6a3e2d0dac622ae6aed65078">ModelVisitor::EndVisitIntegerExpression</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; type_name,
<a name="l02761"></a>02761                                              <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1IntExpr.html" title="The class IntExpr is the base of all integer expressions in constraint programming...">IntExpr</a>* <span class="keyword">const</span> expr) {}
<a name="l02762"></a>02762 
<a name="l02763"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#fcc7401ed9bf51e99225f02d0b03f214">02763</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#0fbf828553c55a9d78a1d4862258cfc8">ModelVisitor::VisitIntegerVariable</a>(<span class="keyword">const</span> <a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <span class="keyword">const</span> variable,
<a name="l02764"></a>02764                                         <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1IntExpr.html" title="The class IntExpr is the base of all integer expressions in constraint programming...">IntExpr</a>* <span class="keyword">const</span> delegate) {
<a name="l02765"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#426dbfd4590f57a63ab12cde22c101fc">02765</a>   <span class="keywordflow">if</span> (delegate != NULL) {
<a name="l02766"></a>02766     delegate-&gt;<a class="code" href="classoperations__research_1_1IntExpr.html#3a82999dc986a540904daf053ddb9269" title="Accepts the given visitor.">Accept</a>(<span class="keyword">this</span>);
<a name="l02767"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#34fb5875ef83539724a754727ae32416">02767</a>   }
<a name="l02768"></a>02768 }
<a name="l02769"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#34fce60f6a3e2d0dac622ae6aed65078">02769</a> 
<a name="l02770"></a>02770 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#0fbf828553c55a9d78a1d4862258cfc8">ModelVisitor::VisitIntegerVariable</a>(<span class="keyword">const</span> <a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <span class="keyword">const</span> variable,
<a name="l02771"></a>02771                                         <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; operation,
<a name="l02772"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#0fbf828553c55a9d78a1d4862258cfc8">02772</a>                                         int64 <a class="code" href="search_8cc.html#21edc7ca4cc5802c8779d68556bc09cf">value</a>,
<a name="l02773"></a>02773                                         <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <span class="keyword">const</span> delegate) {
<a name="l02774"></a>02774   <span class="keywordflow">if</span> (delegate != NULL) {
<a name="l02775"></a>02775     delegate-&gt;<a class="code" href="classoperations__research_1_1IntVar.html#13a1f9a3f350e785eecc80ad9f1ece65" title="Accepts the given visitor.">Accept</a>(<span class="keyword">this</span>);
<a name="l02776"></a>02776   }
<a name="l02777"></a>02777 }
<a name="l02778"></a>02778 
<a name="l02779"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#ff488f1549224a53dee5d12aa1d99417">02779</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#7947f27e65ae009af63aaae1cba84b4f">ModelVisitor::VisitIntervalVariable</a>(<span class="keyword">const</span> <a class="code" href="classoperations__research_1_1IntervalVar.html" title="Interval Var.">IntervalVar</a>* <span class="keyword">const</span> variable,
<a name="l02780"></a>02780                                          <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; operation,
<a name="l02781"></a>02781                                          <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1IntervalVar.html" title="Interval Var.">IntervalVar</a>* <span class="keyword">const</span> delegate) {
<a name="l02782"></a>02782   <span class="keywordflow">if</span> (delegate != NULL) {
<a name="l02783"></a>02783     delegate-&gt;<a class="code" href="classoperations__research_1_1IntervalVar.html#4a625f0d15b94c92546d05bee7c8b554" title="Accepts the given visitor.">Accept</a>(<span class="keyword">this</span>);
<a name="l02784"></a>02784   }
<a name="l02785"></a>02785 }
<a name="l02786"></a>02786 
<a name="l02787"></a>02787 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#7947f27e65ae009af63aaae1cba84b4f">ModelVisitor::VisitIntervalVariable</a>(<span class="keyword">const</span> <a class="code" href="classoperations__research_1_1IntervalVar.html" title="Interval Var.">IntervalVar</a>* <span class="keyword">const</span> variable,
<a name="l02788"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#7947f27e65ae009af63aaae1cba84b4f">02788</a>                                          <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; operation,
<a name="l02789"></a>02789                                          <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1IntervalVar.html" title="Interval Var.">IntervalVar</a>* <span class="keyword">const</span> * delegates,
<a name="l02790"></a>02790                                          <span class="keywordtype">int</span> size) {
<a name="l02791"></a>02791   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l02792"></a>02792     delegates[i]-&gt;<a class="code" href="classoperations__research_1_1IntervalVar.html#4a625f0d15b94c92546d05bee7c8b554" title="Accepts the given visitor.">Accept</a>(<span class="keyword">this</span>);
<a name="l02793"></a>02793   }
<a name="l02794"></a>02794 }
<a name="l02795"></a>02795 
<a name="l02796"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#fad18ce5d37a942bfa02ed2bbfc29aa7">02796</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#9ffd84a47b9d4705e7db2d62dc2e0676">ModelVisitor::VisitSequenceVariable</a>(<span class="keyword">const</span> <a class="code" href="classoperations__research_1_1SequenceVar.html" title="SequenceVar.">SequenceVar</a>* <span class="keyword">const</span> variable) {
<a name="l02797"></a>02797   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; variable-&gt;<a class="code" href="classoperations__research_1_1SequenceVar.html#377be35bc09d3725de4c7515ea60e55e" title="Returns the number of interval vars in the sequence.">size</a>(); ++i) {
<a name="l02798"></a>02798     variable-&gt;<a class="code" href="classoperations__research_1_1SequenceVar.html#17f7db24d131c87dbe7f76b23480adfc" title="Returns the index_th interval of the sequence.">Interval</a>(i)-&gt;<a class="code" href="classoperations__research_1_1IntervalVar.html#4a625f0d15b94c92546d05bee7c8b554" title="Accepts the given visitor.">Accept</a>(<span class="keyword">this</span>);
<a name="l02799"></a>02799   }
<a name="l02800"></a>02800 }
<a name="l02801"></a>02801 
<a name="l02802"></a>02802 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#0da215ee18e654bbc21952227ac2fe86" title="Visit integer arguments.">ModelVisitor::VisitIntegerArgument</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; arg_name, int64 <a class="code" href="search_8cc.html#21edc7ca4cc5802c8779d68556bc09cf">value</a>) {}
<a name="l02803"></a>02803 
<a name="l02804"></a>02804 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#773af5f276229883afb22a5ce65e719e">ModelVisitor::VisitIntegerArrayArgument</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; arg_name,
<a name="l02805"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#9ffd84a47b9d4705e7db2d62dc2e0676">02805</a>                                              <span class="keyword">const</span> int64* <span class="keyword">const</span> values,
<a name="l02806"></a>02806                                              <span class="keywordtype">int</span> size) {}
<a name="l02807"></a>02807 
<a name="l02808"></a>02808 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#0cbf0870ffc301ef65a94d68bfb206ab">ModelVisitor::VisitIntegerMatrixArgument</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; arg_name,
<a name="l02809"></a>02809                                               <span class="keyword">const</span> IntTupleSet&amp; tuples) {}
<a name="l02810"></a>02810 
<a name="l02811"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#0da215ee18e654bbc21952227ac2fe86">02811</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#013cebeb820b3428b4ac076f65f0efd8" title="Visit integer expression argument.">ModelVisitor::VisitIntegerExpressionArgument</a>(
<a name="l02812"></a>02812     <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; arg_name,
<a name="l02813"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#773af5f276229883afb22a5ce65e719e">02813</a>     <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1IntExpr.html" title="The class IntExpr is the base of all integer expressions in constraint programming...">IntExpr</a>* <span class="keyword">const</span> argument) {
<a name="l02814"></a>02814   argument-&gt;<a class="code" href="classoperations__research_1_1IntExpr.html#3a82999dc986a540904daf053ddb9269" title="Accepts the given visitor.">Accept</a>(<span class="keyword">this</span>);
<a name="l02815"></a>02815 }
<a name="l02816"></a>02816 
<a name="l02817"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#0cbf0870ffc301ef65a94d68bfb206ab">02817</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#85a2a6a7d07b014f8f249ead5ff14e55">ModelVisitor::VisitIntegerVariableArrayArgument</a>(
<a name="l02818"></a>02818     <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; arg_name,
<a name="l02819"></a>02819     <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <span class="keyword">const</span> * arguments,
<a name="l02820"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#013cebeb820b3428b4ac076f65f0efd8">02820</a>     <span class="keywordtype">int</span> size) {
<a name="l02821"></a>02821   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l02822"></a>02822     arguments[i]-&gt;<a class="code" href="classoperations__research_1_1IntVar.html#13a1f9a3f350e785eecc80ad9f1ece65" title="Accepts the given visitor.">Accept</a>(<span class="keyword">this</span>);
<a name="l02823"></a>02823   }
<a name="l02824"></a>02824 }
<a name="l02825"></a>02825 
<a name="l02826"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#85a2a6a7d07b014f8f249ead5ff14e55">02826</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#85a2a6a7d07b014f8f249ead5ff14e55">ModelVisitor::VisitIntegerVariableArrayArgument</a>(
<a name="l02827"></a>02827     <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; arg_name,
<a name="l02828"></a>02828     <span class="keyword">const</span> std::vector&lt;IntVar*&gt;&amp; arguments) {
<a name="l02829"></a>02829   <a class="code" href="classoperations__research_1_1ModelVisitor.html#85a2a6a7d07b014f8f249ead5ff14e55">VisitIntegerVariableArrayArgument</a>(arg_name,
<a name="l02830"></a>02830                                     arguments.data(),
<a name="l02831"></a>02831                                     arguments.size());
<a name="l02832"></a>02832 }
<a name="l02833"></a>02833 
<a name="l02834"></a>02834 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#32db054f59851fddaa05cdba6a8d51ce" title="Visit interval argument.">ModelVisitor::VisitIntervalArgument</a>(
<a name="l02835"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#63da7a3d7faa924551d27fecd4fe0ef4">02835</a>     <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; arg_name,
<a name="l02836"></a>02836     <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1IntervalVar.html" title="Interval Var.">IntervalVar</a>* <span class="keyword">const</span> argument) {
<a name="l02837"></a>02837   argument-&gt;<a class="code" href="classoperations__research_1_1IntervalVar.html#4a625f0d15b94c92546d05bee7c8b554" title="Accepts the given visitor.">Accept</a>(<span class="keyword">this</span>);
<a name="l02838"></a>02838 }
<a name="l02839"></a>02839 
<a name="l02840"></a>02840 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#ac69138e5f9a14f83c2058fb008d0efe">ModelVisitor::VisitIntervalArrayArgument</a>(
<a name="l02841"></a>02841     <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; arg_name,
<a name="l02842"></a>02842     <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1IntervalVar.html" title="Interval Var.">IntervalVar</a>* <span class="keyword">const</span> * arguments,
<a name="l02843"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#32db054f59851fddaa05cdba6a8d51ce">02843</a>     <span class="keywordtype">int</span> size) {
<a name="l02844"></a>02844   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l02845"></a>02845     arguments[i]-&gt;<a class="code" href="classoperations__research_1_1IntervalVar.html#4a625f0d15b94c92546d05bee7c8b554" title="Accepts the given visitor.">Accept</a>(<span class="keyword">this</span>);
<a name="l02846"></a>02846   }
<a name="l02847"></a>02847 }
<a name="l02848"></a>02848 
<a name="l02849"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#ac69138e5f9a14f83c2058fb008d0efe">02849</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#c8aaad5d68760ee6b4fc33d14a325c11" title="Visit sequence argument.">ModelVisitor::VisitSequenceArgument</a>(
<a name="l02850"></a>02850     <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; arg_name,
<a name="l02851"></a>02851     <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1SequenceVar.html" title="SequenceVar.">SequenceVar</a>* <span class="keyword">const</span> argument) {
<a name="l02852"></a>02852   argument-&gt;<a class="code" href="classoperations__research_1_1SequenceVar.html#fe2bed7193798e1b25410709c3a01723" title="Accepts the given visitor.">Accept</a>(<span class="keyword">this</span>);
<a name="l02853"></a>02853 }
<a name="l02854"></a>02854 
<a name="l02855"></a>02855 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#e887cbd16425ea5d3fa94ae00a8419ed">ModelVisitor::VisitSequenceArrayArgument</a>(
<a name="l02856"></a>02856     <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; arg_name,
<a name="l02857"></a>02857     <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1SequenceVar.html" title="SequenceVar.">SequenceVar</a>* <span class="keyword">const</span> * arguments,
<a name="l02858"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#c8aaad5d68760ee6b4fc33d14a325c11">02858</a>     <span class="keywordtype">int</span> size) {
<a name="l02859"></a>02859   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l02860"></a>02860     arguments[i]-&gt;<a class="code" href="classoperations__research_1_1SequenceVar.html#fe2bed7193798e1b25410709c3a01723" title="Accepts the given visitor.">Accept</a>(<span class="keyword">this</span>);
<a name="l02861"></a>02861   }
<a name="l02862"></a>02862 }
<a name="l02863"></a>02863 
<a name="l02864"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#e887cbd16425ea5d3fa94ae00a8419ed">02864</a> <span class="comment">// ----- Helpers -----</span>
<a name="l02865"></a>02865 
<a name="l02866"></a>02866 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#719a2da5db2552a65efa489b095069bf" title="Helpers.">ModelVisitor::VisitConstIntArrayArgument</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; arg_name,
<a name="l02867"></a>02867                                               <span class="keyword">const</span> ConstIntArray&amp;  values) {
<a name="l02868"></a>02868   <a class="code" href="classoperations__research_1_1ModelVisitor.html#773af5f276229883afb22a5ce65e719e">VisitIntegerArrayArgument</a>(arg_name, values.RawData(), values.size());
<a name="l02869"></a>02869 }
<a name="l02870"></a>02870 
<a name="l02871"></a>02871 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#90a8322dced3cbb7d3f665e2ff7d1c76">ModelVisitor::VisitInt64ToBoolExtension</a>(
<a name="l02872"></a>02872     ResultCallback1&lt;bool, int64&gt;* <span class="keyword">const</span> callback,
<a name="l02873"></a>02873     int64 index_min,
<a name="l02874"></a>02874     int64 index_max) {
<a name="l02875"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#719a2da5db2552a65efa489b095069bf">02875</a>   <span class="keywordflow">if</span> (callback == NULL) {
<a name="l02876"></a>02876     <span class="keywordflow">return</span>;
<a name="l02877"></a>02877   }
<a name="l02878"></a>02878   std::vector&lt;int64&gt; cached_results;
<a name="l02879"></a>02879   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = index_min; i &lt;= index_max; ++i) {
<a name="l02880"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#90a8322dced3cbb7d3f665e2ff7d1c76">02880</a>     cached_results.push_back(callback-&gt;Run(i));
<a name="l02881"></a>02881   }
<a name="l02882"></a>02882   <span class="comment">// TODO(user): VisitBoolArrayArgument?</span>
<a name="l02883"></a>02883   <a class="code" href="classoperations__research_1_1ModelVisitor.html#fcc7401ed9bf51e99225f02d0b03f214">BeginVisitExtension</a>(<a class="code" href="classoperations__research_1_1ModelVisitor.html#e4e71fbb68d896433470427eb34bba49">kInt64ToBoolExtension</a>);
<a name="l02884"></a>02884   <a class="code" href="classoperations__research_1_1ModelVisitor.html#0da215ee18e654bbc21952227ac2fe86" title="Visit integer arguments.">VisitIntegerArgument</a>(<a class="code" href="classoperations__research_1_1ModelVisitor.html#5e5f836d61d9769129cc130e0b9093d5">kMinArgument</a>, index_min);
<a name="l02885"></a>02885   <a class="code" href="classoperations__research_1_1ModelVisitor.html#0da215ee18e654bbc21952227ac2fe86" title="Visit integer arguments.">VisitIntegerArgument</a>(<a class="code" href="classoperations__research_1_1ModelVisitor.html#7213cf091575f0010732d47135e778e4">kMaxArgument</a>, index_max);
<a name="l02886"></a>02886   <a class="code" href="classoperations__research_1_1ModelVisitor.html#773af5f276229883afb22a5ce65e719e">VisitIntegerArrayArgument</a>(<a class="code" href="classoperations__research_1_1ModelVisitor.html#9e63103e84b2e61255935c1dd2d48130">kValuesArgument</a>,
<a name="l02887"></a>02887                             cached_results.data(),
<a name="l02888"></a>02888                             cached_results.size());
<a name="l02889"></a>02889   <a class="code" href="classoperations__research_1_1ModelVisitor.html#426dbfd4590f57a63ab12cde22c101fc">EndVisitExtension</a>(<a class="code" href="classoperations__research_1_1ModelVisitor.html#e4e71fbb68d896433470427eb34bba49">kInt64ToBoolExtension</a>);
<a name="l02890"></a>02890 }
<a name="l02891"></a>02891 
<a name="l02892"></a>02892 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#d7d97c154192477ed5cb89662af6a864">ModelVisitor::VisitInt64ToInt64Extension</a>(
<a name="l02893"></a>02893     <a class="code" href="classoperations__research_1_1Solver.html#fcf373cf1c769a34b1b89a5ba56fb473" title="Callback typedefs.">Solver::IndexEvaluator1</a>* <span class="keyword">const</span> callback,
<a name="l02894"></a>02894     int64 index_min,
<a name="l02895"></a>02895     int64 index_max) {
<a name="l02896"></a>02896   <span class="keywordflow">if</span> (callback == NULL) {
<a name="l02897"></a>02897     <span class="keywordflow">return</span>;
<a name="l02898"></a>02898   }
<a name="l02899"></a>02899   std::vector&lt;int64&gt; cached_results;
<a name="l02900"></a>02900   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = index_min; i &lt;= index_max; ++i) {
<a name="l02901"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#d7d97c154192477ed5cb89662af6a864">02901</a>     cached_results.push_back(callback-&gt;Run(i));
<a name="l02902"></a>02902   }
<a name="l02903"></a>02903   <a class="code" href="classoperations__research_1_1ModelVisitor.html#fcc7401ed9bf51e99225f02d0b03f214">BeginVisitExtension</a>(<a class="code" href="classoperations__research_1_1ModelVisitor.html#46015e0c5630a4aea9c68c91efbe7e87">kInt64ToInt64Extension</a>);
<a name="l02904"></a>02904   <a class="code" href="classoperations__research_1_1ModelVisitor.html#0da215ee18e654bbc21952227ac2fe86" title="Visit integer arguments.">VisitIntegerArgument</a>(<a class="code" href="classoperations__research_1_1ModelVisitor.html#5e5f836d61d9769129cc130e0b9093d5">kMinArgument</a>, index_min);
<a name="l02905"></a>02905   <a class="code" href="classoperations__research_1_1ModelVisitor.html#0da215ee18e654bbc21952227ac2fe86" title="Visit integer arguments.">VisitIntegerArgument</a>(<a class="code" href="classoperations__research_1_1ModelVisitor.html#7213cf091575f0010732d47135e778e4">kMaxArgument</a>, index_max);
<a name="l02906"></a>02906   <a class="code" href="classoperations__research_1_1ModelVisitor.html#773af5f276229883afb22a5ce65e719e">VisitIntegerArrayArgument</a>(<a class="code" href="classoperations__research_1_1ModelVisitor.html#9e63103e84b2e61255935c1dd2d48130">kValuesArgument</a>,
<a name="l02907"></a>02907                             cached_results.data(),
<a name="l02908"></a>02908                             cached_results.size());
<a name="l02909"></a>02909   <a class="code" href="classoperations__research_1_1ModelVisitor.html#426dbfd4590f57a63ab12cde22c101fc">EndVisitExtension</a>(<a class="code" href="classoperations__research_1_1ModelVisitor.html#46015e0c5630a4aea9c68c91efbe7e87">kInt64ToInt64Extension</a>);
<a name="l02910"></a>02910 }
<a name="l02911"></a>02911 
<a name="l02912"></a>02912 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ModelVisitor.html#95f1ebbd66ebfd9e6f2d8961486af6a3" title="Expands function as array when index min is 0.">ModelVisitor::VisitInt64ToInt64AsArray</a>(
<a name="l02913"></a>02913     <a class="code" href="classoperations__research_1_1Solver.html#fcf373cf1c769a34b1b89a5ba56fb473" title="Callback typedefs.">Solver::IndexEvaluator1</a>* <span class="keyword">const</span> callback,
<a name="l02914"></a>02914     <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; arg_name,
<a name="l02915"></a>02915     int64 index_max) {
<a name="l02916"></a>02916   <span class="keywordflow">if</span> (callback == NULL) {
<a name="l02917"></a>02917     <span class="keywordflow">return</span>;
<a name="l02918"></a>02918   }
<a name="l02919"></a>02919   std::vector&lt;int64&gt; cached_results;
<a name="l02920"></a>02920   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt;= index_max; ++i) {
<a name="l02921"></a><a class="code" href="classoperations__research_1_1ModelVisitor.html#95f1ebbd66ebfd9e6f2d8961486af6a3">02921</a>     cached_results.push_back(callback-&gt;Run(i));
<a name="l02922"></a>02922   }
<a name="l02923"></a>02923   <a class="code" href="classoperations__research_1_1ModelVisitor.html#773af5f276229883afb22a5ce65e719e">VisitIntegerArrayArgument</a>(arg_name,
<a name="l02924"></a>02924                             cached_results.data(),
<a name="l02925"></a>02925                             cached_results.size());
<a name="l02926"></a>02926 }
<a name="l02927"></a>02927 
<a name="l02928"></a>02928 <span class="comment">// ---------- Search Monitor ----------</span>
<a name="l02929"></a>02929 
<a name="l02930"></a>02930 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchMonitor.html#eb9c7b1f2ebe7f24cf33cdf958bbdd14" title="Beginning of the search.">SearchMonitor::EnterSearch</a>() {}
<a name="l02931"></a>02931 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchMonitor.html#1fed6f3ad3f1b44746297f19df0a85cf" title="Restart the search.">SearchMonitor::RestartSearch</a>() {}
<a name="l02932"></a>02932 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchMonitor.html#9a0fa1566b29e82604731222ba27810e" title="End of the search.">SearchMonitor::ExitSearch</a>() {}
<a name="l02933"></a>02933 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchMonitor.html#a36576cd72df52185b939bee5ee52a72" title="Before calling DecisionBuilder::Next.">SearchMonitor::BeginNextDecision</a>(DecisionBuilder* <span class="keyword">const</span> b) {}
<a name="l02934"></a>02934 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchMonitor.html#5e4c3bd36278ce32d488227ec365ce6e" title="After calling DecisionBuilder::Next, along with the returned decision.">SearchMonitor::EndNextDecision</a>(DecisionBuilder* <span class="keyword">const</span> b,
<a name="l02935"></a>02935                                     Decision* <span class="keyword">const</span> d) {}
<a name="l02936"></a>02936 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchMonitor.html#f2df1e3ba015e09eec6969862704ba6a" title="Before applying the decision.">SearchMonitor::ApplyDecision</a>(Decision* <span class="keyword">const</span> d) {}
<a name="l02937"></a>02937 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchMonitor.html#d8ac928f96207b054a3fd82fba7cbf54" title="Before refuting the Decision.">SearchMonitor::RefuteDecision</a>(Decision* <span class="keyword">const</span> d) {}
<a name="l02938"></a>02938 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchMonitor.html#ae0b2453238067c8f3ebe203a3f4940d" title="Just after refuting or applying the decision, apply is true after Apply.">SearchMonitor::AfterDecision</a>(Decision* <span class="keyword">const</span> d, <span class="keywordtype">bool</span> apply) {}
<a name="l02939"></a><a class="code" href="classoperations__research_1_1SearchMonitor.html#eb9c7b1f2ebe7f24cf33cdf958bbdd14">02939</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchMonitor.html#cc4cc0b62205946e9c5606fac920198c" title="Just when the failure occurs.">SearchMonitor::BeginFail</a>() {}
<a name="l02940"></a><a class="code" href="classoperations__research_1_1SearchMonitor.html#1fed6f3ad3f1b44746297f19df0a85cf">02940</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchMonitor.html#1ea992fcfd1bfa3dc3cb49e32af495fe" title="After completing the backtrack.">SearchMonitor::EndFail</a>() {}
<a name="l02941"></a><a class="code" href="classoperations__research_1_1SearchMonitor.html#9a0fa1566b29e82604731222ba27810e">02941</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchMonitor.html#193e8f9e10fb216be18489b78fe880fe" title="Before the initial propagation.">SearchMonitor::BeginInitialPropagation</a>() {}
<a name="l02942"></a><a class="code" href="classoperations__research_1_1SearchMonitor.html#a36576cd72df52185b939bee5ee52a72">02942</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchMonitor.html#2527278a6808ed107f11563ea53ca175" title="After the initial propagation.">SearchMonitor::EndInitialPropagation</a>() {}
<a name="l02943"></a><a class="code" href="classoperations__research_1_1SearchMonitor.html#5e4c3bd36278ce32d488227ec365ce6e">02943</a> <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1SearchMonitor.html#e78fd7a60e09bb2c08fa04ba8b35f87c" title="This method is called when a solution is found.">SearchMonitor::AcceptSolution</a>() { <span class="keywordflow">return</span> <span class="keyword">true</span>; }
<a name="l02944"></a>02944 <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1SearchMonitor.html#146c9540ccd639a9bbc6cefbb6756978" title="This method is called when a valid solution is found.">SearchMonitor::AtSolution</a>() { <span class="keywordflow">return</span> <span class="keyword">false</span>; }
<a name="l02945"></a><a class="code" href="classoperations__research_1_1SearchMonitor.html#f2df1e3ba015e09eec6969862704ba6a">02945</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchMonitor.html#a7bb4e8f2ebab4cc34d5e6d7812664c1" title="When the search tree is finished.">SearchMonitor::NoMoreSolutions</a>() {}
<a name="l02946"></a><a class="code" href="classoperations__research_1_1SearchMonitor.html#d8ac928f96207b054a3fd82fba7cbf54">02946</a> <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1SearchMonitor.html#9bc1249bb77ce92f7f899a4adbc7a415" title="When a local optimum is reached.">SearchMonitor::LocalOptimum</a>() { <span class="keywordflow">return</span> <span class="keyword">false</span>; }
<a name="l02947"></a><a class="code" href="classoperations__research_1_1SearchMonitor.html#ae0b2453238067c8f3ebe203a3f4940d">02947</a> <span class="keywordtype">bool</span> <a class="code" href="namespaceoperations__research.html#6994f97ca50f87770362b9b3724a2a21" title="Returns true if the search accepts the delta (actually checking this by calling AcceptDelta...">SearchMonitor::AcceptDelta</a>(<a class="code" href="classoperations__research_1_1Assignment.html" title="Assignment.">Assignment</a>* delta,
<a name="l02948"></a><a class="code" href="classoperations__research_1_1SearchMonitor.html#cc4cc0b62205946e9c5606fac920198c">02948</a>                                 <a class="code" href="classoperations__research_1_1Assignment.html" title="Assignment.">Assignment</a>* deltadelta) { <span class="keywordflow">return</span> <span class="keyword">true</span>; }
<a name="l02949"></a><a class="code" href="classoperations__research_1_1SearchMonitor.html#1ea992fcfd1bfa3dc3cb49e32af495fe">02949</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#277ed3fa0830998efd1f3333b6c0eae7" title="Notifies the search that a neighbor has been accepted by local search.">SearchMonitor::AcceptNeighbor</a>() {}
<a name="l02950"></a><a class="code" href="classoperations__research_1_1SearchMonitor.html#193e8f9e10fb216be18489b78fe880fe">02950</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchMonitor.html#46bba755961234b929a8dd2f440f1cfd" title="Tells the solver to kill the current search.">SearchMonitor::FinishCurrentSearch</a>() {
<a name="l02951"></a><a class="code" href="classoperations__research_1_1SearchMonitor.html#2527278a6808ed107f11563ea53ca175">02951</a>   <a class="code" href="classoperations__research_1_1SearchMonitor.html#b7032463a55bd7d196d1fefde47f0238">solver</a>()-&gt;<a class="code" href="classoperations__research_1_1Solver.html#6bcbc05024a15fd895048fbdc64a3764">searches_</a>.back()-&gt;set_should_finish(<span class="keyword">true</span>);
<a name="l02952"></a><a class="code" href="classoperations__research_1_1SearchMonitor.html#e78fd7a60e09bb2c08fa04ba8b35f87c">02952</a> }
<a name="l02953"></a><a class="code" href="classoperations__research_1_1SearchMonitor.html#146c9540ccd639a9bbc6cefbb6756978">02953</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchMonitor.html#9ca3cc572200fdc9b57d1638565cb7ac" title="Tells the solver to restart the current search.">SearchMonitor::RestartCurrentSearch</a>() {
<a name="l02954"></a><a class="code" href="classoperations__research_1_1SearchMonitor.html#a7bb4e8f2ebab4cc34d5e6d7812664c1">02954</a>   <a class="code" href="classoperations__research_1_1SearchMonitor.html#b7032463a55bd7d196d1fefde47f0238">solver</a>()-&gt;<a class="code" href="classoperations__research_1_1Solver.html#6bcbc05024a15fd895048fbdc64a3764">searches_</a>.back()-&gt;set_should_restart(<span class="keyword">true</span>);
<a name="l02955"></a><a class="code" href="classoperations__research_1_1SearchMonitor.html#9bc1249bb77ce92f7f899a4adbc7a415">02955</a> }
<a name="l02956"></a><a class="code" href="classoperations__research_1_1SearchMonitor.html#329bbd7c909dbbf7fcffc5bd6b86ab9d">02956</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchMonitor.html#a54fd83d1bcceecccd7d0a3106b6fc74" title="Periodic call to check limits in long running methods.">SearchMonitor::PeriodicCheck</a>() {}
<a name="l02957"></a>02957 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchMonitor.html#029e116116d8e034bf2144d79738d6dd" title="Accepts the given model visitor.">SearchMonitor::Accept</a>(<a class="code" href="classoperations__research_1_1ModelVisitor.html" title="Model visitor.">ModelVisitor</a>* <span class="keyword">const</span> visitor)<span class="keyword"> const </span>{}
<a name="l02958"></a><a class="code" href="classoperations__research_1_1SearchMonitor.html#f3136c9db38e07f98e4180931a1e223f">02958</a> <span class="comment">// A search monitors adds itself on the active search.</span>
<a name="l02959"></a><a class="code" href="classoperations__research_1_1SearchMonitor.html#46bba755961234b929a8dd2f440f1cfd">02959</a> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchMonitor.html#05a9194796e445458948d741395b99f8" title="Registers itself on the solver such that it gets notified of the search and propagation...">SearchMonitor::Install</a>() {
<a name="l02960"></a>02960   <a class="code" href="classoperations__research_1_1SearchMonitor.html#b7032463a55bd7d196d1fefde47f0238">solver</a>()-&gt;<a class="code" href="classoperations__research_1_1Solver.html#6bcbc05024a15fd895048fbdc64a3764">searches_</a>.back()-&gt;push_monitor(<span class="keyword">this</span>);
<a name="l02961"></a>02961 }
<a name="l02962"></a><a class="code" href="classoperations__research_1_1SearchMonitor.html#9ca3cc572200fdc9b57d1638565cb7ac">02962</a> 
<a name="l02963"></a>02963 <span class="comment">// ---------- Propagation Monitor -----------</span>
<a name="l02964"></a>02964 <a class="code" href="classoperations__research_1_1PropagationMonitor.html#6f1cf978d88b617fb5dc10faf30603c0" title="Propagation Monitor.">PropagationMonitor::PropagationMonitor</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s) : <a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a>(s) {}
<a name="l02965"></a><a class="code" href="classoperations__research_1_1SearchMonitor.html#a54fd83d1bcceecccd7d0a3106b6fc74">02965</a> 
<a name="l02966"></a><a class="code" href="classoperations__research_1_1SearchMonitor.html#029e116116d8e034bf2144d79738d6dd">02966</a> <a class="code" href="classoperations__research_1_1PropagationMonitor.html#d39d7927e758cb9ca671f25ce3868b2a">PropagationMonitor::~PropagationMonitor</a>() {}
<a name="l02967"></a>02967 
<a name="l02968"></a><a class="code" href="classoperations__research_1_1SearchMonitor.html#05a9194796e445458948d741395b99f8">02968</a> <span class="comment">// A propagation monitor listens to search events as well as</span>
<a name="l02969"></a>02969 <span class="comment">// propagation events.</span>
<a name="l02970"></a>02970 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1PropagationMonitor.html#6fadc131ceec7028bbdc979ee330c2d0" title="Install itself on the solver.">PropagationMonitor::Install</a>() {
<a name="l02971"></a>02971   <a class="code" href="classoperations__research_1_1SearchMonitor.html#05a9194796e445458948d741395b99f8" title="Registers itself on the solver such that it gets notified of the search and propagation...">SearchMonitor::Install</a>();
<a name="l02972"></a>02972   <a class="code" href="classoperations__research_1_1SearchMonitor.html#b7032463a55bd7d196d1fefde47f0238">solver</a>()-&gt;<a class="code" href="classoperations__research_1_1Solver.html#51c801ef84c5843e4b9a1ba489a15f0f" title="Adds the propagation monitor to the solver.">AddPropagationMonitor</a>(<span class="keyword">this</span>);
<a name="l02973"></a><a class="code" href="classoperations__research_1_1PropagationMonitor.html#6f1cf978d88b617fb5dc10faf30603c0">02973</a> }
<a name="l02974"></a>02974 
<a name="l02975"></a><a class="code" href="classoperations__research_1_1PropagationMonitor.html#d39d7927e758cb9ca671f25ce3868b2a">02975</a> <span class="comment">// ---------- Trace ----------</span>
<a name="l02976"></a>02976 
<a name="l02977"></a>02977 <span class="keyword">class </span><a class="code" href="classoperations__research_1_1Trace.html" title="Trace.">Trace</a> : <span class="keyword">public</span> <a class="code" href="classoperations__research_1_1PropagationMonitor.html" title="PropagationMonitor.">PropagationMonitor</a> {
<a name="l02978"></a>02978  <span class="keyword">public</span>:
<a name="l02979"></a><a class="code" href="classoperations__research_1_1PropagationMonitor.html#6fadc131ceec7028bbdc979ee330c2d0">02979</a>   <span class="keyword">explicit</span> <a class="code" href="classoperations__research_1_1Trace.html" title="Trace.">Trace</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s) : <a class="code" href="classoperations__research_1_1PropagationMonitor.html" title="PropagationMonitor.">PropagationMonitor</a>(s) {}
<a name="l02980"></a>02980 
<a name="l02981"></a>02981   <span class="keyword">virtual</span> ~<a class="code" href="classoperations__research_1_1Trace.html" title="Trace.">Trace</a>() {}
<a name="l02982"></a>02982 
<a name="l02983"></a>02983   <span class="keyword">virtual</span> <span class="keywordtype">void</span> BeginConstraintInitialPropagation(
<a name="l02984"></a>02984       <span class="keyword">const</span> Constraint* <span class="keyword">const</span> constraint) {
<a name="l02985"></a>02985     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l02986"></a><a class="code" href="classoperations__research_1_1Trace.html">02986</a>       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;BeginConstraintInitialPropagation(constraint);
<a name="l02987"></a>02987     }
<a name="l02988"></a><a class="code" href="classoperations__research_1_1Trace.html#bf0186a4d599895e5993f01e3ee8682c">02988</a>   }
<a name="l02989"></a>02989 
<a name="l02990"></a><a class="code" href="classoperations__research_1_1Trace.html#165fc0f6ce558498695e18b8ce2a7f13">02990</a>   <span class="keyword">virtual</span> <span class="keywordtype">void</span> EndConstraintInitialPropagation(
<a name="l02991"></a>02991       <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1Constraint.html" title="A constraint is the main modeling object.">Constraint</a>* <span class="keyword">const</span> constraint) {
<a name="l02992"></a><a class="code" href="classoperations__research_1_1Trace.html#1a3b8200b27afeb8e604fb7530ab40bb">02992</a>     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l02993"></a>02993       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;EndConstraintInitialPropagation(constraint);
<a name="l02994"></a>02994     }
<a name="l02995"></a>02995   }
<a name="l02996"></a>02996 
<a name="l02997"></a>02997   <span class="keyword">virtual</span> <span class="keywordtype">void</span> BeginNestedConstraintInitialPropagation(
<a name="l02998"></a>02998       <span class="keyword">const</span> Constraint* <span class="keyword">const</span> parent,
<a name="l02999"></a><a class="code" href="classoperations__research_1_1Trace.html#e9655fe7dcaf8eac9bc856bb086e7a50">02999</a>       <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1Constraint.html" title="A constraint is the main modeling object.">Constraint</a>* <span class="keyword">const</span> nested) {
<a name="l03000"></a>03000     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03001"></a>03001       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;BeginNestedConstraintInitialPropagation(parent, nested);
<a name="l03002"></a>03002     }
<a name="l03003"></a>03003   }
<a name="l03004"></a>03004 
<a name="l03005"></a>03005   <span class="keyword">virtual</span> <span class="keywordtype">void</span> EndNestedConstraintInitialPropagation(
<a name="l03006"></a><a class="code" href="classoperations__research_1_1Trace.html#32be6ccfa95ed8887a1368f246f05f7f">03006</a>       <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1Constraint.html" title="A constraint is the main modeling object.">Constraint</a>* <span class="keyword">const</span> parent,
<a name="l03007"></a>03007       <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1Constraint.html" title="A constraint is the main modeling object.">Constraint</a>* <span class="keyword">const</span> nested) {
<a name="l03008"></a>03008     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03009"></a>03009       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;EndNestedConstraintInitialPropagation(parent, nested);
<a name="l03010"></a>03010     }
<a name="l03011"></a>03011   }
<a name="l03012"></a>03012 
<a name="l03013"></a>03013   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#9844237a85ad9809bc8b4647b79bc5be" title="Exported Methods for Unit Tests.">RegisterDemon</a>(<span class="keyword">const</span> <a class="code" href="classoperations__research_1_1Demon.html" title="A Demon is the base element of a propagation queue.">Demon</a>* <span class="keyword">const</span> <a class="code" href="constraint__solver_8cc.html#f800ac63ce2b6285ec62408b0f17acc3">demon</a>) {
<a name="l03014"></a><a class="code" href="classoperations__research_1_1Trace.html#f5a16fa15abf1c65b6d541bd0ac59519">03014</a>     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03015"></a>03015       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;RegisterDemon(demon);
<a name="l03016"></a>03016     }
<a name="l03017"></a>03017   }
<a name="l03018"></a>03018 
<a name="l03019"></a>03019   <span class="keyword">virtual</span> <span class="keywordtype">void</span> BeginDemonRun(<span class="keyword">const</span> Demon* <span class="keyword">const</span> demon) {
<a name="l03020"></a>03020     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03021"></a>03021       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;BeginDemonRun(demon);
<a name="l03022"></a><a class="code" href="classoperations__research_1_1Trace.html#a10bbb7d9af4f6360c1f3e13aeaa04d2">03022</a>     }
<a name="l03023"></a>03023   }
<a name="l03024"></a>03024 
<a name="l03025"></a>03025   <span class="keyword">virtual</span> <span class="keywordtype">void</span> EndDemonRun(<span class="keyword">const</span> Demon* <span class="keyword">const</span> demon) {
<a name="l03026"></a>03026     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03027"></a>03027       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;EndDemonRun(demon);
<a name="l03028"></a><a class="code" href="classoperations__research_1_1Trace.html#ca3eef8afb2a82c2258e9f1e8c33f36c">03028</a>     }
<a name="l03029"></a>03029   }
<a name="l03030"></a>03030 
<a name="l03031"></a>03031   <span class="keyword">virtual</span> <span class="keywordtype">void</span> StartProcessingIntegerVariable(<span class="keyword">const</span> IntVar* <span class="keyword">const</span> var) {
<a name="l03032"></a>03032     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03033"></a>03033       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;StartProcessingIntegerVariable(var);
<a name="l03034"></a><a class="code" href="classoperations__research_1_1Trace.html#545dc02fafa0aab9705ddcf931d9fd4d">03034</a>     }
<a name="l03035"></a>03035   }
<a name="l03036"></a>03036 
<a name="l03037"></a>03037   <span class="keyword">virtual</span> <span class="keywordtype">void</span> EndProcessingIntegerVariable(<span class="keyword">const</span> IntVar* <span class="keyword">const</span> var) {
<a name="l03038"></a>03038     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03039"></a>03039       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;EndProcessingIntegerVariable(var);
<a name="l03040"></a><a class="code" href="classoperations__research_1_1Trace.html#ecc5ff64209c30fee4cd585fc3ac0ba5">03040</a>     }
<a name="l03041"></a>03041   }
<a name="l03042"></a>03042 
<a name="l03043"></a>03043   <span class="keyword">virtual</span> <span class="keywordtype">void</span> PushContext(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; context) {
<a name="l03044"></a>03044     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03045"></a>03045       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;PushContext(context);
<a name="l03046"></a><a class="code" href="classoperations__research_1_1Trace.html#30a1d346f824463aff7a1afb16b395ac">03046</a>     }
<a name="l03047"></a>03047   }
<a name="l03048"></a>03048 
<a name="l03049"></a>03049   <span class="keyword">virtual</span> <span class="keywordtype">void</span> PopContext() {
<a name="l03050"></a>03050     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03051"></a>03051       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;PopContext();
<a name="l03052"></a><a class="code" href="classoperations__research_1_1Trace.html#7c31f975df0a254b1857194cc509265f">03052</a>     }
<a name="l03053"></a>03053   }
<a name="l03054"></a>03054 
<a name="l03055"></a>03055   <span class="comment">// IntExpr modifiers.</span>
<a name="l03056"></a>03056   <span class="keyword">virtual</span> <span class="keywordtype">void</span> SetMin(IntExpr* <span class="keyword">const</span> expr, int64 new_min) {
<a name="l03057"></a>03057     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03058"></a><a class="code" href="classoperations__research_1_1Trace.html#a7002076672392e10a398c2c975ed3c2">03058</a>       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;SetMin(expr, new_min);
<a name="l03059"></a>03059     }
<a name="l03060"></a>03060   }
<a name="l03061"></a>03061 
<a name="l03062"></a>03062   <span class="keyword">virtual</span> <span class="keywordtype">void</span> SetMax(IntExpr* <span class="keyword">const</span> expr, int64 new_max) {
<a name="l03063"></a>03063     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03064"></a>03064       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;SetMax(expr, new_max);
<a name="l03065"></a><a class="code" href="classoperations__research_1_1Trace.html#081669cc86f32186cd5e174fa3f34520">03065</a>     }
<a name="l03066"></a>03066   }
<a name="l03067"></a>03067 
<a name="l03068"></a>03068   <span class="keyword">virtual</span> <span class="keywordtype">void</span> SetRange(IntExpr* <span class="keyword">const</span> expr, int64 new_min, int64 new_max) {
<a name="l03069"></a>03069     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03070"></a>03070       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;SetRange(expr, new_min, new_max);
<a name="l03071"></a><a class="code" href="classoperations__research_1_1Trace.html#3c740b67f522040e9a95879f706d3be6">03071</a>     }
<a name="l03072"></a>03072   }
<a name="l03073"></a>03073 
<a name="l03074"></a>03074   <span class="comment">// IntVar modifiers.</span>
<a name="l03075"></a>03075   <span class="keyword">virtual</span> <span class="keywordtype">void</span> SetMin(IntVar* <span class="keyword">const</span> var, int64 new_min) {
<a name="l03076"></a>03076     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03077"></a><a class="code" href="classoperations__research_1_1Trace.html#4345aff100509e77d2b7b5003176475d">03077</a>       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;SetMin(var, new_min);
<a name="l03078"></a>03078     }
<a name="l03079"></a>03079   }
<a name="l03080"></a>03080 
<a name="l03081"></a>03081   <span class="keyword">virtual</span> <span class="keywordtype">void</span> SetMax(IntVar* <span class="keyword">const</span> var, int64 new_max) {
<a name="l03082"></a>03082     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03083"></a>03083       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;SetMax(var, new_max);
<a name="l03084"></a><a class="code" href="classoperations__research_1_1Trace.html#562e5a4a5bec087a711a8054dfccd978">03084</a>     }
<a name="l03085"></a>03085   }
<a name="l03086"></a>03086 
<a name="l03087"></a>03087   <span class="keyword">virtual</span> <span class="keywordtype">void</span> SetRange(IntVar* <span class="keyword">const</span> var, int64 new_min, int64 new_max) {
<a name="l03088"></a>03088     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03089"></a>03089       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;SetRange(var, new_min, new_max);
<a name="l03090"></a><a class="code" href="classoperations__research_1_1Trace.html#bda7ae6bfe0e9f5fe58bf4db118ea98e">03090</a>     }
<a name="l03091"></a>03091   }
<a name="l03092"></a>03092 
<a name="l03093"></a>03093   <span class="keyword">virtual</span> <span class="keywordtype">void</span> RemoveValue(IntVar* <span class="keyword">const</span> var, int64 <a class="code" href="search_8cc.html#21edc7ca4cc5802c8779d68556bc09cf">value</a>) {
<a name="l03094"></a>03094     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03095"></a>03095       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;RemoveValue(var, value);
<a name="l03096"></a><a class="code" href="classoperations__research_1_1Trace.html#cd3d3144503412d5cdf243dfe224e71f">03096</a>     }
<a name="l03097"></a>03097   }
<a name="l03098"></a>03098 
<a name="l03099"></a>03099   <span class="keyword">virtual</span> <span class="keywordtype">void</span> SetValue(IntVar* <span class="keyword">const</span> var, int64 <a class="code" href="search_8cc.html#21edc7ca4cc5802c8779d68556bc09cf">value</a>) {
<a name="l03100"></a>03100     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03101"></a>03101       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;SetValue(var, value);
<a name="l03102"></a><a class="code" href="classoperations__research_1_1Trace.html#e62fd5959c04fd078cf1d1ba69c7d7c8">03102</a>     }
<a name="l03103"></a>03103   }
<a name="l03104"></a>03104 
<a name="l03105"></a>03105   <span class="keyword">virtual</span> <span class="keywordtype">void</span> RemoveInterval(IntVar* <span class="keyword">const</span> var, int64 imin, int64 imax) {
<a name="l03106"></a>03106     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03107"></a>03107       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;RemoveInterval(var, imin, imax);
<a name="l03108"></a><a class="code" href="classoperations__research_1_1Trace.html#b4db983298d0000cee8d2c2716dc53e9">03108</a>     }
<a name="l03109"></a>03109   }
<a name="l03110"></a>03110 
<a name="l03111"></a>03111   <span class="keyword">virtual</span> <span class="keywordtype">void</span> SetValues(IntVar* <span class="keyword">const</span> var,
<a name="l03112"></a>03112                          <span class="keyword">const</span> int64* <span class="keyword">const</span> values,
<a name="l03113"></a>03113                          <span class="keywordtype">int</span> size) {
<a name="l03114"></a><a class="code" href="classoperations__research_1_1Trace.html#356e4329f7e7c0fdd2e550f47da03518">03114</a>     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03115"></a>03115       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;SetValues(var, values, size);
<a name="l03116"></a>03116     }
<a name="l03117"></a>03117   }
<a name="l03118"></a>03118 
<a name="l03119"></a>03119   <span class="keyword">virtual</span> <span class="keywordtype">void</span> RemoveValues(IntVar* <span class="keyword">const</span> var,
<a name="l03120"></a><a class="code" href="classoperations__research_1_1Trace.html#9a6cf2014429094140211785c27a2bf4">03120</a>                             <span class="keyword">const</span> int64* <span class="keyword">const</span> values,
<a name="l03121"></a>03121                             <span class="keywordtype">int</span> size) {
<a name="l03122"></a>03122     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03123"></a>03123       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;RemoveValues(var, values, size);
<a name="l03124"></a>03124     }
<a name="l03125"></a>03125   }
<a name="l03126"></a>03126 
<a name="l03127"></a>03127   <span class="comment">// IntervalVar modifiers.</span>
<a name="l03128"></a><a class="code" href="classoperations__research_1_1Trace.html#4b05734377dae34881d0de4124eea8b4">03128</a>   <span class="keyword">virtual</span> <span class="keywordtype">void</span> SetStartMin(<a class="code" href="classoperations__research_1_1IntervalVar.html" title="Interval Var.">IntervalVar</a>* <span class="keyword">const</span> var, int64 new_min) {
<a name="l03129"></a>03129     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03130"></a>03130       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;SetStartMin(var, new_min);
<a name="l03131"></a>03131     }
<a name="l03132"></a>03132   }
<a name="l03133"></a>03133 
<a name="l03134"></a>03134   <span class="keyword">virtual</span> <span class="keywordtype">void</span> SetStartMax(<a class="code" href="classoperations__research_1_1IntervalVar.html" title="Interval Var.">IntervalVar</a>* <span class="keyword">const</span> var, int64 new_max) {
<a name="l03135"></a>03135     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03136"></a>03136       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;SetStartMax(var, new_max);
<a name="l03137"></a><a class="code" href="classoperations__research_1_1Trace.html#8df535f8596593e6548186ee9c9b08a7">03137</a>     }
<a name="l03138"></a>03138   }
<a name="l03139"></a>03139 
<a name="l03140"></a>03140   <span class="keyword">virtual</span> <span class="keywordtype">void</span> SetStartRange(IntervalVar* <span class="keyword">const</span> var,
<a name="l03141"></a>03141                              int64 new_min,
<a name="l03142"></a>03142                              int64 new_max) {
<a name="l03143"></a><a class="code" href="classoperations__research_1_1Trace.html#32b1356a4b2b4405a2e1b0581f5b6a78">03143</a>     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03144"></a>03144       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;SetStartRange(var, new_min, new_max);
<a name="l03145"></a>03145     }
<a name="l03146"></a>03146   }
<a name="l03147"></a>03147 
<a name="l03148"></a>03148   <span class="keyword">virtual</span> <span class="keywordtype">void</span> SetEndMin(IntervalVar* <span class="keyword">const</span> var, int64 new_min) {
<a name="l03149"></a><a class="code" href="classoperations__research_1_1Trace.html#35a1be4c17e40b08f8ddb2619ac3cadc">03149</a>     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03150"></a>03150       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;SetEndMin(var, new_min);
<a name="l03151"></a>03151     }
<a name="l03152"></a>03152   }
<a name="l03153"></a>03153 
<a name="l03154"></a>03154   <span class="keyword">virtual</span> <span class="keywordtype">void</span> SetEndMax(IntervalVar* <span class="keyword">const</span> var, int64 new_max) {
<a name="l03155"></a>03155     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03156"></a>03156       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;SetEndMax(var, new_max);
<a name="l03157"></a><a class="code" href="classoperations__research_1_1Trace.html#4e33a7d139740116b0fb9c258c65052b">03157</a>     }
<a name="l03158"></a>03158   }
<a name="l03159"></a>03159 
<a name="l03160"></a>03160   <span class="keyword">virtual</span> <span class="keywordtype">void</span> SetEndRange(IntervalVar* <span class="keyword">const</span> var,
<a name="l03161"></a>03161                            int64 new_min,
<a name="l03162"></a>03162                            int64 new_max) {
<a name="l03163"></a><a class="code" href="classoperations__research_1_1Trace.html#889d2519fd39d354ea4ca23d9fc443a9">03163</a>     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03164"></a>03164       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;SetEndRange(var, new_min, new_max);
<a name="l03165"></a>03165     }
<a name="l03166"></a>03166   }
<a name="l03167"></a>03167 
<a name="l03168"></a>03168   <span class="keyword">virtual</span> <span class="keywordtype">void</span> SetDurationMin(IntervalVar* <span class="keyword">const</span> var, int64 new_min) {
<a name="l03169"></a><a class="code" href="classoperations__research_1_1Trace.html#56b8ad31f0cefcb1bf06b0f28f9a1455">03169</a>     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03170"></a>03170       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;SetDurationMin(var, new_min);
<a name="l03171"></a>03171     }
<a name="l03172"></a>03172   }
<a name="l03173"></a>03173 
<a name="l03174"></a>03174   <span class="keyword">virtual</span> <span class="keywordtype">void</span> SetDurationMax(IntervalVar* <span class="keyword">const</span> var, int64 new_max) {
<a name="l03175"></a>03175     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03176"></a>03176       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;SetDurationMax(var, new_max);
<a name="l03177"></a><a class="code" href="classoperations__research_1_1Trace.html#d8e689ce51a3c400888f4dc7bc7be6cf">03177</a>     }
<a name="l03178"></a>03178   }
<a name="l03179"></a>03179 
<a name="l03180"></a>03180   <span class="keyword">virtual</span> <span class="keywordtype">void</span> SetDurationRange(IntervalVar* <span class="keyword">const</span> var,
<a name="l03181"></a>03181                                 int64 new_min,
<a name="l03182"></a>03182                                 int64 new_max) {
<a name="l03183"></a><a class="code" href="classoperations__research_1_1Trace.html#52d8410309ccb4fdd4ed6438d1dba478">03183</a>     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03184"></a>03184       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;SetDurationRange(var, new_min, new_max);
<a name="l03185"></a>03185     }
<a name="l03186"></a>03186   }
<a name="l03187"></a>03187 
<a name="l03188"></a>03188   <span class="keyword">virtual</span> <span class="keywordtype">void</span> SetPerformed(IntervalVar* <span class="keyword">const</span> var, <span class="keywordtype">bool</span> <a class="code" href="search_8cc.html#21edc7ca4cc5802c8779d68556bc09cf">value</a>) {
<a name="l03189"></a><a class="code" href="classoperations__research_1_1Trace.html#c59b9ea5da48165329dd22cd9bd68591">03189</a>     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03190"></a>03190       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;SetPerformed(var, value);
<a name="l03191"></a>03191     }
<a name="l03192"></a>03192   }
<a name="l03193"></a>03193 
<a name="l03194"></a>03194   <span class="keyword">virtual</span> <span class="keywordtype">void</span> RankFirst(SequenceVar* <span class="keyword">const</span> var, <span class="keywordtype">int</span> index) {
<a name="l03195"></a>03195     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03196"></a>03196       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;RankFirst(var, index);
<a name="l03197"></a><a class="code" href="classoperations__research_1_1Trace.html#9315ac1c63841983b20f81604573c862">03197</a>     }
<a name="l03198"></a>03198   }
<a name="l03199"></a>03199 
<a name="l03200"></a>03200   <span class="keyword">virtual</span> <span class="keywordtype">void</span> RankNotFirst(SequenceVar* <span class="keyword">const</span> var, <span class="keywordtype">int</span> index) {
<a name="l03201"></a>03201     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03202"></a>03202       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;RankNotFirst(var, index);
<a name="l03203"></a><a class="code" href="classoperations__research_1_1Trace.html#2833b5072a0380944572e1fca8831b33">03203</a>     }
<a name="l03204"></a>03204   }
<a name="l03205"></a>03205 
<a name="l03206"></a>03206   <span class="keyword">virtual</span> <span class="keywordtype">void</span> RankLast(SequenceVar* <span class="keyword">const</span> var, <span class="keywordtype">int</span> index) {
<a name="l03207"></a>03207     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03208"></a>03208       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;RankLast(var, index);
<a name="l03209"></a><a class="code" href="classoperations__research_1_1Trace.html#6bc1fb4be8220d5a7c7d9827776fa22d">03209</a>     }
<a name="l03210"></a>03210   }
<a name="l03211"></a>03211 
<a name="l03212"></a>03212   <span class="keyword">virtual</span> <span class="keywordtype">void</span> RankNotLast(SequenceVar* <span class="keyword">const</span> var, <span class="keywordtype">int</span> index) {
<a name="l03213"></a>03213     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03214"></a>03214       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;RankNotLast(var, index);
<a name="l03215"></a><a class="code" href="classoperations__research_1_1Trace.html#d8247320b1e5ef59c9408b4a4c8b9cfe">03215</a>     }
<a name="l03216"></a>03216   }
<a name="l03217"></a>03217 
<a name="l03218"></a>03218   <span class="keyword">virtual</span> <span class="keywordtype">void</span> RankSequence(SequenceVar* <span class="keyword">const</span> var,
<a name="l03219"></a>03219                             <span class="keyword">const</span> std::vector&lt;int&gt;&amp; rank_first,
<a name="l03220"></a>03220                             <span class="keyword">const</span> std::vector&lt;int&gt;&amp; rank_last,
<a name="l03221"></a><a class="code" href="classoperations__research_1_1Trace.html#9c7290b67c7101e2b81d6505c0c28a48">03221</a>                             <span class="keyword">const</span> std::vector&lt;int&gt;&amp; unperformed) {
<a name="l03222"></a>03222     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.size(); ++i) {
<a name="l03223"></a>03223       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>[i]-&gt;RankSequence(var, rank_first, rank_last, unperformed);
<a name="l03224"></a>03224     }
<a name="l03225"></a>03225   }
<a name="l03226"></a>03226 
<a name="l03227"></a><a class="code" href="classoperations__research_1_1Trace.html#b74eeed4fd8d674854df5431510ddcbe">03227</a>   <span class="comment">// Does not take ownership of monitor.</span>
<a name="l03228"></a>03228   <span class="keywordtype">void</span> Add(<a class="code" href="classoperations__research_1_1PropagationMonitor.html" title="PropagationMonitor.">PropagationMonitor</a>* <span class="keyword">const</span> monitor) {
<a name="l03229"></a>03229     <span class="keywordflow">if</span> (monitor != NULL) {
<a name="l03230"></a>03230       <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>.push_back(monitor);
<a name="l03231"></a>03231     }
<a name="l03232"></a>03232   }
<a name="l03233"></a>03233 
<a name="l03234"></a>03234   <span class="comment">// The trace will dispatch propagation events. It needs to listen to search</span>
<a name="l03235"></a>03235   <span class="comment">// events.</span>
<a name="l03236"></a>03236   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchMonitor.html#05a9194796e445458948d741395b99f8" title="Registers itself on the solver such that it gets notified of the search and propagation...">Install</a>() {
<a name="l03237"></a><a class="code" href="classoperations__research_1_1Trace.html#4c2114ecda4011faef61c92bfae1fe85">03237</a>     <a class="code" href="classoperations__research_1_1SearchMonitor.html#05a9194796e445458948d741395b99f8" title="Registers itself on the solver such that it gets notified of the search and propagation...">SearchMonitor::Install</a>();
<a name="l03238"></a>03238   }
<a name="l03239"></a>03239 
<a name="l03240"></a>03240  <span class="keyword">private</span>:
<a name="l03241"></a>03241   std::vector&lt;PropagationMonitor*&gt; <a class="code" href="local__search_8cc.html#9d84fc009216df22096caf7925401b19">monitors_</a>;
<a name="l03242"></a>03242 };
<a name="l03243"></a>03243 
<a name="l03244"></a>03244 PropagationMonitor* <a class="code" href="namespaceoperations__research.html#fc4c96aa6fa6a48c7ec423b9c299c5f9">BuildTrace</a>(Solver* <span class="keyword">const</span> s) {
<a name="l03245"></a><a class="code" href="classoperations__research_1_1Trace.html#0df9f23bfd7bea1ef066b7bab6cbdddf">03245</a>   <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classoperations__research_1_1Trace.html" title="Trace.">Trace</a>(s);
<a name="l03246"></a>03246 }
<a name="l03247"></a>03247 
<a name="l03248"></a>03248 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Solver.html#51c801ef84c5843e4b9a1ba489a15f0f" title="Adds the propagation monitor to the solver.">Solver::AddPropagationMonitor</a>(<a class="code" href="classoperations__research_1_1PropagationMonitor.html" title="PropagationMonitor.">PropagationMonitor</a>* <span class="keyword">const</span> monitor) {
<a name="l03249"></a>03249   <span class="comment">// TODO(user): Check solver state?</span>
<a name="l03250"></a>03250   <span class="keyword">reinterpret_cast&lt;</span>class <a class="code" href="classoperations__research_1_1Trace.html" title="Trace.">Trace</a>*<span class="keyword">&gt;</span>(propagation_monitor_.get())-&gt;<a class="code" href="classoperations__research_1_1Trace.html#4c2114ecda4011faef61c92bfae1fe85" title="Does not take ownership of monitor.">Add</a>(monitor);
<a name="l03251"></a>03251 }
<a name="l03252"></a>03252 
<a name="l03253"></a><a class="code" href="namespaceoperations__research.html#fc4c96aa6fa6a48c7ec423b9c299c5f9">03253</a> <a class="code" href="classoperations__research_1_1PropagationMonitor.html" title="PropagationMonitor.">PropagationMonitor</a>* <a class="code" href="classoperations__research_1_1Solver.html#0171a677ee7227279e92e8f2138af0b0" title="Returns the propagation monitor.">Solver::GetPropagationMonitor</a>()<span class="keyword"> const </span>{
<a name="l03254"></a>03254   <span class="keywordflow">return</span> propagation_monitor_.get();
<a name="l03255"></a>03255 }
<a name="l03256"></a>03256 
<a name="l03257"></a><a class="code" href="classoperations__research_1_1Solver.html#51c801ef84c5843e4b9a1ba489a15f0f">03257</a> <span class="comment">// ----------------- Constraint class -------------------</span>
<a name="l03258"></a>03258 
<a name="l03259"></a>03259 <span class="keywordtype">string</span> <a class="code" href="classoperations__research_1_1Constraint.html#f870afb5d6c1fba1d70b38eb581f8cca" title="Constraint class.">Constraint::DebugString</a>()<span class="keyword"> const </span>{
<a name="l03260"></a>03260   <span class="keywordflow">return</span> <span class="stringliteral">"Constraint"</span>;
<a name="l03261"></a>03261 }
<a name="l03262"></a><a class="code" href="classoperations__research_1_1Solver.html#0171a677ee7227279e92e8f2138af0b0">03262</a> 
<a name="l03263"></a>03263 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Constraint.html#92c3bfe86238b5c95448d4a0384a327f" title="Calls Post and then Propagate to initialize the constraints.">Constraint::PostAndPropagate</a>() {
<a name="l03264"></a>03264   FreezeQueue();
<a name="l03265"></a>03265   Post();
<a name="l03266"></a>03266   InitialPropagate();
<a name="l03267"></a>03267   UnfreezeQueue();
<a name="l03268"></a><a class="code" href="classoperations__research_1_1Constraint.html#f870afb5d6c1fba1d70b38eb581f8cca">03268</a> }
<a name="l03269"></a>03269 
<a name="l03270"></a>03270 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1Constraint.html#816c36feb4ec4ffce6a8d3490029301c" title="Accepts the given visitor.">Constraint::Accept</a>(<a class="code" href="classoperations__research_1_1ModelVisitor.html" title="Model visitor.">ModelVisitor</a>* <span class="keyword">const</span> visitor)<span class="keyword"> const </span>{
<a name="l03271"></a>03271   visitor-&gt;<a class="code" href="classoperations__research_1_1ModelVisitor.html#2ee7b13da9c480a6dc87b12e1915b84c">BeginVisitConstraint</a>(<span class="stringliteral">"unknown"</span>, <span class="keyword">this</span>);
<a name="l03272"></a><a class="code" href="classoperations__research_1_1Constraint.html#92c3bfe86238b5c95448d4a0384a327f">03272</a>   visitor-&gt;<a class="code" href="classoperations__research_1_1ModelVisitor.html#59a147d5cabdf4a7d8ac032552e544df">EndVisitConstraint</a>(<span class="stringliteral">"unknown"</span>, <span class="keyword">this</span>);
<a name="l03273"></a>03273 }
<a name="l03274"></a>03274 
<a name="l03275"></a>03275 <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1Constraint.html#37857d71c8cd75026bb78cf4a1565419" title="Is the constraint created by a cast from expression to integer variable?">Constraint::IsCastConstraint</a>()<span class="keyword"> const </span>{
<a name="l03276"></a>03276   <span class="keywordflow">return</span> ContainsKey(<a class="code" href="classoperations__research_1_1PropagationBaseObject.html#2851ada2b74b1f107fb50d84043471dc">solver</a>()-&gt;cast_constraints_, <span class="keyword">this</span>);
<a name="l03277"></a>03277 }
<a name="l03278"></a>03278 
<a name="l03279"></a><a class="code" href="classoperations__research_1_1Constraint.html#816c36feb4ec4ffce6a8d3490029301c">03279</a> <a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <a class="code" href="classoperations__research_1_1Constraint.html#fb87f6804b9d3bbf31dcfd92249a9024" title="Creates an boolean variable representing the status of the variable (false = constraint...">Constraint::Var</a>() {
<a name="l03280"></a>03280   <span class="keywordflow">return</span> NULL;
<a name="l03281"></a>03281 }
<a name="l03282"></a>03282 
<a name="l03283"></a>03283 <span class="comment">// ----- Class IntExpr -----</span>
<a name="l03284"></a><a class="code" href="classoperations__research_1_1Constraint.html#37857d71c8cd75026bb78cf4a1565419">03284</a> 
<a name="l03285"></a>03285 <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1IntExpr.html#3a82999dc986a540904daf053ddb9269" title="Accepts the given visitor.">IntExpr::Accept</a>(<a class="code" href="classoperations__research_1_1ModelVisitor.html" title="Model visitor.">ModelVisitor</a>* <span class="keyword">const</span> visitor)<span class="keyword"> const </span>{
<a name="l03286"></a>03286   visitor-&gt;<a class="code" href="classoperations__research_1_1ModelVisitor.html#34fb5875ef83539724a754727ae32416">BeginVisitIntegerExpression</a>(<span class="stringliteral">"unknown"</span>, <span class="keyword">this</span>);
<a name="l03287"></a>03287   visitor-&gt;<a class="code" href="classoperations__research_1_1ModelVisitor.html#34fce60f6a3e2d0dac622ae6aed65078">EndVisitIntegerExpression</a>(<span class="stringliteral">"unknown"</span>, <span class="keyword">this</span>);
<a name="l03288"></a><a class="code" href="classoperations__research_1_1Constraint.html#fb87f6804b9d3bbf31dcfd92249a9024">03288</a> }
<a name="l03289"></a>03289 
<a name="l03290"></a>03290 <span class="preprocessor">#undef CP_TRY  // We no longer need those.</span>
<a name="l03291"></a>03291 <span class="preprocessor"></span><span class="preprocessor">#undef CP_ON_FAIL</span>
<a name="l03292"></a>03292 <span class="preprocessor"></span><span class="preprocessor">#undef CP_DO_FAIL</span>
<a name="l03293"></a>03293 <span class="preprocessor"></span>
<a name="l03294"></a><a class="code" href="classoperations__research_1_1IntExpr.html#3a82999dc986a540904daf053ddb9269">03294</a> }  <span class="comment">// namespace operations_research</span>
</pre></div></div>

  <!-- Start of footer. -->
  <table width=100% cellpadding=0 cellspacing=0 border=0>
    <tr valign=top>
      <td colspan=2 height=10></td>
    </tr>
    <tr valign=top>
      <td colspan=2 bgcolor=#359621 height=3></td>
    </tr>
  </table>

  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br />

  
  </body>
</html>
