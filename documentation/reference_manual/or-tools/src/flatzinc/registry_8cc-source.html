<!-- Good morning, Mr. Phelps. -->
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>or-tools/src/flatzinc/registry.cc Source File - Doxy</title>
    <link rel="shortcut icon" href="../../../favicon.ico">
    <!-- Both stylesheets are supplied by Doxygen, with maybe minor tweaks from Google. -->
    <link href="../../../doxygen.css" rel="stylesheet" type="text/css">
    <link href="../../../tabs.css" rel="stylesheet" type="text/css">
  </head>

  <body topmargin=0 leftmargin=20 bottommargin=0 rightmargin=20 marginwidth=20 marginheight=0>
  <!-- Second part of the secret behind Doxy logo always having the word "Doxy" with the color of the day. -->
  <style>
    a.doxy_logo:hover {
      background-color: #359621
    }
  </style>

  <table width=100% cellpadding=0 cellspacing=0 border=0>
    <!-- Top horizontal line with the color of the day. -->
    <tr valign=top>
      <td colspan=3 bgcolor=#359621 height=3></td>
    </tr>

    <!-- Header row with the links at the right. -->
    <tr valign=top>
      <td colspan=3 align=right>
        <font size=-1>
          Generated on: <font color=#359621><b>Fri Aug 10 00:46:07 CEST 2012</b></font>
            for Revision:2055
        </font>
      </td>
    </tr>

    <!-- Header row with the logo and the search form. -->
    <tr valign=top>
      <!-- Logo. -->
      <td align=left width=150>
        <table width=150 height=54 cellpadding=0 cellspacing=0 border=0>
          <tr valign=top>
            <!-- First part of the secret behind Doxy logo always having the word "Doxy" with the color of the day. -->
            <td bgcolor=#359621>
              <a class="doxy_logo" href="../../../index.html"><img src="../../../doxy_logo.png" alt="Doxy" border=0></a>
            </td>
          </tr>
        </table>
      </td>
    </tr>

    <!-- Tiny vertical space below the form. -->
    <tr valign=top>
      <td colspan=3 height=3></td>
    </tr>
  </table>

  <!-- Header navigation row. -->
  <div class="memproto">
    <table width=100% cellpadding=0 cellspacing=0 border=0>
      <tr>
        <td align=left style="padding-left: 20px"><font size=+1><b><tt><font color=#333333>//
            <a href="../../../index.html"><font color=#359621>doxy</font></a>/</font>
            <a href="../../../or-tools/index.html">or-tools</a>/
            <a href="../../../or-tools/src/index.html">src</a>/
            <a href="../../../or-tools/src/flatzinc/index.html">flatzinc</a>/
            </tt></b></font>
        </td>
      </tr>
    </table>
  </div>
  <br />
    <!-- No subdirs found. -->
  <!-- End of header. -->
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>or-tools/src/flatzinc/registry.cc</h1><a href="registry_8cc.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* -*- mode: C++; c-basic-offset: 2; indent-tabs-mode: nil -*- */</span>
<a name="l00002"></a>00002 <span class="comment">/*</span>
<a name="l00003"></a>00003 <span class="comment"> *  Main authors:</span>
<a name="l00004"></a>00004 <span class="comment"> *     Guido Tack &lt;tack@gecode.org&gt;</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> *  Contributing authors:</span>
<a name="l00007"></a>00007 <span class="comment"> *     Mikael Lagerkvist &lt;lagerkvist@gmail.com&gt;</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> *  Modified:</span>
<a name="l00010"></a>00010 <span class="comment"> *     Laurent Perron &lt;lperron@google.com&gt;</span>
<a name="l00011"></a>00011 <span class="comment"> *</span>
<a name="l00012"></a>00012 <span class="comment"> *</span>
<a name="l00013"></a>00013 <span class="comment"> *  Copyright:</span>
<a name="l00014"></a>00014 <span class="comment"> *     Guido Tack, 2007</span>
<a name="l00015"></a>00015 <span class="comment"> *     Mikael Lagerkvist, 2009</span>
<a name="l00016"></a>00016 <span class="comment"> *</span>
<a name="l00017"></a>00017 <span class="comment"> *  Last modified:</span>
<a name="l00018"></a>00018 <span class="comment"> *     $Date: 2010-07-02 19:18:43 +1000 (Fri, 02 Jul 2010) $ by $Author: tack $</span>
<a name="l00019"></a>00019 <span class="comment"> *     $Revision: 11149 $</span>
<a name="l00020"></a>00020 <span class="comment"> *</span>
<a name="l00021"></a>00021 <span class="comment"> *  This file is part of Gecode, the generic constraint</span>
<a name="l00022"></a>00022 <span class="comment"> *  development environment:</span>
<a name="l00023"></a>00023 <span class="comment"> *     http://www.gecode.org</span>
<a name="l00024"></a>00024 <span class="comment"> *</span>
<a name="l00025"></a>00025 <span class="comment"> *  Permission is hereby granted, free of charge, to any person obtaining</span>
<a name="l00026"></a>00026 <span class="comment"> *  a copy of this software and associated documentation files (the</span>
<a name="l00027"></a>00027 <span class="comment"> *  "Software"), to deal in the Software without restriction, including</span>
<a name="l00028"></a>00028 <span class="comment"> *  without limitation the rights to use, copy, modify, merge, publish,</span>
<a name="l00029"></a>00029 <span class="comment"> *  distribute, sublicense, and/or sell copies of the Software, and to</span>
<a name="l00030"></a>00030 <span class="comment"> *  permit persons to whom the Software is furnished to do so, subject to</span>
<a name="l00031"></a>00031 <span class="comment"> *  the following conditions:</span>
<a name="l00032"></a>00032 <span class="comment"> *</span>
<a name="l00033"></a>00033 <span class="comment"> *  The above copyright notice and this permission notice shall be</span>
<a name="l00034"></a>00034 <span class="comment"> *  included in all copies or substantial portions of the Software.</span>
<a name="l00035"></a>00035 <span class="comment"> *</span>
<a name="l00036"></a>00036 <span class="comment"> *  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,</span>
<a name="l00037"></a>00037 <span class="comment"> *  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</span>
<a name="l00038"></a>00038 <span class="comment"> *  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND</span>
<a name="l00039"></a>00039 <span class="comment"> *  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE</span>
<a name="l00040"></a>00040 <span class="comment"> *  LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION</span>
<a name="l00041"></a>00041 <span class="comment"> *  OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION</span>
<a name="l00042"></a>00042 <span class="comment"> *  WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</span>
<a name="l00043"></a>00043 <span class="comment"> *</span>
<a name="l00044"></a>00044 <span class="comment"> */</span>
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="preprocessor">#include "base/commandlineflags.h"</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include "<a class="code" href="flatzinc_8h.html">flatzinc/flatzinc.h</a>"</span>
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 DECLARE_bool(cp_trace_search);
<a name="l00050"></a>00050 DECLARE_bool(cp_trace_propagation);
<a name="l00051"></a>00051 <a class="code" href="flatzinc_8cc.html#70cc0e25f011c74f97db8b218fda6f18">DEFINE_bool</a>(use_minisat, <span class="keyword">true</span>, <span class="stringliteral">"Use minisat in boolean formulas"</span>);
<a name="l00052"></a>00052 
<a name="l00053"></a>00053 <span class="keyword">namespace </span>operations_research {
<a name="l00054"></a>00054 <span class="keyword">class </span>SatPropagator;
<a name="l00055"></a>00055 <span class="keywordtype">bool</span> <a class="code" href="namespaceoperations__research.html#24d33d13132f40acb3793499ba0f6e9b">AddBoolEq</a>(SatPropagator* <span class="keyword">const</span> sat,
<a name="l00056"></a>00056                IntExpr* <span class="keyword">const</span> left,
<a name="l00057"></a>00057                IntExpr* <span class="keyword">const</span> right);
<a name="l00058"></a>00058 
<a name="l00059"></a>00059 <span class="keywordtype">bool</span> <a class="code" href="namespaceoperations__research.html#88d9997bac8a172f46490206a62a400d">AddBoolLe</a>(SatPropagator* <span class="keyword">const</span> sat,
<a name="l00060"></a>00060                IntExpr* <span class="keyword">const</span> left,
<a name="l00061"></a>00061                IntExpr* <span class="keyword">const</span> right);
<a name="l00062"></a>00062 
<a name="l00063"></a>00063 <span class="keywordtype">bool</span> <a class="code" href="namespaceoperations__research.html#f94692ccb5dc6796b32b6f408d45dafe">AddBoolNot</a>(SatPropagator* <span class="keyword">const</span> sat,
<a name="l00064"></a>00064                 IntExpr* <span class="keyword">const</span> left,
<a name="l00065"></a>00065                 IntExpr* <span class="keyword">const</span> right);
<a name="l00066"></a>00066 
<a name="l00067"></a>00067 <span class="keywordtype">bool</span> <a class="code" href="namespaceoperations__research.html#623070a9eacdafedf3ba0a9b88c080b0">AddBoolAndArrayEqVar</a>(SatPropagator* <span class="keyword">const</span> sat,
<a name="l00068"></a>00068                           <span class="keyword">const</span> std::vector&lt;IntVar*&gt;&amp; vars,
<a name="l00069"></a>00069                           IntExpr* <span class="keyword">const</span> target);
<a name="l00070"></a>00070 
<a name="l00071"></a>00071 <span class="keywordtype">bool</span> <a class="code" href="namespaceoperations__research.html#d68371277a2b0557c8cb854710dc224d">AddBoolOrArrayEqVar</a>(SatPropagator* <span class="keyword">const</span> sat,
<a name="l00072"></a>00072                          <span class="keyword">const</span> std::vector&lt;IntVar*&gt;&amp; vars,
<a name="l00073"></a>00073                          IntExpr* <span class="keyword">const</span> target);
<a name="l00074"></a>00074 
<a name="l00075"></a>00075 <span class="keywordtype">bool</span> <a class="code" href="namespaceoperations__research.html#ab50013e1c3d51b530b14db411dc8552">AddBoolAndEqVar</a>(SatPropagator* <span class="keyword">const</span> sat,
<a name="l00076"></a>00076                      IntExpr* <span class="keyword">const</span> left,
<a name="l00077"></a>00077                      IntExpr* <span class="keyword">const</span> right,
<a name="l00078"></a>00078                      IntExpr* <span class="keyword">const</span> target);
<a name="l00079"></a>00079 
<a name="l00080"></a>00080 <span class="keywordtype">bool</span> <a class="code" href="namespaceoperations__research.html#5ae3d4db1fe451e74a6bc846a0480f25">AddBoolIsNEqVar</a>(SatPropagator* <span class="keyword">const</span> sat,
<a name="l00081"></a>00081                      IntExpr* <span class="keyword">const</span> left,
<a name="l00082"></a>00082                      IntExpr* <span class="keyword">const</span> right,
<a name="l00083"></a>00083                      IntExpr* <span class="keyword">const</span> target);
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 <span class="keywordtype">bool</span> <a class="code" href="namespaceoperations__research.html#7538bc3824f9a28c0360db1f899c5654">AddBoolIsLeVar</a>(SatPropagator* <span class="keyword">const</span> sat,
<a name="l00086"></a>00086                     IntExpr* <span class="keyword">const</span> left,
<a name="l00087"></a>00087                     IntExpr* <span class="keyword">const</span> right,
<a name="l00088"></a>00088                     IntExpr* <span class="keyword">const</span> target);
<a name="l00089"></a>00089 
<a name="l00090"></a>00090 <span class="keywordtype">bool</span> <a class="code" href="namespaceoperations__research.html#0b901e88922c93cd583ee72eacd224bf">AddBoolOrEqVar</a>(SatPropagator* <span class="keyword">const</span> sat,
<a name="l00091"></a>00091                     IntExpr* <span class="keyword">const</span> left,
<a name="l00092"></a>00092                     IntExpr* <span class="keyword">const</span> right,
<a name="l00093"></a>00093                     IntExpr* <span class="keyword">const</span> target);
<a name="l00094"></a>00094 
<a name="l00095"></a>00095 <span class="keywordtype">bool</span> <a class="code" href="namespaceoperations__research.html#8976c503856808e862be2f464108f44c">AddBoolIsEqVar</a>(SatPropagator* <span class="keyword">const</span> sat,
<a name="l00096"></a>00096                     IntExpr* <span class="keyword">const</span> left,
<a name="l00097"></a>00097                     IntExpr* <span class="keyword">const</span> right,
<a name="l00098"></a>00098                     IntExpr* <span class="keyword">const</span> target);
<a name="l00099"></a>00099 
<a name="l00100"></a>00100 
<a name="l00101"></a>00101 <span class="keywordtype">bool</span> <a class="code" href="namespaceoperations__research.html#cc75d1bfb53fcab6a56fe2a588b47512">AddBoolOrArrayEqualTrue</a>(SatPropagator* <span class="keyword">const</span> sat,
<a name="l00102"></a>00102                              <span class="keyword">const</span> std::vector&lt;IntVar*&gt;&amp; vars);
<a name="l00103"></a>00103 
<a name="l00104"></a>00104 <span class="keywordtype">bool</span> <a class="code" href="namespaceoperations__research.html#2bdf87255460bd56404a9bbef75e0a84">AddBoolAndArrayEqualFalse</a>(SatPropagator* <span class="keyword">const</span> sat,
<a name="l00105"></a>00105                                <span class="keyword">const</span> std::vector&lt;IntVar*&gt;&amp; vars);
<a name="l00106"></a>00106 
<a name="l00107"></a>00107 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceoperations__research.html#ef28c306da5414e37a8dc3676adf2b89" title="Misc.">HasDomainAnnotation</a>(AstNode* <span class="keyword">const</span> annotations);
<a name="l00108"></a>00108 <span class="keyword">namespace </span>{
<a name="l00109"></a>00109 <span class="comment">// Help</span>
<a name="l00110"></a>00110 
<a name="l00111"></a><a class="code" href="namespaceoperations__research.html#6bf1c9f83fd2cf982c16ca672b002539">00111</a> Constraint* <a class="code" href="namespaceoperations__research.html#6bf1c9f83fd2cf982c16ca672b002539" title="Help.">MakeStrongScalProdEquality</a>(Solver* <span class="keyword">const</span> solver,
<a name="l00112"></a>00112                                        std::vector&lt;IntVar*&gt;&amp; variables,
<a name="l00113"></a>00113                                        std::vector&lt;int64&gt;&amp; coefficients,
<a name="l00114"></a>00114                                        int64 rhs) {
<a name="l00115"></a>00115   <span class="keyword">const</span> <span class="keywordtype">bool</span> trace = FLAGS_cp_trace_search;
<a name="l00116"></a>00116   <span class="keyword">const</span> <span class="keywordtype">bool</span> propag = FLAGS_cp_trace_propagation;
<a name="l00117"></a>00117   FLAGS_cp_trace_search = <span class="keyword">false</span>;
<a name="l00118"></a>00118   FLAGS_cp_trace_propagation = <span class="keyword">false</span>;
<a name="l00119"></a>00119   <span class="keyword">const</span> <span class="keywordtype">int</span> size = variables.size();
<a name="l00120"></a>00120   IntTupleSet tuples(size);
<a name="l00121"></a>00121   Solver s(<span class="stringliteral">"build"</span>);
<a name="l00122"></a>00122   std::vector&lt;IntVar*&gt; copy_vars(size);
<a name="l00123"></a>00123   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00124"></a>00124     copy_vars[i] = s.MakeIntVar(variables[i]-&gt;Min(), variables[i]-&gt;Max());
<a name="l00125"></a>00125   }
<a name="l00126"></a>00126   s.AddConstraint(s.MakeScalProdEquality(copy_vars, coefficients, rhs));
<a name="l00127"></a>00127   s.NewSearch(s.MakePhase(copy_vars,
<a name="l00128"></a>00128                           Solver::CHOOSE_FIRST_UNBOUND,
<a name="l00129"></a>00129                           Solver::ASSIGN_MIN_VALUE));
<a name="l00130"></a>00130   <span class="keywordflow">while</span> (s.NextSolution()) {
<a name="l00131"></a>00131     std::vector&lt;int&gt; one_tuple(size);
<a name="l00132"></a>00132     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00133"></a>00133       one_tuple[i] = copy_vars[i]-&gt;Value();
<a name="l00134"></a>00134     }
<a name="l00135"></a>00135     tuples.Insert(one_tuple);
<a name="l00136"></a>00136   }
<a name="l00137"></a>00137   s.EndSearch();
<a name="l00138"></a>00138   FLAGS_cp_trace_search = trace;
<a name="l00139"></a>00139   FLAGS_cp_trace_propagation = propag;
<a name="l00140"></a>00140   <span class="keywordflow">return</span> solver-&gt;MakeAllowedAssignments(variables, tuples);
<a name="l00141"></a>00141 }
<a name="l00142"></a>00142 <span class="comment"></span>
<a name="l00143"></a>00143 <span class="comment">/// Map from constraint identifier to constraint posting functions</span>
<a name="l00144"></a>00144 <span class="comment"></span><span class="keyword">class </span>ModelBuilder {
<a name="l00145"></a>00145  <span class="keyword">public</span>:<span class="comment"></span>
<a name="l00146"></a>00146 <span class="comment">  /// Type of constraint posting function</span>
<a name="l00147"></a>00147 <span class="comment"></span>  <span class="keyword">typedef</span> void (*Builder) (FlatZincModel* <span class="keyword">const</span> model, CtSpec* <span class="keyword">const</span> spec);<span class="comment"></span>
<a name="l00148"></a>00148 <span class="comment">  /// Add posting function \a p with identifier \a id</span>
<a name="l00149"></a>00149 <span class="comment"></span>  <span class="keywordtype">void</span> Register(<span class="keyword">const</span> std::string&amp; <span class="keywordtype">id</span>, Builder p);<span class="comment"></span>
<a name="l00150"></a>00150 <span class="comment">  /// Post constraint specified by \a ce</span>
<a name="l00151"></a>00151 <span class="comment"></span>  <span class="keywordtype">void</span> Post(FlatZincModel* <span class="keyword">const</span> model, CtSpec* <span class="keyword">const</span> spec);
<a name="l00152"></a>00152 
<a name="l00153"></a>00153  <span class="keyword">private</span>:<span class="comment"></span>
<a name="l00154"></a>00154 <span class="comment">  /// The actual builders.</span>
<a name="l00155"></a><a class="code" href="registry_8cc.html#6d139b6d45f2a0c8a706b6035d1174c3">00155</a> <span class="comment"></span>  std::map&lt;std::string, Builder&gt; <a class="code" href="registry_8cc.html#6d139b6d45f2a0c8a706b6035d1174c3" title="The actual builders.">r</a>;
<a name="l00156"></a>00156 };
<a name="l00157"></a>00157 
<a name="l00158"></a><a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">00158</a> <span class="keyword">static</span> ModelBuilder <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>;
<a name="l00159"></a>00159 
<a name="l00160"></a>00160 <span class="keywordtype">void</span> ModelBuilder::Post(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l00161"></a>00161   <span class="keywordflow">if</span> (!spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#4b81df3faa511399839966edfe87bcc1">Nullified</a>()) {
<a name="l00162"></a>00162     <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; <span class="keywordtype">id</span> = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#b5e09dc7bc835bddd6221a6ec24f88d0">Id</a>();
<a name="l00163"></a>00163     std::map&lt;std::string, Builder&gt;::iterator i = <a class="code" href="registry_8cc.html#6d139b6d45f2a0c8a706b6035d1174c3" title="The actual builders.">r</a>.find(<span class="keywordtype">id</span>);
<a name="l00164"></a>00164     <span class="keywordflow">if</span> (i == <a class="code" href="registry_8cc.html#6d139b6d45f2a0c8a706b6035d1174c3" title="The actual builders.">r</a>.end()) {
<a name="l00165"></a>00165       <span class="keywordflow">throw</span> <a class="code" href="classoperations__research_1_1Error.html" title="Exception class for FlatZinc errors">Error</a>(<span class="stringliteral">"ModelBuilder"</span>,
<a name="l00166"></a>00166                   std::string(<span class="stringliteral">"Constraint "</span>) + spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#b5e09dc7bc835bddd6221a6ec24f88d0">Id</a>() + <span class="stringliteral">" not found"</span>);
<a name="l00167"></a>00167     }
<a name="l00168"></a>00168     i-&gt;second(model, spec);
<a name="l00169"></a>00169   }
<a name="l00170"></a>00170 }
<a name="l00171"></a>00171 
<a name="l00172"></a>00172 <span class="keywordtype">void</span> ModelBuilder::Register(<span class="keyword">const</span> std::string&amp; <span class="keywordtype">id</span>, Builder p) {
<a name="l00173"></a>00173   <a class="code" href="registry_8cc.html#6d139b6d45f2a0c8a706b6035d1174c3" title="The actual builders.">r</a>[id] = p;
<a name="l00174"></a>00174 }
<a name="l00175"></a>00175 
<a name="l00176"></a><a class="code" href="namespaceoperations__research.html#2ad99e41ce8ae1969087cf8697fc5e32">00176</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#2ad99e41ce8ae1969087cf8697fc5e32">p_int_eq</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l00177"></a>00177   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l00178"></a>00178   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0))) {
<a name="l00179"></a>00179     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l00180"></a>00180     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l00181"></a>00181             &lt;&lt; right-&gt;DebugString();
<a name="l00182"></a>00182     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l00183"></a>00183     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0), right);
<a name="l00184"></a>00184   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1))) {
<a name="l00185"></a>00185     IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l00186"></a>00186     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l00187"></a>00187             &lt;&lt; left-&gt;DebugString();
<a name="l00188"></a>00188     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l00189"></a>00189     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1), left);
<a name="l00190"></a>00190   } <span class="keywordflow">else</span> {
<a name="l00191"></a>00191     IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l00192"></a>00192     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l00193"></a>00193     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeEquality(left, right);
<a name="l00194"></a>00194     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00195"></a>00195     solver-&gt;AddConstraint(ct);
<a name="l00196"></a>00196   }
<a name="l00197"></a>00197 }
<a name="l00198"></a>00198 
<a name="l00199"></a><a class="code" href="namespaceoperations__research.html#6771e5a6eab0b5ecd335cdd6b63fd814">00199</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#6771e5a6eab0b5ecd335cdd6b63fd814">p_int_ne</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l00200"></a>00200   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l00201"></a>00201   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l00202"></a>00202   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#a8e1174fcd71dc8250fcf57d14c22110" title="Test if node is int, if yes set i to the value.">isInt</a>()) {
<a name="l00203"></a>00203     Constraint* <span class="keyword">const</span> ct =
<a name="l00204"></a>00204         solver-&gt;MakeNonEquality(left, spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>());
<a name="l00205"></a>00205     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00206"></a>00206     solver-&gt;AddConstraint(ct);
<a name="l00207"></a>00207   } <span class="keywordflow">else</span> {
<a name="l00208"></a>00208     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l00209"></a>00209     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeNonEquality(left, right);
<a name="l00210"></a>00210     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00211"></a>00211     solver-&gt;AddConstraint(ct);
<a name="l00212"></a>00212   }
<a name="l00213"></a>00213 }
<a name="l00214"></a>00214 
<a name="l00215"></a><a class="code" href="namespaceoperations__research.html#345f858085821cdbb35379c668c5ad5f">00215</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#345f858085821cdbb35379c668c5ad5f">p_int_ge</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l00216"></a>00216   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l00217"></a>00217   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l00218"></a>00218   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#a8e1174fcd71dc8250fcf57d14c22110" title="Test if node is int, if yes set i to the value.">isInt</a>()) {
<a name="l00219"></a>00219     Constraint* <span class="keyword">const</span> ct =
<a name="l00220"></a>00220         solver-&gt;MakeGreaterOrEqual(left, spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>());
<a name="l00221"></a>00221     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00222"></a>00222     solver-&gt;AddConstraint(ct);
<a name="l00223"></a>00223   } <span class="keywordflow">else</span> {
<a name="l00224"></a>00224     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l00225"></a>00225     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeGreaterOrEqual(left, right);
<a name="l00226"></a>00226     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00227"></a>00227     solver-&gt;AddConstraint(ct);
<a name="l00228"></a>00228   }
<a name="l00229"></a>00229 }
<a name="l00230"></a>00230 
<a name="l00231"></a><a class="code" href="namespaceoperations__research.html#a39f1a98ba049baaa44193e37c1a5551">00231</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#a39f1a98ba049baaa44193e37c1a5551">p_int_gt</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l00232"></a>00232   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l00233"></a>00233   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l00234"></a>00234   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#a8e1174fcd71dc8250fcf57d14c22110" title="Test if node is int, if yes set i to the value.">isInt</a>()) {
<a name="l00235"></a>00235     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeGreater(left, spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>());
<a name="l00236"></a>00236     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00237"></a>00237     solver-&gt;AddConstraint(ct);
<a name="l00238"></a>00238   } <span class="keywordflow">else</span> {
<a name="l00239"></a>00239     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l00240"></a>00240     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeGreater(left, right);
<a name="l00241"></a>00241     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00242"></a>00242     solver-&gt;AddConstraint(ct);
<a name="l00243"></a>00243   }
<a name="l00244"></a>00244 }
<a name="l00245"></a>00245 
<a name="l00246"></a><a class="code" href="namespaceoperations__research.html#66d7a8fc22b27ed89860fb3ad0dafd15">00246</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#66d7a8fc22b27ed89860fb3ad0dafd15">p_int_le</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l00247"></a>00247   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l00248"></a>00248   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l00249"></a>00249   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#a8e1174fcd71dc8250fcf57d14c22110" title="Test if node is int, if yes set i to the value.">isInt</a>()) {
<a name="l00250"></a>00250     Constraint* <span class="keyword">const</span> ct =
<a name="l00251"></a>00251         solver-&gt;MakeLessOrEqual(left, spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>());
<a name="l00252"></a>00252     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00253"></a>00253     solver-&gt;AddConstraint(ct);
<a name="l00254"></a>00254   } <span class="keywordflow">else</span> {
<a name="l00255"></a>00255     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l00256"></a>00256     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeLessOrEqual(left, right);
<a name="l00257"></a>00257     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00258"></a>00258     solver-&gt;AddConstraint(ct);
<a name="l00259"></a>00259   }
<a name="l00260"></a>00260 }
<a name="l00261"></a>00261 
<a name="l00262"></a><a class="code" href="namespaceoperations__research.html#a2be5e1bcf374940774f420afb7aa60b">00262</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#a2be5e1bcf374940774f420afb7aa60b">p_int_lt</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l00263"></a>00263   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l00264"></a>00264   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l00265"></a>00265   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#a8e1174fcd71dc8250fcf57d14c22110" title="Test if node is int, if yes set i to the value.">isInt</a>()) {
<a name="l00266"></a>00266     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeLess(left, spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>());
<a name="l00267"></a>00267     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00268"></a>00268     solver-&gt;AddConstraint(ct);
<a name="l00269"></a>00269   } <span class="keywordflow">else</span> {
<a name="l00270"></a>00270     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l00271"></a>00271     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeLess(left, right);
<a name="l00272"></a>00272     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00273"></a>00273     solver-&gt;AddConstraint(ct);
<a name="l00274"></a>00274   }
<a name="l00275"></a>00275 }
<a name="l00276"></a>00276 
<a name="l00277"></a>00277 <span class="comment">/* Comparisons */</span>
<a name="l00278"></a><a class="code" href="namespaceoperations__research.html#a1eb54fb12936240be4cd64ab8003e7c">00278</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#a1eb54fb12936240be4cd64ab8003e7c" title="Comparisons.">p_int_eq_reif</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l00279"></a>00279   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l00280"></a>00280   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l00281"></a>00281   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_right = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1);
<a name="l00282"></a>00282   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_boolvar = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2);
<a name="l00283"></a>00283   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(node_boolvar)) {
<a name="l00284"></a>00284     IntVar* <span class="keyword">const</span> boolvar =
<a name="l00285"></a>00285         node_right-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#a8e1174fcd71dc8250fcf57d14c22110" title="Test if node is int, if yes set i to the value.">isInt</a>() ?
<a name="l00286"></a>00286         solver-&gt;MakeIsEqualCstVar(left, node_right-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>()) :
<a name="l00287"></a>00287         solver-&gt;MakeIsEqualVar(left, model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_right));
<a name="l00288"></a>00288     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l00289"></a>00289             &lt;&lt; boolvar-&gt;DebugString();
<a name="l00290"></a>00290     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l00291"></a>00291     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l00292"></a>00292     CHECK_NOTNULL(boolvar);
<a name="l00293"></a>00293   } <span class="keywordflow">else</span> {
<a name="l00294"></a>00294     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_right);
<a name="l00295"></a>00295     IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l00296"></a>00296     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeIsEqualCt(left, right, boolvar);
<a name="l00297"></a>00297     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00298"></a>00298     solver-&gt;AddConstraint(ct);
<a name="l00299"></a>00299   }
<a name="l00300"></a>00300 }
<a name="l00301"></a>00301 
<a name="l00302"></a><a class="code" href="namespaceoperations__research.html#63a6e6aeb39f730a5ac167d12927d995">00302</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#63a6e6aeb39f730a5ac167d12927d995">p_int_ne_reif</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l00303"></a>00303   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l00304"></a>00304   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l00305"></a>00305   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_right = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1);
<a name="l00306"></a>00306   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_boolvar = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2);
<a name="l00307"></a>00307   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(node_boolvar)) {
<a name="l00308"></a>00308     IntVar* <span class="keyword">const</span> boolvar =
<a name="l00309"></a>00309         node_right-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#a8e1174fcd71dc8250fcf57d14c22110" title="Test if node is int, if yes set i to the value.">isInt</a>() ?
<a name="l00310"></a>00310         solver-&gt;MakeIsDifferentCstVar(left, node_right-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>()) :
<a name="l00311"></a>00311         solver-&gt;MakeIsDifferentVar(left, model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_right));
<a name="l00312"></a>00312     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l00313"></a>00313             &lt;&lt; boolvar-&gt;DebugString();
<a name="l00314"></a>00314     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l00315"></a>00315     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l00316"></a>00316     CHECK_NOTNULL(boolvar);
<a name="l00317"></a>00317   } <span class="keywordflow">else</span> {
<a name="l00318"></a>00318     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l00319"></a>00319     IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l00320"></a>00320     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeIsDifferentCt(left, right, boolvar);
<a name="l00321"></a>00321     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00322"></a>00322     solver-&gt;AddConstraint(ct);
<a name="l00323"></a>00323   }
<a name="l00324"></a>00324 }
<a name="l00325"></a>00325 
<a name="l00326"></a><a class="code" href="namespaceoperations__research.html#39a0e0657779841dc5dacea9af108277">00326</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#39a0e0657779841dc5dacea9af108277">p_int_ge_reif</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l00327"></a>00327   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l00328"></a>00328   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l00329"></a>00329   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_right = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1);
<a name="l00330"></a>00330   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_boolvar = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2);
<a name="l00331"></a>00331   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(node_boolvar)) {
<a name="l00332"></a>00332     IntVar* <span class="keyword">const</span> boolvar =
<a name="l00333"></a>00333         node_right-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#a8e1174fcd71dc8250fcf57d14c22110" title="Test if node is int, if yes set i to the value.">isInt</a>() ?
<a name="l00334"></a>00334         solver-&gt;MakeIsGreaterOrEqualCstVar(left, node_right-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>()) :
<a name="l00335"></a>00335         solver-&gt;MakeIsGreaterOrEqualVar(left, model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_right));
<a name="l00336"></a>00336     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l00337"></a>00337             &lt;&lt; boolvar-&gt;DebugString();
<a name="l00338"></a>00338     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l00339"></a>00339     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l00340"></a>00340     CHECK_NOTNULL(boolvar);
<a name="l00341"></a>00341   } <span class="keywordflow">else</span> {
<a name="l00342"></a>00342     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l00343"></a>00343     IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l00344"></a>00344     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeIsGreaterOrEqualCt(left, right, boolvar);
<a name="l00345"></a>00345     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00346"></a>00346     solver-&gt;AddConstraint(ct);
<a name="l00347"></a>00347   }
<a name="l00348"></a>00348 }
<a name="l00349"></a>00349 
<a name="l00350"></a><a class="code" href="namespaceoperations__research.html#b128bd8d373afbd5df7477c4f8a254d0">00350</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#b128bd8d373afbd5df7477c4f8a254d0">p_int_gt_reif</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l00351"></a>00351   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l00352"></a>00352   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l00353"></a>00353   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_right = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1);
<a name="l00354"></a>00354   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_boolvar = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2);
<a name="l00355"></a>00355   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(node_boolvar)) {
<a name="l00356"></a>00356     IntVar* <span class="keyword">const</span> boolvar =
<a name="l00357"></a>00357         node_right-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#a8e1174fcd71dc8250fcf57d14c22110" title="Test if node is int, if yes set i to the value.">isInt</a>() ?
<a name="l00358"></a>00358         solver-&gt;MakeIsGreaterCstVar(left, node_right-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>()) :
<a name="l00359"></a>00359         solver-&gt;MakeIsGreaterVar(left, model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_right));
<a name="l00360"></a>00360     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l00361"></a>00361             &lt;&lt; boolvar-&gt;DebugString();
<a name="l00362"></a>00362     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l00363"></a>00363     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l00364"></a>00364     CHECK_NOTNULL(boolvar);
<a name="l00365"></a>00365   } <span class="keywordflow">else</span> {
<a name="l00366"></a>00366     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l00367"></a>00367     IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l00368"></a>00368     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeIsGreaterCt(left, right, boolvar);
<a name="l00369"></a>00369     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00370"></a>00370     solver-&gt;AddConstraint(ct);
<a name="l00371"></a>00371   }
<a name="l00372"></a>00372 }
<a name="l00373"></a>00373 
<a name="l00374"></a><a class="code" href="namespaceoperations__research.html#b71839382eb30974e13c669fe4db18e4">00374</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#b71839382eb30974e13c669fe4db18e4">p_int_le_reif</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l00375"></a>00375   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l00376"></a>00376   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l00377"></a>00377   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_right = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1);
<a name="l00378"></a>00378   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_boolvar = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2);
<a name="l00379"></a>00379   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(node_boolvar)) {
<a name="l00380"></a>00380     IntVar* <span class="keyword">const</span> boolvar =
<a name="l00381"></a>00381         node_right-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#a8e1174fcd71dc8250fcf57d14c22110" title="Test if node is int, if yes set i to the value.">isInt</a>() ?
<a name="l00382"></a>00382         solver-&gt;MakeIsLessOrEqualCstVar(left, node_right-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>()) :
<a name="l00383"></a>00383         solver-&gt;MakeIsLessOrEqualVar(left, model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_right));
<a name="l00384"></a>00384     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l00385"></a>00385             &lt;&lt; boolvar-&gt;DebugString();
<a name="l00386"></a>00386     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l00387"></a>00387     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l00388"></a>00388     CHECK_NOTNULL(boolvar);
<a name="l00389"></a>00389   } <span class="keywordflow">else</span> {
<a name="l00390"></a>00390     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l00391"></a>00391     IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l00392"></a>00392     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeIsLessOrEqualCt(left, right, boolvar);
<a name="l00393"></a>00393     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00394"></a>00394     solver-&gt;AddConstraint(ct);
<a name="l00395"></a>00395   }
<a name="l00396"></a>00396 }
<a name="l00397"></a>00397 
<a name="l00398"></a><a class="code" href="namespaceoperations__research.html#fce56a8bb61f7803ebcd336cc46ce803">00398</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#fce56a8bb61f7803ebcd336cc46ce803">p_int_lt_reif</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l00399"></a>00399   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l00400"></a>00400   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l00401"></a>00401   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_right = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1);
<a name="l00402"></a>00402   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_boolvar = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2);
<a name="l00403"></a>00403   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(node_boolvar)) {
<a name="l00404"></a>00404     IntVar* <span class="keyword">const</span> boolvar =
<a name="l00405"></a>00405         node_right-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#a8e1174fcd71dc8250fcf57d14c22110" title="Test if node is int, if yes set i to the value.">isInt</a>() ?
<a name="l00406"></a>00406         solver-&gt;MakeIsLessCstVar(left, node_right-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>()) :
<a name="l00407"></a>00407         solver-&gt;MakeIsLessVar(left, model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_right));
<a name="l00408"></a>00408     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l00409"></a>00409             &lt;&lt; boolvar-&gt;DebugString();
<a name="l00410"></a>00410     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l00411"></a>00411     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l00412"></a>00412     CHECK_NOTNULL(boolvar);
<a name="l00413"></a>00413   } <span class="keywordflow">else</span> {
<a name="l00414"></a>00414     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l00415"></a>00415     IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l00416"></a>00416     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeIsLessCt(left, right, boolvar);
<a name="l00417"></a>00417     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00418"></a>00418     solver-&gt;AddConstraint(ct);
<a name="l00419"></a>00419   }
<a name="l00420"></a>00420 }
<a name="l00421"></a>00421 
<a name="l00422"></a><a class="code" href="namespaceoperations__research.html#9f315bab72f4735ba4d30d4b5374cd92">00422</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#9f315bab72f4735ba4d30d4b5374cd92">p_int_lin_eq</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l00423"></a>00423   <span class="keywordtype">bool</span> strong_propagation = <a class="code" href="namespaceoperations__research.html#ef28c306da5414e37a8dc3676adf2b89" title="Misc.">HasDomainAnnotation</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#b3a612597c8bdd7ee4c60ad30d1e62f2">annotations</a>());
<a name="l00424"></a>00424   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l00425"></a>00425   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_coefficients = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l00426"></a>00426   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l00427"></a>00427   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_rhs = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2);
<a name="l00428"></a>00428   <span class="keyword">const</span> int64 rhs = node_rhs-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>();
<a name="l00429"></a>00429   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l00430"></a>00430   CHECK_EQ(size, array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size());
<a name="l00431"></a>00431   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#c27ec6b2284f6ef214202dab7e7106ff">DefinedArg</a>() != NULL) {
<a name="l00432"></a>00432     std::vector&lt;int64&gt; coefficients;
<a name="l00433"></a>00433     std::vector&lt;IntVar*&gt; variables;
<a name="l00434"></a>00434     int64 constant = 0;
<a name="l00435"></a>00435     <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* defined = NULL;
<a name="l00436"></a>00436     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00437"></a>00437       <span class="keywordflow">if</span> (array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;isInt()) {
<a name="l00438"></a>00438         constant += array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt() *
<a name="l00439"></a>00439                     array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt();
<a name="l00440"></a>00440       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])) {
<a name="l00441"></a>00441         CHECK(defined == NULL);
<a name="l00442"></a>00442         defined = array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i];
<a name="l00443"></a>00443         <span class="keywordflow">if</span> (array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt() != -1) {
<a name="l00444"></a>00444           <span class="keywordflow">throw</span> <a class="code" href="classoperations__research_1_1Error.html" title="Exception class for FlatZinc errors">Error</a>(<span class="stringliteral">"ModelBuilder"</span>,
<a name="l00445"></a>00445                       std::string(<span class="stringliteral">"Constraint "</span>) + spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#b5e09dc7bc835bddd6221a6ec24f88d0">Id</a>() +
<a name="l00446"></a>00446                       <span class="stringliteral">" cannot define an integer variable with a coefficient"</span>
<a name="l00447"></a>00447                       <span class="stringliteral">" different from -1"</span>);
<a name="l00448"></a>00448         }
<a name="l00449"></a>00449       } <span class="keywordflow">else</span> {
<a name="l00450"></a>00450         coefficients.push_back(array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt());
<a name="l00451"></a>00451         variables.push_back(model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var());
<a name="l00452"></a>00452       }
<a name="l00453"></a>00453     }
<a name="l00454"></a>00454     <span class="keywordflow">if</span> (constant - rhs != 0) {
<a name="l00455"></a>00455       coefficients.push_back(constant - rhs);
<a name="l00456"></a>00456       variables.push_back(solver-&gt;MakeIntConst(1));
<a name="l00457"></a>00457     }
<a name="l00458"></a>00458     IntExpr* <span class="keyword">const</span> target =
<a name="l00459"></a>00459         solver-&gt;MakeScalProd(variables, coefficients);
<a name="l00460"></a>00460     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; defined-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l00461"></a>00461             &lt;&lt; target-&gt;DebugString();
<a name="l00462"></a>00462     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(defined);
<a name="l00463"></a>00463     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(defined, target);
<a name="l00464"></a>00464   } <span class="keywordflow">else</span> {
<a name="l00465"></a>00465     std::vector&lt;int64&gt; coefficients(size);
<a name="l00466"></a>00466     std::vector&lt;IntVar*&gt; variables(size);
<a name="l00467"></a>00467     <span class="keywordtype">int</span> ones = 0;
<a name="l00468"></a>00468     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00469"></a>00469       coefficients[i] = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt();
<a name="l00470"></a>00470       ones += coefficients[i] == 1;
<a name="l00471"></a>00471       variables[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l00472"></a>00472     }
<a name="l00473"></a>00473     Constraint* <span class="keyword">const</span> ct =
<a name="l00474"></a>00474         strong_propagation ?
<a name="l00475"></a>00475         <a class="code" href="namespaceoperations__research.html#6bf1c9f83fd2cf982c16ca672b002539" title="Help.">MakeStrongScalProdEquality</a>(solver, variables, coefficients, rhs) :
<a name="l00476"></a>00476         (ones == size ?
<a name="l00477"></a>00477          solver-&gt;MakeSumEquality(variables, rhs) :
<a name="l00478"></a>00478          solver-&gt;MakeScalProdEquality(variables, coefficients, rhs));
<a name="l00479"></a>00479     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00480"></a>00480     solver-&gt;AddConstraint(ct);
<a name="l00481"></a>00481   }
<a name="l00482"></a>00482 }
<a name="l00483"></a>00483 
<a name="l00484"></a><a class="code" href="namespaceoperations__research.html#ac813725e27f155adc57667f1579ab17">00484</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#ac813725e27f155adc57667f1579ab17">p_int_lin_eq_reif</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l00485"></a>00485   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l00486"></a>00486   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_coefficients = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l00487"></a>00487   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l00488"></a>00488   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_rhs = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2);
<a name="l00489"></a>00489   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_boolvar = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(3);
<a name="l00490"></a>00490   int64 rhs = node_rhs-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>();
<a name="l00491"></a>00491   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l00492"></a>00492   CHECK_EQ(size, array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size());
<a name="l00493"></a>00493   std::vector&lt;int&gt; coefficients(size);
<a name="l00494"></a>00494 
<a name="l00495"></a>00495   <span class="keywordtype">int</span> positive = 0;
<a name="l00496"></a>00496   <span class="keywordtype">int</span> negative = 0;
<a name="l00497"></a>00497   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00498"></a>00498     coefficients[i] = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt();
<a name="l00499"></a>00499     <span class="keywordflow">if</span> (coefficients[i] &gt; 0) {
<a name="l00500"></a>00500       positive++;
<a name="l00501"></a>00501     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coefficients[i] &lt; 0) {
<a name="l00502"></a>00502       negative++;
<a name="l00503"></a>00503     }
<a name="l00504"></a>00504   }
<a name="l00505"></a>00505   <span class="keyword">const</span> <span class="keywordtype">bool</span> define = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(node_boolvar);
<a name="l00506"></a>00506 
<a name="l00507"></a>00507   <span class="keywordflow">if</span> (positive == 1) {
<a name="l00508"></a>00508     IntExpr* pos = NULL;
<a name="l00509"></a>00509     IntExpr* other = NULL;
<a name="l00510"></a>00510     <span class="keywordflow">if</span> (negative == 2) {
<a name="l00511"></a>00511       std::vector&lt;IntExpr*&gt; neg_exprs;
<a name="l00512"></a>00512       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00513"></a>00513         IntExpr* <span class="keyword">const</span> expr = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]);
<a name="l00514"></a>00514         <span class="keyword">const</span> int64 coeff = coefficients[i];
<a name="l00515"></a>00515         <span class="keywordflow">if</span> (coeff &gt; 0) {
<a name="l00516"></a>00516           pos = solver-&gt;MakeProd(expr, coeff);
<a name="l00517"></a>00517         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coeff &lt; 0) {
<a name="l00518"></a>00518           neg_exprs.push_back(solver-&gt;MakeProd(expr, -coeff));
<a name="l00519"></a>00519         }
<a name="l00520"></a>00520       }
<a name="l00521"></a>00521       other = solver-&gt;MakeSum(neg_exprs[0], neg_exprs[1]);
<a name="l00522"></a>00522     } <span class="keywordflow">else</span> {
<a name="l00523"></a>00523       std::vector&lt;IntVar*&gt; neg_vars;
<a name="l00524"></a>00524       std::vector&lt;int64&gt; neg_coeffs;
<a name="l00525"></a>00525       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00526"></a>00526         IntVar* <span class="keyword">const</span> var = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l00527"></a>00527         <span class="keyword">const</span> int64 coeff = coefficients[i];
<a name="l00528"></a>00528         <span class="keywordflow">if</span> (coeff &gt; 0) {
<a name="l00529"></a>00529           pos = solver-&gt;MakeProd(var, coeff);
<a name="l00530"></a>00530         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coeff &lt; 0) {
<a name="l00531"></a>00531           neg_vars.push_back(var);
<a name="l00532"></a>00532           neg_coeffs.push_back(-coeff);
<a name="l00533"></a>00533         }
<a name="l00534"></a>00534       }
<a name="l00535"></a>00535       other = solver-&gt;MakeScalProd(neg_vars, neg_coeffs);
<a name="l00536"></a>00536     }
<a name="l00537"></a>00537     pos = solver-&gt;MakeSum(pos, -rhs);
<a name="l00538"></a>00538     <span class="keywordflow">if</span> (define) {
<a name="l00539"></a>00539       IntVar* <span class="keyword">const</span> boolvar = solver-&gt;MakeIsEqualVar(pos, other);
<a name="l00540"></a>00540       VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l00541"></a>00541               &lt;&lt; boolvar-&gt;DebugString();
<a name="l00542"></a>00542       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l00543"></a>00543       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l00544"></a>00544     } <span class="keywordflow">else</span> {
<a name="l00545"></a>00545       IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l00546"></a>00546       Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeIsEqualCt(pos, other, boolvar);
<a name="l00547"></a>00547       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00548"></a>00548       solver-&gt;AddConstraint(ct);
<a name="l00549"></a>00549     }
<a name="l00550"></a>00550   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (negative == 1) {
<a name="l00551"></a>00551     IntExpr* neg = NULL;
<a name="l00552"></a>00552     IntExpr* other = NULL;
<a name="l00553"></a>00553     <span class="keywordflow">if</span> (positive == 2) {
<a name="l00554"></a>00554       std::vector&lt;IntExpr*&gt; pos_exprs;
<a name="l00555"></a>00555       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00556"></a>00556         <span class="keyword">const</span> int64 coeff = coefficients[i];
<a name="l00557"></a>00557         IntExpr* <span class="keyword">const</span> expr = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]);
<a name="l00558"></a>00558         <span class="keywordflow">if</span> (coeff &lt; 0) {
<a name="l00559"></a>00559           neg = solver-&gt;MakeProd(expr, -coeff);
<a name="l00560"></a>00560         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coeff &gt; 0) {
<a name="l00561"></a>00561           pos_exprs.push_back(solver-&gt;MakeProd(expr, coeff));
<a name="l00562"></a>00562         }
<a name="l00563"></a>00563       }
<a name="l00564"></a>00564       other = solver-&gt;MakeSum(pos_exprs[0], pos_exprs[1]);
<a name="l00565"></a>00565     } <span class="keywordflow">else</span> {
<a name="l00566"></a>00566       std::vector&lt;IntVar*&gt; pos_vars;
<a name="l00567"></a>00567       std::vector&lt;int64&gt; pos_coeffs;
<a name="l00568"></a>00568       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00569"></a>00569         <span class="keyword">const</span> int64 coeff = coefficients[i];
<a name="l00570"></a>00570         IntVar* <span class="keyword">const</span> var = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l00571"></a>00571         <span class="keywordflow">if</span> (coeff &lt; 0) {
<a name="l00572"></a>00572           neg = solver-&gt;MakeProd(var, -coeff);
<a name="l00573"></a>00573         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coeff &gt; 0) {
<a name="l00574"></a>00574           pos_vars.push_back(var);
<a name="l00575"></a>00575           pos_coeffs.push_back(coeff);
<a name="l00576"></a>00576         }
<a name="l00577"></a>00577       }
<a name="l00578"></a>00578       other = solver-&gt;MakeScalProd(pos_vars, pos_coeffs);
<a name="l00579"></a>00579     }
<a name="l00580"></a>00580     neg = solver-&gt;MakeSum(neg, rhs);
<a name="l00581"></a>00581     <span class="keywordflow">if</span> (define) {
<a name="l00582"></a>00582       IntVar* <span class="keyword">const</span> boolvar = solver-&gt;MakeIsEqualVar(neg, other);
<a name="l00583"></a>00583       VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l00584"></a>00584               &lt;&lt; boolvar-&gt;DebugString();
<a name="l00585"></a>00585       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l00586"></a>00586       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l00587"></a>00587     } <span class="keywordflow">else</span> {
<a name="l00588"></a>00588       IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l00589"></a>00589       Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeIsEqualCt(neg, other, boolvar);
<a name="l00590"></a>00590       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00591"></a>00591       solver-&gt;AddConstraint(ct);
<a name="l00592"></a>00592     }
<a name="l00593"></a>00593   } <span class="keywordflow">else</span> {
<a name="l00594"></a>00594     std::vector&lt;IntVar*&gt; variables(size);
<a name="l00595"></a>00595     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00596"></a>00596       coefficients[i] = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt();
<a name="l00597"></a>00597       variables[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l00598"></a>00598     }
<a name="l00599"></a>00599     IntExpr* <span class="keyword">const</span> var = solver-&gt;MakeScalProd(variables, coefficients);
<a name="l00600"></a>00600     <span class="keywordflow">if</span> (define) {
<a name="l00601"></a>00601       IntVar* <span class="keyword">const</span> boolvar = solver-&gt;MakeIsEqualCstVar(var, rhs);
<a name="l00602"></a>00602       VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l00603"></a>00603               &lt;&lt; boolvar-&gt;DebugString();
<a name="l00604"></a>00604       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l00605"></a>00605       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l00606"></a>00606     } <span class="keywordflow">else</span> {
<a name="l00607"></a>00607       IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l00608"></a>00608       Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeIsEqualCstCt(var, rhs, boolvar);
<a name="l00609"></a>00609       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00610"></a>00610       solver-&gt;AddConstraint(ct);
<a name="l00611"></a>00611     }
<a name="l00612"></a>00612   }
<a name="l00613"></a>00613 }
<a name="l00614"></a>00614 
<a name="l00615"></a><a class="code" href="namespaceoperations__research.html#1e7aa770d3f88bb376e26ad5fa28616d">00615</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#1e7aa770d3f88bb376e26ad5fa28616d">p_int_lin_ne</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l00616"></a>00616   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l00617"></a>00617   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_coefficients = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l00618"></a>00618   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l00619"></a>00619   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_rhs = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2);
<a name="l00620"></a>00620   <span class="keyword">const</span> int64 rhs = node_rhs-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>();
<a name="l00621"></a>00621   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l00622"></a>00622   CHECK_EQ(size, array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size());
<a name="l00623"></a>00623   std::vector&lt;int64&gt; coefficients(size);
<a name="l00624"></a>00624   std::vector&lt;IntVar*&gt; variables(size);
<a name="l00625"></a>00625 
<a name="l00626"></a>00626   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00627"></a>00627     coefficients[i] = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt();
<a name="l00628"></a>00628     variables[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l00629"></a>00629   }
<a name="l00630"></a>00630   Constraint* <span class="keyword">const</span> ct =
<a name="l00631"></a>00631       solver-&gt;MakeNonEquality(
<a name="l00632"></a>00632           solver-&gt;MakeScalProd(variables, coefficients),
<a name="l00633"></a>00633           rhs);
<a name="l00634"></a>00634   VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00635"></a>00635   solver-&gt;AddConstraint(ct);
<a name="l00636"></a>00636 }
<a name="l00637"></a>00637 
<a name="l00638"></a><a class="code" href="namespaceoperations__research.html#2b6f6cfb1a1f00936db5d7c43b1fd99f">00638</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#2b6f6cfb1a1f00936db5d7c43b1fd99f">p_int_lin_ne_reif</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l00639"></a>00639   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l00640"></a>00640   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_coefficients = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l00641"></a>00641   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l00642"></a>00642   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_rhs = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2);
<a name="l00643"></a>00643   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_boolvar = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(3);
<a name="l00644"></a>00644   int64 rhs = node_rhs-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>();
<a name="l00645"></a>00645   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l00646"></a>00646   CHECK_EQ(size, array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size());
<a name="l00647"></a>00647   std::vector&lt;int&gt; coefficients(size);
<a name="l00648"></a>00648 
<a name="l00649"></a>00649   <span class="keywordtype">int</span> positive = 0;
<a name="l00650"></a>00650   <span class="keywordtype">int</span> negative = 0;
<a name="l00651"></a>00651   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00652"></a>00652     coefficients[i] = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt();
<a name="l00653"></a>00653     <span class="keywordflow">if</span> (coefficients[i] &gt; 0) {
<a name="l00654"></a>00654       positive++;
<a name="l00655"></a>00655     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coefficients[i] &lt; 0) {
<a name="l00656"></a>00656       negative++;
<a name="l00657"></a>00657     }
<a name="l00658"></a>00658   }
<a name="l00659"></a>00659   <span class="keyword">const</span> <span class="keywordtype">bool</span> define = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(node_boolvar);
<a name="l00660"></a>00660 
<a name="l00661"></a>00661   <span class="keywordflow">if</span> (positive == 1) {
<a name="l00662"></a>00662     IntExpr* pos = NULL;
<a name="l00663"></a>00663     IntExpr* other = NULL;
<a name="l00664"></a>00664     <span class="keywordflow">if</span> (negative == 2) {
<a name="l00665"></a>00665       std::vector&lt;IntExpr*&gt; neg_exprs;
<a name="l00666"></a>00666       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00667"></a>00667         IntExpr* <span class="keyword">const</span> expr = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]);
<a name="l00668"></a>00668         <span class="keyword">const</span> int64 coeff = coefficients[i];
<a name="l00669"></a>00669         <span class="keywordflow">if</span> (coeff &gt; 0) {
<a name="l00670"></a>00670           pos = solver-&gt;MakeProd(expr, coeff);
<a name="l00671"></a>00671         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coeff &lt; 0) {
<a name="l00672"></a>00672           neg_exprs.push_back(solver-&gt;MakeProd(expr, -coeff));
<a name="l00673"></a>00673         }
<a name="l00674"></a>00674       }
<a name="l00675"></a>00675       other = solver-&gt;MakeSum(neg_exprs[0], neg_exprs[1]);
<a name="l00676"></a>00676     } <span class="keywordflow">else</span> {
<a name="l00677"></a>00677       std::vector&lt;IntVar*&gt; neg_vars;
<a name="l00678"></a>00678       std::vector&lt;int64&gt; neg_coeffs;
<a name="l00679"></a>00679       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00680"></a>00680         IntVar* <span class="keyword">const</span> var = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l00681"></a>00681         <span class="keyword">const</span> int64 coeff = coefficients[i];
<a name="l00682"></a>00682         <span class="keywordflow">if</span> (coeff &gt; 0) {
<a name="l00683"></a>00683           pos = solver-&gt;MakeProd(var, coeff);
<a name="l00684"></a>00684         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coeff &lt; 0) {
<a name="l00685"></a>00685           neg_vars.push_back(var);
<a name="l00686"></a>00686           neg_coeffs.push_back(-coeff);
<a name="l00687"></a>00687         }
<a name="l00688"></a>00688       }
<a name="l00689"></a>00689       other = solver-&gt;MakeScalProd(neg_vars, neg_coeffs);
<a name="l00690"></a>00690     }
<a name="l00691"></a>00691     pos = solver-&gt;MakeSum(pos, -rhs);
<a name="l00692"></a>00692     <span class="keywordflow">if</span> (define) {
<a name="l00693"></a>00693       IntVar* <span class="keyword">const</span> boolvar = solver-&gt;MakeIsDifferentVar(pos, other);
<a name="l00694"></a>00694       VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l00695"></a>00695               &lt;&lt; boolvar-&gt;DebugString();
<a name="l00696"></a>00696       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l00697"></a>00697       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l00698"></a>00698     } <span class="keywordflow">else</span> {
<a name="l00699"></a>00699       IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l00700"></a>00700       Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeIsDifferentCt(pos, other, boolvar);
<a name="l00701"></a>00701       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00702"></a>00702       solver-&gt;AddConstraint(ct);
<a name="l00703"></a>00703     }
<a name="l00704"></a>00704   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (negative == 1) {
<a name="l00705"></a>00705     IntExpr* neg = NULL;
<a name="l00706"></a>00706     IntExpr* other = NULL;
<a name="l00707"></a>00707     <span class="keywordflow">if</span> (positive == 2) {
<a name="l00708"></a>00708       std::vector&lt;IntExpr*&gt; pos_exprs;
<a name="l00709"></a>00709       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00710"></a>00710         <span class="keyword">const</span> int64 coeff = coefficients[i];
<a name="l00711"></a>00711         IntExpr* <span class="keyword">const</span> expr = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]);
<a name="l00712"></a>00712         <span class="keywordflow">if</span> (coeff &lt; 0) {
<a name="l00713"></a>00713           neg = solver-&gt;MakeProd(expr, -coeff);
<a name="l00714"></a>00714         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coeff &gt; 0) {
<a name="l00715"></a>00715           pos_exprs.push_back(solver-&gt;MakeProd(expr, coeff));
<a name="l00716"></a>00716         }
<a name="l00717"></a>00717       }
<a name="l00718"></a>00718       other = solver-&gt;MakeSum(pos_exprs[0], pos_exprs[1]);
<a name="l00719"></a>00719     } <span class="keywordflow">else</span> {
<a name="l00720"></a>00720       std::vector&lt;IntVar*&gt; pos_vars;
<a name="l00721"></a>00721       std::vector&lt;int64&gt; pos_coeffs;
<a name="l00722"></a>00722       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00723"></a>00723         <span class="keyword">const</span> int64 coeff = coefficients[i];
<a name="l00724"></a>00724         IntVar* <span class="keyword">const</span> var = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l00725"></a>00725         <span class="keywordflow">if</span> (coeff &lt; 0) {
<a name="l00726"></a>00726           neg = solver-&gt;MakeProd(var, -coeff);
<a name="l00727"></a>00727         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coeff &gt; 0) {
<a name="l00728"></a>00728           pos_vars.push_back(var);
<a name="l00729"></a>00729           pos_coeffs.push_back(coeff);
<a name="l00730"></a>00730         }
<a name="l00731"></a>00731       }
<a name="l00732"></a>00732       other = solver-&gt;MakeScalProd(pos_vars, pos_coeffs);
<a name="l00733"></a>00733     }
<a name="l00734"></a>00734     neg = solver-&gt;MakeSum(neg, rhs);
<a name="l00735"></a>00735     <span class="keywordflow">if</span> (define) {
<a name="l00736"></a>00736       IntVar* <span class="keyword">const</span> boolvar = solver-&gt;MakeIsDifferentVar(neg, other);
<a name="l00737"></a>00737       VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l00738"></a>00738               &lt;&lt; boolvar-&gt;DebugString();
<a name="l00739"></a>00739       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l00740"></a>00740       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l00741"></a>00741     } <span class="keywordflow">else</span> {
<a name="l00742"></a>00742       IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l00743"></a>00743       Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeIsDifferentCt(neg, other, boolvar);
<a name="l00744"></a>00744       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00745"></a>00745       solver-&gt;AddConstraint(ct);
<a name="l00746"></a>00746     }
<a name="l00747"></a>00747   } <span class="keywordflow">else</span> {
<a name="l00748"></a>00748     std::vector&lt;IntVar*&gt; variables(size);
<a name="l00749"></a>00749     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00750"></a>00750       coefficients[i] = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt();
<a name="l00751"></a>00751       variables[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l00752"></a>00752     }
<a name="l00753"></a>00753     IntExpr* <span class="keyword">const</span> var = solver-&gt;MakeScalProd(variables, coefficients);
<a name="l00754"></a>00754     <span class="keywordflow">if</span> (define) {
<a name="l00755"></a>00755       IntVar* <span class="keyword">const</span> boolvar = solver-&gt;MakeIsDifferentCstVar(var, rhs);
<a name="l00756"></a>00756       VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l00757"></a>00757               &lt;&lt; boolvar-&gt;DebugString();
<a name="l00758"></a>00758       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l00759"></a>00759       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l00760"></a>00760     } <span class="keywordflow">else</span> {
<a name="l00761"></a>00761       IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l00762"></a>00762       Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeIsDifferentCstCt(var, rhs, boolvar);
<a name="l00763"></a>00763       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00764"></a>00764       solver-&gt;AddConstraint(ct);
<a name="l00765"></a>00765     }
<a name="l00766"></a>00766   }
<a name="l00767"></a>00767 }
<a name="l00768"></a>00768 
<a name="l00769"></a><a class="code" href="namespaceoperations__research.html#3db0130160428fa002794d0cc1540ba1">00769</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#3db0130160428fa002794d0cc1540ba1">p_int_lin_le</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l00770"></a>00770   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l00771"></a>00771   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_coefficients = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l00772"></a>00772   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l00773"></a>00773   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_rhs = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2);
<a name="l00774"></a>00774   <span class="keyword">const</span> int64 rhs = node_rhs-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>();
<a name="l00775"></a>00775   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l00776"></a>00776   CHECK_EQ(size, array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size());
<a name="l00777"></a>00777   std::vector&lt;int64&gt; coefficients(size);
<a name="l00778"></a>00778   std::vector&lt;IntVar*&gt; variables(size);
<a name="l00779"></a>00779 
<a name="l00780"></a>00780   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00781"></a>00781     coefficients[i] = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt();
<a name="l00782"></a>00782     variables[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l00783"></a>00783   }
<a name="l00784"></a>00784   Constraint* <span class="keyword">const</span> ct =
<a name="l00785"></a>00785       solver-&gt;MakeScalProdLessOrEqual(variables, coefficients, rhs);
<a name="l00786"></a>00786   VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00787"></a>00787   solver-&gt;AddConstraint(ct);
<a name="l00788"></a>00788 }
<a name="l00789"></a>00789 
<a name="l00790"></a><a class="code" href="namespaceoperations__research.html#17fbb842537a117a0503d79f58bccbad">00790</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#17fbb842537a117a0503d79f58bccbad">p_int_lin_le_reif</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l00791"></a>00791   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l00792"></a>00792   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_coefficients = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l00793"></a>00793   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l00794"></a>00794   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_rhs = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2);
<a name="l00795"></a>00795   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_boolvar = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(3);
<a name="l00796"></a>00796   int64 rhs = node_rhs-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>();
<a name="l00797"></a>00797   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l00798"></a>00798   CHECK_EQ(size, array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size());
<a name="l00799"></a>00799   std::vector&lt;int&gt; coefficients(size);
<a name="l00800"></a>00800 
<a name="l00801"></a>00801   <span class="keywordtype">int</span> positive = 0;
<a name="l00802"></a>00802   <span class="keywordtype">int</span> negative = 0;
<a name="l00803"></a>00803   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00804"></a>00804     coefficients[i] = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt();
<a name="l00805"></a>00805     <span class="keywordflow">if</span> (coefficients[i] &gt; 0) {
<a name="l00806"></a>00806       positive++;
<a name="l00807"></a>00807     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coefficients[i] &lt; 0) {
<a name="l00808"></a>00808       negative++;
<a name="l00809"></a>00809     }
<a name="l00810"></a>00810   }
<a name="l00811"></a>00811   <span class="keyword">const</span> <span class="keywordtype">bool</span> define = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(node_boolvar);
<a name="l00812"></a>00812 
<a name="l00813"></a>00813   <span class="keywordflow">if</span> (positive == 1) {
<a name="l00814"></a>00814     IntExpr* pos = NULL;
<a name="l00815"></a>00815     IntExpr* other = NULL;
<a name="l00816"></a>00816     <span class="keywordflow">if</span> (negative == 2) {
<a name="l00817"></a>00817       std::vector&lt;IntExpr*&gt; neg_exprs;
<a name="l00818"></a>00818       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00819"></a>00819         IntExpr* <span class="keyword">const</span> expr = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]);
<a name="l00820"></a>00820         <span class="keyword">const</span> int64 coeff = coefficients[i];
<a name="l00821"></a>00821         <span class="keywordflow">if</span> (coeff &gt; 0) {
<a name="l00822"></a>00822           pos = solver-&gt;MakeProd(expr, coeff);
<a name="l00823"></a>00823         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coeff &lt; 0) {
<a name="l00824"></a>00824           neg_exprs.push_back(solver-&gt;MakeProd(expr, -coeff));
<a name="l00825"></a>00825         }
<a name="l00826"></a>00826       }
<a name="l00827"></a>00827       other = solver-&gt;MakeSum(neg_exprs[0], neg_exprs[1]);
<a name="l00828"></a>00828     } <span class="keywordflow">else</span> {
<a name="l00829"></a>00829       std::vector&lt;IntVar*&gt; neg_vars;
<a name="l00830"></a>00830       std::vector&lt;int64&gt; neg_coeffs;
<a name="l00831"></a>00831       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00832"></a>00832         IntVar* <span class="keyword">const</span> var = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l00833"></a>00833         <span class="keyword">const</span> int64 coeff = coefficients[i];
<a name="l00834"></a>00834         <span class="keywordflow">if</span> (coeff &gt; 0) {
<a name="l00835"></a>00835           pos = solver-&gt;MakeProd(var, coeff);
<a name="l00836"></a>00836         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coeff &lt; 0) {
<a name="l00837"></a>00837           neg_vars.push_back(var);
<a name="l00838"></a>00838           neg_coeffs.push_back(-coeff);
<a name="l00839"></a>00839         }
<a name="l00840"></a>00840       }
<a name="l00841"></a>00841       other = solver-&gt;MakeScalProd(neg_vars, neg_coeffs);
<a name="l00842"></a>00842     }
<a name="l00843"></a>00843     pos = solver-&gt;MakeSum(pos, -rhs);
<a name="l00844"></a>00844     <span class="keywordflow">if</span> (define) {
<a name="l00845"></a>00845       IntVar* <span class="keyword">const</span> boolvar = solver-&gt;MakeIsLessOrEqualVar(pos, other);
<a name="l00846"></a>00846       VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l00847"></a>00847               &lt;&lt; boolvar-&gt;DebugString();
<a name="l00848"></a>00848       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l00849"></a>00849       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l00850"></a>00850     } <span class="keywordflow">else</span> {
<a name="l00851"></a>00851       IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l00852"></a>00852       Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeIsLessOrEqualCt(pos, other, boolvar);
<a name="l00853"></a>00853       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00854"></a>00854       solver-&gt;AddConstraint(ct);
<a name="l00855"></a>00855     }
<a name="l00856"></a>00856   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (negative == 1) {
<a name="l00857"></a>00857     IntExpr* neg = NULL;
<a name="l00858"></a>00858     IntExpr* other = NULL;
<a name="l00859"></a>00859     <span class="keywordflow">if</span> (positive == 2) {
<a name="l00860"></a>00860       std::vector&lt;IntExpr*&gt; pos_exprs;
<a name="l00861"></a>00861       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00862"></a>00862         <span class="keyword">const</span> int64 coeff = coefficients[i];
<a name="l00863"></a>00863         IntExpr* <span class="keyword">const</span> expr = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]);
<a name="l00864"></a>00864         <span class="keywordflow">if</span> (coeff &lt; 0) {
<a name="l00865"></a>00865           neg = solver-&gt;MakeProd(expr, -coeff);
<a name="l00866"></a>00866         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coeff &gt; 0) {
<a name="l00867"></a>00867           pos_exprs.push_back(solver-&gt;MakeProd(expr, coeff));
<a name="l00868"></a>00868         }
<a name="l00869"></a>00869       }
<a name="l00870"></a>00870       other = solver-&gt;MakeSum(pos_exprs[0], pos_exprs[1]);
<a name="l00871"></a>00871     } <span class="keywordflow">else</span> {
<a name="l00872"></a>00872       std::vector&lt;IntVar*&gt; pos_vars;
<a name="l00873"></a>00873       std::vector&lt;int64&gt; pos_coeffs;
<a name="l00874"></a>00874       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00875"></a>00875         <span class="keyword">const</span> int64 coeff = coefficients[i];
<a name="l00876"></a>00876         IntVar* <span class="keyword">const</span> var = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l00877"></a>00877         <span class="keywordflow">if</span> (coeff &lt; 0) {
<a name="l00878"></a>00878           neg = solver-&gt;MakeProd(var, -coeff);
<a name="l00879"></a>00879         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coeff &gt; 0) {
<a name="l00880"></a>00880           pos_vars.push_back(var);
<a name="l00881"></a>00881           pos_coeffs.push_back(coeff);
<a name="l00882"></a>00882         }
<a name="l00883"></a>00883       }
<a name="l00884"></a>00884       other = solver-&gt;MakeScalProd(pos_vars, pos_coeffs);
<a name="l00885"></a>00885     }
<a name="l00886"></a>00886     neg = solver-&gt;MakeSum(neg, rhs);
<a name="l00887"></a>00887     <span class="keywordflow">if</span> (define) {
<a name="l00888"></a>00888       IntVar* <span class="keyword">const</span> boolvar = solver-&gt;MakeIsGreaterOrEqualVar(neg, other);
<a name="l00889"></a>00889       VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l00890"></a>00890               &lt;&lt; boolvar-&gt;DebugString();
<a name="l00891"></a>00891       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l00892"></a>00892       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l00893"></a>00893     } <span class="keywordflow">else</span> {
<a name="l00894"></a>00894       IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l00895"></a>00895       Constraint* <span class="keyword">const</span> ct =
<a name="l00896"></a>00896           solver-&gt;MakeIsGreaterOrEqualCt(neg, other, boolvar);
<a name="l00897"></a>00897       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00898"></a>00898       solver-&gt;AddConstraint(ct);
<a name="l00899"></a>00899     }
<a name="l00900"></a>00900   } <span class="keywordflow">else</span> {
<a name="l00901"></a>00901     std::vector&lt;IntVar*&gt; variables(size);
<a name="l00902"></a>00902     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00903"></a>00903       coefficients[i] = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt();
<a name="l00904"></a>00904       variables[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l00905"></a>00905     }
<a name="l00906"></a>00906     IntExpr* <span class="keyword">const</span> var = solver-&gt;MakeScalProd(variables, coefficients);
<a name="l00907"></a>00907     <span class="keywordflow">if</span> (define) {
<a name="l00908"></a>00908       IntVar* <span class="keyword">const</span> boolvar = solver-&gt;MakeIsLessOrEqualCstVar(var, rhs);
<a name="l00909"></a>00909       VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l00910"></a>00910               &lt;&lt; boolvar-&gt;DebugString();
<a name="l00911"></a>00911       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l00912"></a>00912       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l00913"></a>00913     } <span class="keywordflow">else</span> {
<a name="l00914"></a>00914       IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l00915"></a>00915       Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeIsLessOrEqualCstCt(var, rhs, boolvar);
<a name="l00916"></a>00916       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00917"></a>00917       solver-&gt;AddConstraint(ct);
<a name="l00918"></a>00918     }
<a name="l00919"></a>00919   }
<a name="l00920"></a>00920 }
<a name="l00921"></a>00921 
<a name="l00922"></a><a class="code" href="namespaceoperations__research.html#9639e0f874e427fdd3e7d159da6fa3c5">00922</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#9639e0f874e427fdd3e7d159da6fa3c5">p_int_lin_lt</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l00923"></a>00923   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l00924"></a>00924   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_coefficients = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l00925"></a>00925   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l00926"></a>00926   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_rhs = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2);
<a name="l00927"></a>00927   <span class="keyword">const</span> int64 rhs = node_rhs-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>();
<a name="l00928"></a>00928   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l00929"></a>00929   CHECK_EQ(size, array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size());
<a name="l00930"></a>00930   std::vector&lt;int64&gt; coefficients(size);
<a name="l00931"></a>00931   std::vector&lt;IntVar*&gt; variables(size);
<a name="l00932"></a>00932 
<a name="l00933"></a>00933   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00934"></a>00934     coefficients[i] = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt();
<a name="l00935"></a>00935     variables[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l00936"></a>00936   }
<a name="l00937"></a>00937   Constraint* <span class="keyword">const</span> ct =
<a name="l00938"></a>00938       solver-&gt;MakeScalProdLessOrEqual(variables, coefficients, rhs - 1);
<a name="l00939"></a>00939   VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l00940"></a>00940   solver-&gt;AddConstraint(ct);
<a name="l00941"></a>00941 }
<a name="l00942"></a>00942 
<a name="l00943"></a><a class="code" href="namespaceoperations__research.html#30e73b0077b71510effb9b7e41743bda">00943</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#30e73b0077b71510effb9b7e41743bda">p_int_lin_lt_reif</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l00944"></a>00944   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l00945"></a>00945   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_coefficients = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l00946"></a>00946   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l00947"></a>00947   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_rhs = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2);
<a name="l00948"></a>00948   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_boolvar = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(3);
<a name="l00949"></a>00949   int64 rhs = node_rhs-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>();
<a name="l00950"></a>00950   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l00951"></a>00951   CHECK_EQ(size, array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size());
<a name="l00952"></a>00952   std::vector&lt;int&gt; coefficients(size);
<a name="l00953"></a>00953 
<a name="l00954"></a>00954   <span class="keywordtype">int</span> positive = 0;
<a name="l00955"></a>00955   <span class="keywordtype">int</span> negative = 0;
<a name="l00956"></a>00956   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00957"></a>00957     coefficients[i] = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt();
<a name="l00958"></a>00958     <span class="keywordflow">if</span> (coefficients[i] &gt; 0) {
<a name="l00959"></a>00959       positive++;
<a name="l00960"></a>00960     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coefficients[i] &lt; 0) {
<a name="l00961"></a>00961       negative++;
<a name="l00962"></a>00962     }
<a name="l00963"></a>00963   }
<a name="l00964"></a>00964   <span class="keyword">const</span> <span class="keywordtype">bool</span> define = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(node_boolvar);
<a name="l00965"></a>00965 
<a name="l00966"></a>00966   <span class="keywordflow">if</span> (positive == 1) {
<a name="l00967"></a>00967     IntExpr* pos = NULL;
<a name="l00968"></a>00968     IntExpr* other = NULL;
<a name="l00969"></a>00969     <span class="keywordflow">if</span> (negative == 2) {
<a name="l00970"></a>00970       std::vector&lt;IntExpr*&gt; neg_exprs;
<a name="l00971"></a>00971       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00972"></a>00972         IntExpr* <span class="keyword">const</span> expr = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]);
<a name="l00973"></a>00973         <span class="keyword">const</span> int64 coeff = coefficients[i];
<a name="l00974"></a>00974         <span class="keywordflow">if</span> (coeff &gt; 0) {
<a name="l00975"></a>00975           pos = solver-&gt;MakeProd(expr, coeff);
<a name="l00976"></a>00976         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coeff &lt; 0) {
<a name="l00977"></a>00977           neg_exprs.push_back(solver-&gt;MakeProd(expr, -coeff));
<a name="l00978"></a>00978         }
<a name="l00979"></a>00979       }
<a name="l00980"></a>00980       other = solver-&gt;MakeSum(neg_exprs[0], neg_exprs[1]);
<a name="l00981"></a>00981     } <span class="keywordflow">else</span> {
<a name="l00982"></a>00982       std::vector&lt;IntVar*&gt; neg_vars;
<a name="l00983"></a>00983       std::vector&lt;int64&gt; neg_coeffs;
<a name="l00984"></a>00984       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l00985"></a>00985         IntVar* <span class="keyword">const</span> var = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l00986"></a>00986         <span class="keyword">const</span> int64 coeff = coefficients[i];
<a name="l00987"></a>00987         <span class="keywordflow">if</span> (coeff &gt; 0) {
<a name="l00988"></a>00988           pos = solver-&gt;MakeProd(var, coeff);
<a name="l00989"></a>00989         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coeff &lt; 0) {
<a name="l00990"></a>00990           neg_vars.push_back(var);
<a name="l00991"></a>00991           neg_coeffs.push_back(-coeff);
<a name="l00992"></a>00992         }
<a name="l00993"></a>00993       }
<a name="l00994"></a>00994       other = solver-&gt;MakeScalProd(neg_vars, neg_coeffs);
<a name="l00995"></a>00995     }
<a name="l00996"></a>00996     pos = solver-&gt;MakeSum(pos, -rhs);
<a name="l00997"></a>00997     <span class="keywordflow">if</span> (define) {
<a name="l00998"></a>00998       IntVar* <span class="keyword">const</span> boolvar = solver-&gt;MakeIsLessVar(pos, other);
<a name="l00999"></a>00999       VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01000"></a>01000               &lt;&lt; boolvar-&gt;DebugString();
<a name="l01001"></a>01001       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l01002"></a>01002       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l01003"></a>01003     } <span class="keywordflow">else</span> {
<a name="l01004"></a>01004       IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l01005"></a>01005       Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeIsLessCt(pos, other, boolvar);
<a name="l01006"></a>01006       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01007"></a>01007       solver-&gt;AddConstraint(ct);
<a name="l01008"></a>01008     }
<a name="l01009"></a>01009   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (negative == 1) {
<a name="l01010"></a>01010     IntExpr* neg = NULL;
<a name="l01011"></a>01011     IntExpr* other = NULL;
<a name="l01012"></a>01012     <span class="keywordflow">if</span> (positive == 2) {
<a name="l01013"></a>01013       std::vector&lt;IntExpr*&gt; pos_exprs;
<a name="l01014"></a>01014       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l01015"></a>01015         <span class="keyword">const</span> int64 coeff = coefficients[i];
<a name="l01016"></a>01016         IntExpr* <span class="keyword">const</span> expr = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]);
<a name="l01017"></a>01017         <span class="keywordflow">if</span> (coeff &lt; 0) {
<a name="l01018"></a>01018           neg = solver-&gt;MakeProd(expr, -coeff);
<a name="l01019"></a>01019         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coeff &gt; 0) {
<a name="l01020"></a>01020           pos_exprs.push_back(solver-&gt;MakeProd(expr, coeff));
<a name="l01021"></a>01021         }
<a name="l01022"></a>01022       }
<a name="l01023"></a>01023       other = solver-&gt;MakeSum(pos_exprs[0], pos_exprs[1]);
<a name="l01024"></a>01024     } <span class="keywordflow">else</span> {
<a name="l01025"></a>01025       std::vector&lt;IntVar*&gt; pos_vars;
<a name="l01026"></a>01026       std::vector&lt;int64&gt; pos_coeffs;
<a name="l01027"></a>01027       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l01028"></a>01028         <span class="keyword">const</span> int64 coeff = coefficients[i];
<a name="l01029"></a>01029         IntVar* <span class="keyword">const</span> var = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l01030"></a>01030         <span class="keywordflow">if</span> (coeff &lt; 0) {
<a name="l01031"></a>01031           neg = solver-&gt;MakeProd(var, -coeff);
<a name="l01032"></a>01032         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coeff &gt; 0) {
<a name="l01033"></a>01033           pos_vars.push_back(var);
<a name="l01034"></a>01034           pos_coeffs.push_back(coeff);
<a name="l01035"></a>01035         }
<a name="l01036"></a>01036       }
<a name="l01037"></a>01037       other = solver-&gt;MakeScalProd(pos_vars, pos_coeffs);
<a name="l01038"></a>01038     }
<a name="l01039"></a>01039     neg = solver-&gt;MakeSum(neg, rhs);
<a name="l01040"></a>01040     <span class="keywordflow">if</span> (define) {
<a name="l01041"></a>01041       IntVar* <span class="keyword">const</span> boolvar = solver-&gt;MakeIsGreaterVar(neg, other);
<a name="l01042"></a>01042       VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01043"></a>01043               &lt;&lt; boolvar-&gt;DebugString();
<a name="l01044"></a>01044       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l01045"></a>01045       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l01046"></a>01046     } <span class="keywordflow">else</span> {
<a name="l01047"></a>01047       IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l01048"></a>01048       Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeIsGreaterCt(neg, other, boolvar);
<a name="l01049"></a>01049       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01050"></a>01050       solver-&gt;AddConstraint(ct);
<a name="l01051"></a>01051     }
<a name="l01052"></a>01052   } <span class="keywordflow">else</span> {
<a name="l01053"></a>01053     std::vector&lt;IntVar*&gt; variables(size);
<a name="l01054"></a>01054     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l01055"></a>01055       coefficients[i] = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt();
<a name="l01056"></a>01056       variables[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l01057"></a>01057     }
<a name="l01058"></a>01058     IntExpr* <span class="keyword">const</span> var = solver-&gt;MakeScalProd(variables, coefficients);
<a name="l01059"></a>01059     <span class="keywordflow">if</span> (define) {
<a name="l01060"></a>01060       IntVar* <span class="keyword">const</span> boolvar = solver-&gt;MakeIsLessCstVar(var, rhs);
<a name="l01061"></a>01061       VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01062"></a>01062               &lt;&lt; boolvar-&gt;DebugString();
<a name="l01063"></a>01063       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l01064"></a>01064       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l01065"></a>01065     } <span class="keywordflow">else</span> {
<a name="l01066"></a>01066       IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l01067"></a>01067       Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeIsLessCstCt(var, rhs, boolvar);
<a name="l01068"></a>01068       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01069"></a>01069       solver-&gt;AddConstraint(ct);
<a name="l01070"></a>01070     }
<a name="l01071"></a>01071   }
<a name="l01072"></a>01072 }
<a name="l01073"></a>01073 
<a name="l01074"></a><a class="code" href="namespaceoperations__research.html#f5a9a3a2d0feb39d322678e870f0ef40">01074</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#f5a9a3a2d0feb39d322678e870f0ef40">p_int_lin_ge</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01075"></a>01075   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01076"></a>01076   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_coefficients = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l01077"></a>01077   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l01078"></a>01078   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_rhs = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2);
<a name="l01079"></a>01079   <span class="keyword">const</span> int64 rhs = node_rhs-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>();
<a name="l01080"></a>01080   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l01081"></a>01081   CHECK_EQ(size, array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size());
<a name="l01082"></a>01082   std::vector&lt;int64&gt; coefficients(size);
<a name="l01083"></a>01083   std::vector&lt;IntVar*&gt; variables(size);
<a name="l01084"></a>01084 
<a name="l01085"></a>01085   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l01086"></a>01086     coefficients[i] = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt();
<a name="l01087"></a>01087     variables[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l01088"></a>01088   }
<a name="l01089"></a>01089   Constraint* <span class="keyword">const</span> ct =
<a name="l01090"></a>01090       solver-&gt;MakeScalProdGreaterOrEqual(variables, coefficients, rhs);
<a name="l01091"></a>01091   VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01092"></a>01092   solver-&gt;AddConstraint(ct);
<a name="l01093"></a>01093 }
<a name="l01094"></a>01094 
<a name="l01095"></a><a class="code" href="namespaceoperations__research.html#f4903a664153acc16e423443dc4e6c9b">01095</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#f4903a664153acc16e423443dc4e6c9b">p_int_lin_ge_reif</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01096"></a>01096   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01097"></a>01097   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_coefficients = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l01098"></a>01098   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l01099"></a>01099   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_rhs = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2);
<a name="l01100"></a>01100   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_boolvar = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(3);
<a name="l01101"></a>01101   int64 rhs = node_rhs-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>();
<a name="l01102"></a>01102   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l01103"></a>01103   CHECK_EQ(size, array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size());
<a name="l01104"></a>01104   std::vector&lt;int&gt; coefficients(size);
<a name="l01105"></a>01105 
<a name="l01106"></a>01106   <span class="keywordtype">int</span> positive = 0;
<a name="l01107"></a>01107   <span class="keywordtype">int</span> negative = 0;
<a name="l01108"></a>01108   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l01109"></a>01109     coefficients[i] = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt();
<a name="l01110"></a>01110     <span class="keywordflow">if</span> (coefficients[i] &gt; 0) {
<a name="l01111"></a>01111       positive++;
<a name="l01112"></a>01112     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coefficients[i] &lt; 0) {
<a name="l01113"></a>01113       negative++;
<a name="l01114"></a>01114     }
<a name="l01115"></a>01115   }
<a name="l01116"></a>01116   <span class="keyword">const</span> <span class="keywordtype">bool</span> define = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(node_boolvar);
<a name="l01117"></a>01117 
<a name="l01118"></a>01118   <span class="keywordflow">if</span> (positive == 1) {
<a name="l01119"></a>01119     IntExpr* pos = NULL;
<a name="l01120"></a>01120     IntExpr* other = NULL;
<a name="l01121"></a>01121     <span class="keywordflow">if</span> (negative == 2) {
<a name="l01122"></a>01122       std::vector&lt;IntExpr*&gt; neg_exprs;
<a name="l01123"></a>01123       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l01124"></a>01124         IntExpr* <span class="keyword">const</span> expr = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]);
<a name="l01125"></a>01125         <span class="keyword">const</span> int64 coeff = coefficients[i];
<a name="l01126"></a>01126         <span class="keywordflow">if</span> (coeff &gt; 0) {
<a name="l01127"></a>01127           pos = solver-&gt;MakeProd(expr, coeff);
<a name="l01128"></a>01128         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coeff &lt; 0) {
<a name="l01129"></a>01129           neg_exprs.push_back(solver-&gt;MakeProd(expr, -coeff));
<a name="l01130"></a>01130         }
<a name="l01131"></a>01131       }
<a name="l01132"></a>01132       other = solver-&gt;MakeSum(neg_exprs[0], neg_exprs[1]);
<a name="l01133"></a>01133     } <span class="keywordflow">else</span> {
<a name="l01134"></a>01134       std::vector&lt;IntVar*&gt; neg_vars;
<a name="l01135"></a>01135       std::vector&lt;int64&gt; neg_coeffs;
<a name="l01136"></a>01136       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l01137"></a>01137         IntVar* <span class="keyword">const</span> var = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l01138"></a>01138         <span class="keyword">const</span> int64 coeff = coefficients[i];
<a name="l01139"></a>01139         <span class="keywordflow">if</span> (coeff &gt; 0) {
<a name="l01140"></a>01140           pos = solver-&gt;MakeProd(var, coeff);
<a name="l01141"></a>01141         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coeff &lt; 0) {
<a name="l01142"></a>01142           neg_vars.push_back(var);
<a name="l01143"></a>01143           neg_coeffs.push_back(-coeff);
<a name="l01144"></a>01144         }
<a name="l01145"></a>01145       }
<a name="l01146"></a>01146       other = solver-&gt;MakeScalProd(neg_vars, neg_coeffs);
<a name="l01147"></a>01147     }
<a name="l01148"></a>01148     pos = solver-&gt;MakeSum(pos, -rhs);
<a name="l01149"></a>01149     <span class="keywordflow">if</span> (define) {
<a name="l01150"></a>01150       IntVar* <span class="keyword">const</span> boolvar = solver-&gt;MakeIsGreaterOrEqualVar(pos, other);
<a name="l01151"></a>01151       VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01152"></a>01152               &lt;&lt; boolvar-&gt;DebugString();
<a name="l01153"></a>01153       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l01154"></a>01154       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l01155"></a>01155     } <span class="keywordflow">else</span> {
<a name="l01156"></a>01156       IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l01157"></a>01157       Constraint* <span class="keyword">const</span> ct =
<a name="l01158"></a>01158           solver-&gt;MakeIsGreaterOrEqualCt(pos, other, boolvar);
<a name="l01159"></a>01159       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01160"></a>01160       solver-&gt;AddConstraint(ct);
<a name="l01161"></a>01161     }
<a name="l01162"></a>01162   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (negative == 1) {
<a name="l01163"></a>01163     IntExpr* neg = NULL;
<a name="l01164"></a>01164     IntExpr* other = NULL;
<a name="l01165"></a>01165     <span class="keywordflow">if</span> (positive == 2) {
<a name="l01166"></a>01166       std::vector&lt;IntExpr*&gt; pos_exprs;
<a name="l01167"></a>01167       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l01168"></a>01168         <span class="keyword">const</span> int64 coeff = coefficients[i];
<a name="l01169"></a>01169         IntExpr* <span class="keyword">const</span> expr = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]);
<a name="l01170"></a>01170         <span class="keywordflow">if</span> (coeff &lt; 0) {
<a name="l01171"></a>01171           neg = solver-&gt;MakeProd(expr, -coeff);
<a name="l01172"></a>01172         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coeff &gt; 0) {
<a name="l01173"></a>01173           pos_exprs.push_back(solver-&gt;MakeProd(expr, coeff));
<a name="l01174"></a>01174         }
<a name="l01175"></a>01175       }
<a name="l01176"></a>01176       other = solver-&gt;MakeSum(pos_exprs[0], pos_exprs[1]);
<a name="l01177"></a>01177     } <span class="keywordflow">else</span> {
<a name="l01178"></a>01178       std::vector&lt;IntVar*&gt; pos_vars;
<a name="l01179"></a>01179       std::vector&lt;int64&gt; pos_coeffs;
<a name="l01180"></a>01180       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l01181"></a>01181         <span class="keyword">const</span> int64 coeff = coefficients[i];
<a name="l01182"></a>01182         IntVar* <span class="keyword">const</span> var = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l01183"></a>01183         <span class="keywordflow">if</span> (coeff &lt; 0) {
<a name="l01184"></a>01184           neg = solver-&gt;MakeProd(var, -coeff);
<a name="l01185"></a>01185         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coeff &gt; 0) {
<a name="l01186"></a>01186           pos_vars.push_back(var);
<a name="l01187"></a>01187           pos_coeffs.push_back(coeff);
<a name="l01188"></a>01188         }
<a name="l01189"></a>01189       }
<a name="l01190"></a>01190       other = solver-&gt;MakeScalProd(pos_vars, pos_coeffs);
<a name="l01191"></a>01191     }
<a name="l01192"></a>01192     neg = solver-&gt;MakeSum(neg, rhs);
<a name="l01193"></a>01193     <span class="keywordflow">if</span> (define) {
<a name="l01194"></a>01194       IntVar* <span class="keyword">const</span> boolvar = solver-&gt;MakeIsLessOrEqualVar(neg, other);
<a name="l01195"></a>01195       VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01196"></a>01196               &lt;&lt; boolvar-&gt;DebugString();
<a name="l01197"></a>01197       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l01198"></a>01198       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l01199"></a>01199     } <span class="keywordflow">else</span> {
<a name="l01200"></a>01200       IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l01201"></a>01201       Constraint* <span class="keyword">const</span> ct =
<a name="l01202"></a>01202           solver-&gt;MakeIsLessOrEqualCt(neg, other, boolvar);
<a name="l01203"></a>01203       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01204"></a>01204       solver-&gt;AddConstraint(ct);
<a name="l01205"></a>01205     }
<a name="l01206"></a>01206   } <span class="keywordflow">else</span> {
<a name="l01207"></a>01207     std::vector&lt;IntVar*&gt; variables(size);
<a name="l01208"></a>01208     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l01209"></a>01209       coefficients[i] = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt();
<a name="l01210"></a>01210       variables[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l01211"></a>01211     }
<a name="l01212"></a>01212     IntExpr* <span class="keyword">const</span> var = solver-&gt;MakeScalProd(variables, coefficients);
<a name="l01213"></a>01213     <span class="keywordflow">if</span> (define) {
<a name="l01214"></a>01214       IntVar* <span class="keyword">const</span> boolvar = solver-&gt;MakeIsGreaterOrEqualCstVar(var, rhs);
<a name="l01215"></a>01215       VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01216"></a>01216               &lt;&lt; boolvar-&gt;DebugString();
<a name="l01217"></a>01217       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l01218"></a>01218       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l01219"></a>01219     } <span class="keywordflow">else</span> {
<a name="l01220"></a>01220       IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l01221"></a>01221       Constraint* <span class="keyword">const</span> ct =
<a name="l01222"></a>01222           solver-&gt;MakeIsGreaterOrEqualCstCt(var, rhs, boolvar);
<a name="l01223"></a>01223       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01224"></a>01224       solver-&gt;AddConstraint(ct);
<a name="l01225"></a>01225     }
<a name="l01226"></a>01226   }
<a name="l01227"></a>01227 }
<a name="l01228"></a>01228 
<a name="l01229"></a><a class="code" href="namespaceoperations__research.html#e1161f0f92341af25486f165f12a2746">01229</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#e1161f0f92341af25486f165f12a2746">p_int_lin_gt</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01230"></a>01230   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01231"></a>01231   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_coefficients = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l01232"></a>01232   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l01233"></a>01233   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_rhs = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2);
<a name="l01234"></a>01234   <span class="keyword">const</span> int64 rhs = node_rhs-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>();
<a name="l01235"></a>01235   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l01236"></a>01236   CHECK_EQ(size, array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size());
<a name="l01237"></a>01237   std::vector&lt;int64&gt; coefficients(size);
<a name="l01238"></a>01238   std::vector&lt;IntVar*&gt; variables(size);
<a name="l01239"></a>01239 
<a name="l01240"></a>01240   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l01241"></a>01241     coefficients[i] = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt();
<a name="l01242"></a>01242     variables[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l01243"></a>01243   }
<a name="l01244"></a>01244   Constraint* <span class="keyword">const</span> ct =
<a name="l01245"></a>01245       solver-&gt;MakeScalProdGreaterOrEqual(variables, coefficients, rhs + 1);
<a name="l01246"></a>01246   VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01247"></a>01247   solver-&gt;AddConstraint(ct);
<a name="l01248"></a>01248 }
<a name="l01249"></a>01249 
<a name="l01250"></a><a class="code" href="namespaceoperations__research.html#5da4dce39576c6009f3b1466888fe2bf">01250</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#5da4dce39576c6009f3b1466888fe2bf">p_int_lin_gt_reif</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01251"></a>01251   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01252"></a>01252   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_coefficients = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l01253"></a>01253   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l01254"></a>01254   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_rhs = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2);
<a name="l01255"></a>01255   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_boolvar = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(3);
<a name="l01256"></a>01256   int64 rhs = node_rhs-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>();
<a name="l01257"></a>01257   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l01258"></a>01258   CHECK_EQ(size, array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size());
<a name="l01259"></a>01259   std::vector&lt;int&gt; coefficients(size);
<a name="l01260"></a>01260 
<a name="l01261"></a>01261   <span class="keywordtype">int</span> positive = 0;
<a name="l01262"></a>01262   <span class="keywordtype">int</span> negative = 0;
<a name="l01263"></a>01263   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l01264"></a>01264     coefficients[i] = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt();
<a name="l01265"></a>01265     <span class="keywordflow">if</span> (coefficients[i] &gt; 0) {
<a name="l01266"></a>01266       positive++;
<a name="l01267"></a>01267     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coefficients[i] &lt; 0) {
<a name="l01268"></a>01268       negative++;
<a name="l01269"></a>01269     }
<a name="l01270"></a>01270   }
<a name="l01271"></a>01271   <span class="keyword">const</span> <span class="keywordtype">bool</span> define = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(node_boolvar);
<a name="l01272"></a>01272 
<a name="l01273"></a>01273   <span class="keywordflow">if</span> (positive == 1) {
<a name="l01274"></a>01274     IntExpr* pos = NULL;
<a name="l01275"></a>01275     IntExpr* other = NULL;
<a name="l01276"></a>01276     <span class="keywordflow">if</span> (negative == 2) {
<a name="l01277"></a>01277       std::vector&lt;IntExpr*&gt; neg_exprs;
<a name="l01278"></a>01278       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l01279"></a>01279         IntExpr* <span class="keyword">const</span> expr = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]);
<a name="l01280"></a>01280         <span class="keyword">const</span> int64 coeff = coefficients[i];
<a name="l01281"></a>01281         <span class="keywordflow">if</span> (coeff &gt; 0) {
<a name="l01282"></a>01282           pos = solver-&gt;MakeProd(expr, coeff);
<a name="l01283"></a>01283         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coeff &lt; 0) {
<a name="l01284"></a>01284           neg_exprs.push_back(solver-&gt;MakeProd(expr, -coeff));
<a name="l01285"></a>01285         }
<a name="l01286"></a>01286       }
<a name="l01287"></a>01287       other = solver-&gt;MakeSum(neg_exprs[0], neg_exprs[1]);
<a name="l01288"></a>01288     } <span class="keywordflow">else</span> {
<a name="l01289"></a>01289       std::vector&lt;IntVar*&gt; neg_vars;
<a name="l01290"></a>01290       std::vector&lt;int64&gt; neg_coeffs;
<a name="l01291"></a>01291       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l01292"></a>01292         IntVar* <span class="keyword">const</span> var = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l01293"></a>01293         <span class="keyword">const</span> int64 coeff = coefficients[i];
<a name="l01294"></a>01294         <span class="keywordflow">if</span> (coeff &gt; 0) {
<a name="l01295"></a>01295           pos = solver-&gt;MakeProd(var, coeff);
<a name="l01296"></a>01296         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coeff &lt; 0) {
<a name="l01297"></a>01297           neg_vars.push_back(var);
<a name="l01298"></a>01298           neg_coeffs.push_back(-coeff);
<a name="l01299"></a>01299         }
<a name="l01300"></a>01300       }
<a name="l01301"></a>01301       other = solver-&gt;MakeScalProd(neg_vars, neg_coeffs);
<a name="l01302"></a>01302     }
<a name="l01303"></a>01303     pos = solver-&gt;MakeSum(pos, -rhs);
<a name="l01304"></a>01304     <span class="keywordflow">if</span> (define) {
<a name="l01305"></a>01305       IntVar* <span class="keyword">const</span> boolvar = solver-&gt;MakeIsGreaterVar(pos, other);
<a name="l01306"></a>01306       VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01307"></a>01307               &lt;&lt; boolvar-&gt;DebugString();
<a name="l01308"></a>01308       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l01309"></a>01309       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l01310"></a>01310     } <span class="keywordflow">else</span> {
<a name="l01311"></a>01311       IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l01312"></a>01312       Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeIsGreaterCt(pos, other, boolvar);
<a name="l01313"></a>01313       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01314"></a>01314       solver-&gt;AddConstraint(ct);
<a name="l01315"></a>01315     }
<a name="l01316"></a>01316   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (negative == 1) {
<a name="l01317"></a>01317     IntExpr* neg = NULL;
<a name="l01318"></a>01318     IntExpr* other = NULL;
<a name="l01319"></a>01319     <span class="keywordflow">if</span> (positive == 2) {
<a name="l01320"></a>01320       std::vector&lt;IntExpr*&gt; pos_exprs;
<a name="l01321"></a>01321       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l01322"></a>01322         <span class="keyword">const</span> int64 coeff = coefficients[i];
<a name="l01323"></a>01323         IntExpr* <span class="keyword">const</span> expr = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]);
<a name="l01324"></a>01324         <span class="keywordflow">if</span> (coeff &lt; 0) {
<a name="l01325"></a>01325           neg = solver-&gt;MakeProd(expr, -coeff);
<a name="l01326"></a>01326         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coeff &gt; 0) {
<a name="l01327"></a>01327           pos_exprs.push_back(solver-&gt;MakeProd(expr, coeff));
<a name="l01328"></a>01328         }
<a name="l01329"></a>01329       }
<a name="l01330"></a>01330       other = solver-&gt;MakeSum(pos_exprs[0], pos_exprs[1]);
<a name="l01331"></a>01331     } <span class="keywordflow">else</span> {
<a name="l01332"></a>01332       std::vector&lt;IntVar*&gt; pos_vars;
<a name="l01333"></a>01333       std::vector&lt;int64&gt; pos_coeffs;
<a name="l01334"></a>01334       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l01335"></a>01335         <span class="keyword">const</span> int64 coeff = coefficients[i];
<a name="l01336"></a>01336         IntVar* <span class="keyword">const</span> var = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l01337"></a>01337         <span class="keywordflow">if</span> (coeff &lt; 0) {
<a name="l01338"></a>01338           neg = solver-&gt;MakeProd(var, -coeff);
<a name="l01339"></a>01339         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coeff &gt; 0) {
<a name="l01340"></a>01340           pos_vars.push_back(var);
<a name="l01341"></a>01341           pos_coeffs.push_back(coeff);
<a name="l01342"></a>01342         }
<a name="l01343"></a>01343       }
<a name="l01344"></a>01344       other = solver-&gt;MakeScalProd(pos_vars, pos_coeffs);
<a name="l01345"></a>01345     }
<a name="l01346"></a>01346     neg = solver-&gt;MakeSum(neg, rhs);
<a name="l01347"></a>01347     <span class="keywordflow">if</span> (define) {
<a name="l01348"></a>01348       IntVar* <span class="keyword">const</span> boolvar = solver-&gt;MakeIsLessVar(neg, other);
<a name="l01349"></a>01349       VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01350"></a>01350               &lt;&lt; boolvar-&gt;DebugString();
<a name="l01351"></a>01351       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l01352"></a>01352       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l01353"></a>01353     } <span class="keywordflow">else</span> {
<a name="l01354"></a>01354       IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l01355"></a>01355       Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeIsLessCt(neg, other, boolvar);
<a name="l01356"></a>01356       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01357"></a>01357       solver-&gt;AddConstraint(ct);
<a name="l01358"></a>01358     }
<a name="l01359"></a>01359   } <span class="keywordflow">else</span> {
<a name="l01360"></a>01360     std::vector&lt;IntVar*&gt; variables(size);
<a name="l01361"></a>01361     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l01362"></a>01362       coefficients[i] = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt();
<a name="l01363"></a>01363       variables[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l01364"></a>01364     }
<a name="l01365"></a>01365     IntExpr* <span class="keyword">const</span> var = solver-&gt;MakeScalProd(variables, coefficients);
<a name="l01366"></a>01366     <span class="keywordflow">if</span> (define) {
<a name="l01367"></a>01367       IntVar* <span class="keyword">const</span> boolvar = solver-&gt;MakeIsGreaterCstVar(var, rhs);
<a name="l01368"></a>01368       VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01369"></a>01369               &lt;&lt; boolvar-&gt;DebugString();
<a name="l01370"></a>01370       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l01371"></a>01371       model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l01372"></a>01372     } <span class="keywordflow">else</span> {
<a name="l01373"></a>01373       IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l01374"></a>01374       Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeIsGreaterCstCt(var, rhs, boolvar);
<a name="l01375"></a>01375       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01376"></a>01376       solver-&gt;AddConstraint(ct);
<a name="l01377"></a>01377     }
<a name="l01378"></a>01378   }
<a name="l01379"></a>01379 }
<a name="l01380"></a>01380 
<a name="l01381"></a>01381 <span class="comment">/* arithmetic constraints */</span>
<a name="l01382"></a>01382 
<a name="l01383"></a><a class="code" href="namespaceoperations__research.html#dec750ebad57e441acf98a927e392c60">01383</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#dec750ebad57e441acf98a927e392c60" title="arithmetic constraints">p_int_plus</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01384"></a>01384   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01385"></a>01385   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0))) {
<a name="l01386"></a>01386     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l01387"></a>01387     IntExpr* <span class="keyword">const</span> target = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2));
<a name="l01388"></a>01388     IntExpr* <span class="keyword">const</span> left = solver-&gt;MakeDifference(target, right);
<a name="l01389"></a>01389     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01390"></a>01390             &lt;&lt; left-&gt;DebugString();
<a name="l01391"></a>01391     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l01392"></a>01392     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0), left);
<a name="l01393"></a>01393   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1))) {
<a name="l01394"></a>01394     IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l01395"></a>01395     IntExpr* <span class="keyword">const</span> target = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2));
<a name="l01396"></a>01396     IntExpr* <span class="keyword">const</span> right = solver-&gt;MakeDifference(target, left);
<a name="l01397"></a>01397     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01398"></a>01398             &lt;&lt; right-&gt;DebugString();
<a name="l01399"></a>01399     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l01400"></a>01400     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1), right);
<a name="l01401"></a>01401   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2))) {
<a name="l01402"></a>01402     IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l01403"></a>01403     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l01404"></a>01404     IntExpr* <span class="keyword">const</span> target = solver-&gt;MakeSum(left, right);
<a name="l01405"></a>01405     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01406"></a>01406             &lt;&lt; target-&gt;DebugString();
<a name="l01407"></a>01407     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2));
<a name="l01408"></a>01408     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2), target);
<a name="l01409"></a>01409   } <span class="keywordflow">else</span> {
<a name="l01410"></a>01410     IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l01411"></a>01411     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l01412"></a>01412     IntExpr* <span class="keyword">const</span> target = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2));
<a name="l01413"></a>01413     Constraint* <span class="keyword">const</span> ct =
<a name="l01414"></a>01414         solver-&gt;MakeEquality(solver-&gt;MakeSum(left, right), target);
<a name="l01415"></a>01415     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01416"></a>01416     solver-&gt;AddConstraint(ct);
<a name="l01417"></a>01417   }
<a name="l01418"></a>01418 }
<a name="l01419"></a>01419 
<a name="l01420"></a><a class="code" href="namespaceoperations__research.html#bfb7a4855c1f1541a24eaf2de60ac7f7">01420</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#bfb7a4855c1f1541a24eaf2de60ac7f7">p_int_minus</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01421"></a>01421   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01422"></a>01422   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l01423"></a>01423   IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l01424"></a>01424   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2))) {
<a name="l01425"></a>01425     IntExpr* <span class="keyword">const</span> target = solver-&gt;MakeDifference(left, right);
<a name="l01426"></a>01426     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01427"></a>01427             &lt;&lt; target-&gt;DebugString();
<a name="l01428"></a>01428     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2));
<a name="l01429"></a>01429     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2), target);
<a name="l01430"></a>01430   } <span class="keywordflow">else</span> {
<a name="l01431"></a>01431     IntExpr* <span class="keyword">const</span> target = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2));
<a name="l01432"></a>01432     Constraint* <span class="keyword">const</span> ct =
<a name="l01433"></a>01433         solver-&gt;MakeEquality(solver-&gt;MakeDifference(left, right), target);
<a name="l01434"></a>01434     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01435"></a>01435     solver-&gt;AddConstraint(ct);
<a name="l01436"></a>01436   }
<a name="l01437"></a>01437 }
<a name="l01438"></a>01438 
<a name="l01439"></a><a class="code" href="namespaceoperations__research.html#b7a4ac2e431aae10dc7495c5ce794996">01439</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#b7a4ac2e431aae10dc7495c5ce794996">p_int_times</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01440"></a>01440   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01441"></a>01441   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l01442"></a>01442   IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l01443"></a>01443   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2))) {
<a name="l01444"></a>01444     IntExpr* <span class="keyword">const</span> target = solver-&gt;MakeProd(left, right);
<a name="l01445"></a>01445     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01446"></a>01446             &lt;&lt; target-&gt;DebugString();
<a name="l01447"></a>01447     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2));
<a name="l01448"></a>01448     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2), target);
<a name="l01449"></a>01449   } <span class="keywordflow">else</span> {
<a name="l01450"></a>01450     IntExpr* <span class="keyword">const</span> target = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2));
<a name="l01451"></a>01451     Constraint* <span class="keyword">const</span> ct =
<a name="l01452"></a>01452         solver-&gt;MakeEquality(solver-&gt;MakeProd(left, right), target);
<a name="l01453"></a>01453     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01454"></a>01454     solver-&gt;AddConstraint(ct);
<a name="l01455"></a>01455   }
<a name="l01456"></a>01456 }
<a name="l01457"></a>01457 
<a name="l01458"></a><a class="code" href="namespaceoperations__research.html#2b6798c6cad4dc4d54139caba0811189">01458</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#2b6798c6cad4dc4d54139caba0811189">p_int_div</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01459"></a>01459   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01460"></a>01460   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l01461"></a>01461   IntExpr* <span class="keyword">const</span> target = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2));
<a name="l01462"></a>01462   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#f2abd643d90430d6edd3c0c5ab4f4cee" title="Test if node is an integer variable node.">isIntVar</a>()) {
<a name="l01463"></a>01463     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l01464"></a>01464     Constraint* <span class="keyword">const</span> ct =
<a name="l01465"></a>01465         solver-&gt;MakeEquality(solver-&gt;MakeDiv(left, right), target);
<a name="l01466"></a>01466     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01467"></a>01467     solver-&gt;AddConstraint(ct);
<a name="l01468"></a>01468   } <span class="keywordflow">else</span> {
<a name="l01469"></a>01469     Constraint* <span class="keyword">const</span> ct =
<a name="l01470"></a>01470         solver-&gt;MakeEquality(
<a name="l01471"></a>01471             solver-&gt;MakeDiv(left, spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>()), target);
<a name="l01472"></a>01472     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01473"></a>01473     solver-&gt;AddConstraint(ct);
<a name="l01474"></a>01474   }
<a name="l01475"></a>01475 }
<a name="l01476"></a>01476 
<a name="l01477"></a><a class="code" href="namespaceoperations__research.html#6066d735099c0866e314da237fca42b1">01477</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#6066d735099c0866e314da237fca42b1">p_int_mod</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01478"></a>01478   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01479"></a>01479   IntVar* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0))-&gt;Var();
<a name="l01480"></a>01480   IntVar* <span class="keyword">const</span> target = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2))-&gt;Var();
<a name="l01481"></a>01481   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#f2abd643d90430d6edd3c0c5ab4f4cee" title="Test if node is an integer variable node.">isIntVar</a>()) {
<a name="l01482"></a>01482     IntVar* <span class="keyword">const</span> mod = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1))-&gt;Var();
<a name="l01483"></a>01483     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeModuloConstraint(left, mod, target);
<a name="l01484"></a>01484     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01485"></a>01485     solver-&gt;AddConstraint(ct);
<a name="l01486"></a>01486   } <span class="keywordflow">else</span> {
<a name="l01487"></a>01487     <span class="keyword">const</span> int64 mod = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>();
<a name="l01488"></a>01488     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeModuloConstraint(left, mod, target);
<a name="l01489"></a>01489     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01490"></a>01490     solver-&gt;AddConstraint(ct);
<a name="l01491"></a>01491   }
<a name="l01492"></a>01492 }
<a name="l01493"></a>01493 
<a name="l01494"></a><a class="code" href="namespaceoperations__research.html#7dc292c6d60a0663e0c7f9e889da5842">01494</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#7dc292c6d60a0663e0c7f9e889da5842">p_int_min</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01495"></a>01495   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01496"></a>01496   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l01497"></a>01497   IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l01498"></a>01498   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2))) {
<a name="l01499"></a>01499     IntExpr* <span class="keyword">const</span> target = solver-&gt;MakeMin(left, right);
<a name="l01500"></a>01500     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01501"></a>01501             &lt;&lt; target-&gt;DebugString();
<a name="l01502"></a>01502     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2));
<a name="l01503"></a>01503     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2), target);
<a name="l01504"></a>01504   } <span class="keywordflow">else</span> {
<a name="l01505"></a>01505     IntExpr* <span class="keyword">const</span> target = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2));
<a name="l01506"></a>01506     Constraint* <span class="keyword">const</span> ct =
<a name="l01507"></a>01507         solver-&gt;MakeEquality(solver-&gt;MakeMin(left, right), target);
<a name="l01508"></a>01508     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01509"></a>01509     solver-&gt;AddConstraint(ct);
<a name="l01510"></a>01510   }
<a name="l01511"></a>01511 }
<a name="l01512"></a>01512 
<a name="l01513"></a><a class="code" href="namespaceoperations__research.html#ba36a785cf33b7c8410b2324354017ad">01513</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#ba36a785cf33b7c8410b2324354017ad">p_int_max</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01514"></a>01514   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01515"></a>01515   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l01516"></a>01516   IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l01517"></a>01517   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2))) {
<a name="l01518"></a>01518     IntExpr* <span class="keyword">const</span> target = solver-&gt;MakeMax(left, right);
<a name="l01519"></a>01519     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01520"></a>01520             &lt;&lt; target-&gt;DebugString();
<a name="l01521"></a>01521     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2));
<a name="l01522"></a>01522     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2), target);
<a name="l01523"></a>01523   } <span class="keywordflow">else</span> {
<a name="l01524"></a>01524     IntExpr* <span class="keyword">const</span> target = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2));
<a name="l01525"></a>01525     Constraint* <span class="keyword">const</span> ct =
<a name="l01526"></a>01526         solver-&gt;MakeEquality(solver-&gt;MakeMax(left, right), target);
<a name="l01527"></a>01527     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01528"></a>01528     solver-&gt;AddConstraint(ct);
<a name="l01529"></a>01529   }
<a name="l01530"></a>01530 }
<a name="l01531"></a>01531 
<a name="l01532"></a><a class="code" href="namespaceoperations__research.html#4a9940ecaf77470f0906599d0ce081a1">01532</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#4a9940ecaf77470f0906599d0ce081a1">p_int_negate</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01533"></a>01533   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01534"></a>01534   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l01535"></a>01535   IntExpr* <span class="keyword">const</span> target = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2));
<a name="l01536"></a>01536   Constraint* <span class="keyword">const</span> ct =
<a name="l01537"></a>01537       solver-&gt;MakeEquality(solver-&gt;MakeOpposite(left), target);
<a name="l01538"></a>01538   VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01539"></a>01539   solver-&gt;AddConstraint(ct);
<a name="l01540"></a>01540 }
<a name="l01541"></a>01541 
<a name="l01542"></a>01542 <span class="comment">// Bools</span>
<a name="l01543"></a>01543 
<a name="l01544"></a><a class="code" href="namespaceoperations__research.html#9de2a8148ffbe7154efded418f5944b0">01544</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#9de2a8148ffbe7154efded418f5944b0" title="Bools.">p_bool_eq</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01545"></a>01545   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01546"></a>01546   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0))) {
<a name="l01547"></a>01547     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l01548"></a>01548     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01549"></a>01549             &lt;&lt; right-&gt;DebugString();
<a name="l01550"></a>01550     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l01551"></a>01551     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0), right);
<a name="l01552"></a>01552   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1))) {
<a name="l01553"></a>01553     IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l01554"></a>01554     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01555"></a>01555             &lt;&lt; left-&gt;DebugString();
<a name="l01556"></a>01556     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l01557"></a>01557     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1), left);
<a name="l01558"></a>01558   } <span class="keywordflow">else</span> {
<a name="l01559"></a>01559     IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l01560"></a>01560     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l01561"></a>01561     <span class="keywordflow">if</span> (FLAGS_use_minisat &amp;&amp; <a class="code" href="namespaceoperations__research.html#24d33d13132f40acb3793499ba0f6e9b">AddBoolEq</a>(model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e6e8732138dce21e9ac2d6a56a41c7e7">Sat</a>(), left, right)) {
<a name="l01562"></a>01562       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted to minisat"</span>;
<a name="l01563"></a>01563     } <span class="keywordflow">else</span> {
<a name="l01564"></a>01564       Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeEquality(left, right);
<a name="l01565"></a>01565       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01566"></a>01566       solver-&gt;AddConstraint(ct);
<a name="l01567"></a>01567     }
<a name="l01568"></a>01568   }
<a name="l01569"></a>01569 }
<a name="l01570"></a>01570 
<a name="l01571"></a><a class="code" href="namespaceoperations__research.html#31a0832ed1fa3ba595bdc94b6b5423f1">01571</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#31a0832ed1fa3ba595bdc94b6b5423f1">p_bool_ne</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01572"></a>01572   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01573"></a>01573   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l01574"></a>01574   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#2d7a39334d92d2c9b78b583e08ad3667" title="Test if node is a Boolean node.">isBool</a>()) {
<a name="l01575"></a>01575     Constraint* <span class="keyword">const</span> ct =
<a name="l01576"></a>01576         solver-&gt;MakeNonEquality(left, spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#f0567eb5be0c9a72409d5cdeaa35bc7e" title="Cast this node to a Boolean node.">getBool</a>());
<a name="l01577"></a>01577     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01578"></a>01578     solver-&gt;AddConstraint(ct);
<a name="l01579"></a>01579   } <span class="keywordflow">else</span> {
<a name="l01580"></a>01580     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l01581"></a>01581     <span class="keywordflow">if</span> (FLAGS_use_minisat &amp;&amp; <a class="code" href="namespaceoperations__research.html#f94692ccb5dc6796b32b6f408d45dafe">AddBoolNot</a>(model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e6e8732138dce21e9ac2d6a56a41c7e7">Sat</a>(), left, right)) {
<a name="l01582"></a>01582       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted to minisat"</span>;
<a name="l01583"></a>01583     } <span class="keywordflow">else</span> {
<a name="l01584"></a>01584       Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeNonEquality(left, right);
<a name="l01585"></a>01585       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01586"></a>01586       solver-&gt;AddConstraint(ct);
<a name="l01587"></a>01587     }
<a name="l01588"></a>01588   }
<a name="l01589"></a>01589 }
<a name="l01590"></a>01590 
<a name="l01591"></a><a class="code" href="namespaceoperations__research.html#3e48b3c33396e63208c1accdfce69ea9">01591</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#3e48b3c33396e63208c1accdfce69ea9">p_bool_ge</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01592"></a>01592   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01593"></a>01593   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l01594"></a>01594   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#2d7a39334d92d2c9b78b583e08ad3667" title="Test if node is a Boolean node.">isBool</a>()) {
<a name="l01595"></a>01595     Constraint* <span class="keyword">const</span> ct =
<a name="l01596"></a>01596         solver-&gt;MakeGreaterOrEqual(left, spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#f0567eb5be0c9a72409d5cdeaa35bc7e" title="Cast this node to a Boolean node.">getBool</a>());
<a name="l01597"></a>01597     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01598"></a>01598     solver-&gt;AddConstraint(ct);
<a name="l01599"></a>01599   } <span class="keywordflow">else</span> {
<a name="l01600"></a>01600     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l01601"></a>01601     <span class="keywordflow">if</span> (FLAGS_use_minisat &amp;&amp; <a class="code" href="namespaceoperations__research.html#88d9997bac8a172f46490206a62a400d">AddBoolLe</a>(model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e6e8732138dce21e9ac2d6a56a41c7e7">Sat</a>(), right, left)) {
<a name="l01602"></a>01602       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted to minisat"</span>;
<a name="l01603"></a>01603     } <span class="keywordflow">else</span> {
<a name="l01604"></a>01604       Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeGreaterOrEqual(left, right);
<a name="l01605"></a>01605       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01606"></a>01606       solver-&gt;AddConstraint(ct);
<a name="l01607"></a>01607     }
<a name="l01608"></a>01608   }
<a name="l01609"></a>01609 }
<a name="l01610"></a>01610 
<a name="l01611"></a><a class="code" href="namespaceoperations__research.html#16929d502b80ef208245438b2284f5a3">01611</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#16929d502b80ef208245438b2284f5a3">p_bool_gt</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01612"></a>01612   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01613"></a>01613   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l01614"></a>01614   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#2d7a39334d92d2c9b78b583e08ad3667" title="Test if node is a Boolean node.">isBool</a>()) {
<a name="l01615"></a>01615     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeGreater(left, spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#f0567eb5be0c9a72409d5cdeaa35bc7e" title="Cast this node to a Boolean node.">getBool</a>());
<a name="l01616"></a>01616     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01617"></a>01617     solver-&gt;AddConstraint(ct);
<a name="l01618"></a>01618   } <span class="keywordflow">else</span> {
<a name="l01619"></a>01619     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l01620"></a>01620     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeGreater(left, right);
<a name="l01621"></a>01621     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01622"></a>01622     solver-&gt;AddConstraint(ct);
<a name="l01623"></a>01623   }
<a name="l01624"></a>01624 }
<a name="l01625"></a>01625 
<a name="l01626"></a><a class="code" href="namespaceoperations__research.html#77768fdba486af96ca8f916a339d362c">01626</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#77768fdba486af96ca8f916a339d362c">p_bool_le</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01627"></a>01627   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01628"></a>01628   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l01629"></a>01629   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#2d7a39334d92d2c9b78b583e08ad3667" title="Test if node is a Boolean node.">isBool</a>()) {
<a name="l01630"></a>01630     Constraint* <span class="keyword">const</span> ct =
<a name="l01631"></a>01631         solver-&gt;MakeLessOrEqual(left, spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#f0567eb5be0c9a72409d5cdeaa35bc7e" title="Cast this node to a Boolean node.">getBool</a>());
<a name="l01632"></a>01632     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01633"></a>01633     solver-&gt;AddConstraint(ct);
<a name="l01634"></a>01634   } <span class="keywordflow">else</span> {
<a name="l01635"></a>01635     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l01636"></a>01636     <span class="keywordflow">if</span> (FLAGS_use_minisat &amp;&amp; <a class="code" href="namespaceoperations__research.html#88d9997bac8a172f46490206a62a400d">AddBoolLe</a>(model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e6e8732138dce21e9ac2d6a56a41c7e7">Sat</a>(), left, right)) {
<a name="l01637"></a>01637       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted to minisat"</span>;
<a name="l01638"></a>01638     } <span class="keywordflow">else</span> {
<a name="l01639"></a>01639       Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeLessOrEqual(left, right);
<a name="l01640"></a>01640       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01641"></a>01641       solver-&gt;AddConstraint(ct);
<a name="l01642"></a>01642     }
<a name="l01643"></a>01643   }
<a name="l01644"></a>01644 }
<a name="l01645"></a>01645 
<a name="l01646"></a><a class="code" href="namespaceoperations__research.html#b10933ef746d2672637bc9a480907f99">01646</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#b10933ef746d2672637bc9a480907f99">p_bool_lt</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01647"></a>01647   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01648"></a>01648   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l01649"></a>01649   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#2d7a39334d92d2c9b78b583e08ad3667" title="Test if node is a Boolean node.">isBool</a>()) {
<a name="l01650"></a>01650     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeLess(left, spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#f0567eb5be0c9a72409d5cdeaa35bc7e" title="Cast this node to a Boolean node.">getBool</a>());
<a name="l01651"></a>01651     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01652"></a>01652     solver-&gt;AddConstraint(ct);
<a name="l01653"></a>01653   } <span class="keywordflow">else</span> {
<a name="l01654"></a>01654     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l01655"></a>01655     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeLess(left, right);
<a name="l01656"></a>01656     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01657"></a>01657     solver-&gt;AddConstraint(ct);
<a name="l01658"></a>01658   }
<a name="l01659"></a>01659 }
<a name="l01660"></a>01660 
<a name="l01661"></a>01661 <span class="comment">/* Comparisons */</span>
<a name="l01662"></a><a class="code" href="namespaceoperations__research.html#2e017c15a7a6b92185cf46e6bd1ff815">01662</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#2e017c15a7a6b92185cf46e6bd1ff815" title="Comparisons.">p_bool_eq_reif</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01663"></a>01663   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01664"></a>01664   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l01665"></a>01665   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_right = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1);
<a name="l01666"></a>01666   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_boolvar = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2);
<a name="l01667"></a>01667   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(node_boolvar)) {
<a name="l01668"></a>01668     IntVar* <span class="keyword">const</span> boolvar =
<a name="l01669"></a>01669         node_right-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#2d7a39334d92d2c9b78b583e08ad3667" title="Test if node is a Boolean node.">isBool</a>() ?
<a name="l01670"></a>01670         solver-&gt;MakeIsEqualCstVar(left, node_right-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#f0567eb5be0c9a72409d5cdeaa35bc7e" title="Cast this node to a Boolean node.">getBool</a>()) :
<a name="l01671"></a>01671         solver-&gt;MakeIsEqualVar(left, model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_right));
<a name="l01672"></a>01672     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01673"></a>01673             &lt;&lt; boolvar-&gt;DebugString();
<a name="l01674"></a>01674     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l01675"></a>01675     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l01676"></a>01676     CHECK_NOTNULL(boolvar);
<a name="l01677"></a>01677   } <span class="keywordflow">else</span> {
<a name="l01678"></a>01678     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_right);
<a name="l01679"></a>01679     IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l01680"></a>01680     <span class="keywordflow">if</span> (FLAGS_use_minisat &amp;&amp;
<a name="l01681"></a>01681         <a class="code" href="namespaceoperations__research.html#8976c503856808e862be2f464108f44c">AddBoolIsEqVar</a>(model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e6e8732138dce21e9ac2d6a56a41c7e7">Sat</a>(), left, right, boolvar)) {
<a name="l01682"></a>01682       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted to minisat"</span>;
<a name="l01683"></a>01683     } <span class="keywordflow">else</span> {
<a name="l01684"></a>01684       Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeIsEqualCt(left, right, boolvar);
<a name="l01685"></a>01685       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01686"></a>01686       solver-&gt;AddConstraint(ct);
<a name="l01687"></a>01687     }
<a name="l01688"></a>01688   }
<a name="l01689"></a>01689 }
<a name="l01690"></a>01690 
<a name="l01691"></a><a class="code" href="namespaceoperations__research.html#5798dcbadb5b970904b121f395fba039">01691</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#5798dcbadb5b970904b121f395fba039">p_bool_ne_reif</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01692"></a>01692   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01693"></a>01693   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l01694"></a>01694   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_right = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1);
<a name="l01695"></a>01695   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_boolvar = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2);
<a name="l01696"></a>01696   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(node_boolvar)) {
<a name="l01697"></a>01697     IntVar* <span class="keyword">const</span> boolvar =
<a name="l01698"></a>01698         node_right-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#2d7a39334d92d2c9b78b583e08ad3667" title="Test if node is a Boolean node.">isBool</a>() ?
<a name="l01699"></a>01699         solver-&gt;MakeIsDifferentCstVar(left, node_right-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#f0567eb5be0c9a72409d5cdeaa35bc7e" title="Cast this node to a Boolean node.">getBool</a>()) :
<a name="l01700"></a>01700         solver-&gt;MakeIsDifferentVar(left, model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_right));
<a name="l01701"></a>01701     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01702"></a>01702             &lt;&lt; boolvar-&gt;DebugString();
<a name="l01703"></a>01703     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l01704"></a>01704     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l01705"></a>01705     CHECK_NOTNULL(boolvar);
<a name="l01706"></a>01706   } <span class="keywordflow">else</span> {
<a name="l01707"></a>01707     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l01708"></a>01708     IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l01709"></a>01709     <span class="keywordflow">if</span> (FLAGS_use_minisat &amp;&amp;
<a name="l01710"></a>01710         <a class="code" href="namespaceoperations__research.html#5ae3d4db1fe451e74a6bc846a0480f25">AddBoolIsNEqVar</a>(model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e6e8732138dce21e9ac2d6a56a41c7e7">Sat</a>(), left, right, boolvar)) {
<a name="l01711"></a>01711       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted to minisat"</span>;
<a name="l01712"></a>01712     } <span class="keywordflow">else</span> {
<a name="l01713"></a>01713       Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeIsDifferentCt(left, right, boolvar);
<a name="l01714"></a>01714       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01715"></a>01715       solver-&gt;AddConstraint(ct);
<a name="l01716"></a>01716     }
<a name="l01717"></a>01717   }
<a name="l01718"></a>01718 }
<a name="l01719"></a>01719 
<a name="l01720"></a><a class="code" href="namespaceoperations__research.html#c3d946e96043f63f18427838c3f832e6">01720</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#c3d946e96043f63f18427838c3f832e6">p_bool_ge_reif</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01721"></a>01721   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01722"></a>01722   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l01723"></a>01723   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_right = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1);
<a name="l01724"></a>01724   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_boolvar = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2);
<a name="l01725"></a>01725   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(node_boolvar)) {
<a name="l01726"></a>01726     IntVar* <span class="keyword">const</span> boolvar =
<a name="l01727"></a>01727         node_right-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#2d7a39334d92d2c9b78b583e08ad3667" title="Test if node is a Boolean node.">isBool</a>() ?
<a name="l01728"></a>01728         solver-&gt;MakeIsGreaterOrEqualCstVar(left, node_right-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#f0567eb5be0c9a72409d5cdeaa35bc7e" title="Cast this node to a Boolean node.">getBool</a>()) :
<a name="l01729"></a>01729         solver-&gt;MakeIsGreaterOrEqualVar(left, model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_right));
<a name="l01730"></a>01730     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01731"></a>01731             &lt;&lt; boolvar-&gt;DebugString();
<a name="l01732"></a>01732     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l01733"></a>01733     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l01734"></a>01734     CHECK_NOTNULL(boolvar);
<a name="l01735"></a>01735   } <span class="keywordflow">else</span> {
<a name="l01736"></a>01736     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l01737"></a>01737     IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l01738"></a>01738     <span class="keywordflow">if</span> (FLAGS_use_minisat &amp;&amp;
<a name="l01739"></a>01739         <a class="code" href="namespaceoperations__research.html#7538bc3824f9a28c0360db1f899c5654">AddBoolIsLeVar</a>(model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e6e8732138dce21e9ac2d6a56a41c7e7">Sat</a>(), right, left, boolvar)) {
<a name="l01740"></a>01740       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted to minisat"</span>;
<a name="l01741"></a>01741     } <span class="keywordflow">else</span> {
<a name="l01742"></a>01742       Constraint* <span class="keyword">const</span> ct =
<a name="l01743"></a>01743           solver-&gt;MakeIsGreaterOrEqualCt(left, right, boolvar);
<a name="l01744"></a>01744       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01745"></a>01745       solver-&gt;AddConstraint(ct);
<a name="l01746"></a>01746     }
<a name="l01747"></a>01747   }
<a name="l01748"></a>01748 }
<a name="l01749"></a>01749 
<a name="l01750"></a><a class="code" href="namespaceoperations__research.html#54b65c2d9414470cb60feaae650c3299">01750</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#54b65c2d9414470cb60feaae650c3299">p_bool_gt_reif</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01751"></a>01751   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01752"></a>01752   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l01753"></a>01753   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_right = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1);
<a name="l01754"></a>01754   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_boolvar = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2);
<a name="l01755"></a>01755   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(node_boolvar)) {
<a name="l01756"></a>01756     IntVar* <span class="keyword">const</span> boolvar =
<a name="l01757"></a>01757         node_right-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#2d7a39334d92d2c9b78b583e08ad3667" title="Test if node is a Boolean node.">isBool</a>() ?
<a name="l01758"></a>01758         solver-&gt;MakeIsGreaterCstVar(left, node_right-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#f0567eb5be0c9a72409d5cdeaa35bc7e" title="Cast this node to a Boolean node.">getBool</a>()) :
<a name="l01759"></a>01759         solver-&gt;MakeIsGreaterVar(left, model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_right));
<a name="l01760"></a>01760     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01761"></a>01761             &lt;&lt; boolvar-&gt;DebugString();
<a name="l01762"></a>01762     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l01763"></a>01763     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l01764"></a>01764     CHECK_NOTNULL(boolvar);
<a name="l01765"></a>01765   } <span class="keywordflow">else</span> {
<a name="l01766"></a>01766     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l01767"></a>01767     IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l01768"></a>01768     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeIsGreaterCt(left, right, boolvar);
<a name="l01769"></a>01769     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01770"></a>01770     solver-&gt;AddConstraint(ct);
<a name="l01771"></a>01771   }
<a name="l01772"></a>01772 }
<a name="l01773"></a>01773 
<a name="l01774"></a><a class="code" href="namespaceoperations__research.html#ee926cc5da3cb9c369053ba24185c3c5">01774</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#ee926cc5da3cb9c369053ba24185c3c5">p_bool_le_reif</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01775"></a>01775   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01776"></a>01776   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l01777"></a>01777   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_right = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1);
<a name="l01778"></a>01778   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_boolvar = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2);
<a name="l01779"></a>01779   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(node_boolvar)) {
<a name="l01780"></a>01780     IntVar* <span class="keyword">const</span> boolvar =
<a name="l01781"></a>01781         node_right-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#2d7a39334d92d2c9b78b583e08ad3667" title="Test if node is a Boolean node.">isBool</a>() ?
<a name="l01782"></a>01782         solver-&gt;MakeIsLessOrEqualCstVar(left, node_right-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#f0567eb5be0c9a72409d5cdeaa35bc7e" title="Cast this node to a Boolean node.">getBool</a>()) :
<a name="l01783"></a>01783         solver-&gt;MakeIsLessOrEqualVar(left, model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_right));
<a name="l01784"></a>01784     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01785"></a>01785             &lt;&lt; boolvar-&gt;DebugString();
<a name="l01786"></a>01786     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l01787"></a>01787     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l01788"></a>01788     CHECK_NOTNULL(boolvar);
<a name="l01789"></a>01789   } <span class="keywordflow">else</span> {
<a name="l01790"></a>01790     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l01791"></a>01791     IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l01792"></a>01792     <span class="keywordflow">if</span> (FLAGS_use_minisat &amp;&amp;
<a name="l01793"></a>01793         <a class="code" href="namespaceoperations__research.html#7538bc3824f9a28c0360db1f899c5654">AddBoolIsLeVar</a>(model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e6e8732138dce21e9ac2d6a56a41c7e7">Sat</a>(), left, right, boolvar)) {
<a name="l01794"></a>01794       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted to minisat"</span>;
<a name="l01795"></a>01795     } <span class="keywordflow">else</span> {
<a name="l01796"></a>01796       Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeIsLessOrEqualCt(left, right, boolvar);
<a name="l01797"></a>01797       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01798"></a>01798       solver-&gt;AddConstraint(ct);
<a name="l01799"></a>01799     }
<a name="l01800"></a>01800   }
<a name="l01801"></a>01801 }
<a name="l01802"></a>01802 
<a name="l01803"></a><a class="code" href="namespaceoperations__research.html#f616dc3ee3f059f4fcbb3fe02ea6cc5e">01803</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#f616dc3ee3f059f4fcbb3fe02ea6cc5e">p_bool_lt_reif</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01804"></a>01804   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01805"></a>01805   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l01806"></a>01806   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_right = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1);
<a name="l01807"></a>01807   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_boolvar = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2);
<a name="l01808"></a>01808   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(node_boolvar)) {
<a name="l01809"></a>01809     IntVar* <span class="keyword">const</span> boolvar =
<a name="l01810"></a>01810         node_right-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#2d7a39334d92d2c9b78b583e08ad3667" title="Test if node is a Boolean node.">isBool</a>() ?
<a name="l01811"></a>01811         solver-&gt;MakeIsLessCstVar(left, node_right-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#f0567eb5be0c9a72409d5cdeaa35bc7e" title="Cast this node to a Boolean node.">getBool</a>()) :
<a name="l01812"></a>01812         solver-&gt;MakeIsLessVar(left, model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_right));
<a name="l01813"></a>01813     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01814"></a>01814             &lt;&lt; boolvar-&gt;DebugString();
<a name="l01815"></a>01815     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l01816"></a>01816     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l01817"></a>01817     CHECK_NOTNULL(boolvar);
<a name="l01818"></a>01818   } <span class="keywordflow">else</span> {
<a name="l01819"></a>01819     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l01820"></a>01820     IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l01821"></a>01821     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeIsLessCt(left, right, boolvar);
<a name="l01822"></a>01822     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01823"></a>01823     solver-&gt;AddConstraint(ct);
<a name="l01824"></a>01824   }
<a name="l01825"></a>01825 }
<a name="l01826"></a>01826 
<a name="l01827"></a><a class="code" href="namespaceoperations__research.html#c0a99ef2286a606c9c6b600ad4de0408">01827</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#c0a99ef2286a606c9c6b600ad4de0408">p_bool_and</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01828"></a>01828   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01829"></a>01829   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l01830"></a>01830   IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l01831"></a>01831   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2))) {
<a name="l01832"></a>01832     IntExpr* <span class="keyword">const</span> target = solver-&gt;MakeMin(left, right);
<a name="l01833"></a>01833     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01834"></a>01834             &lt;&lt; target-&gt;DebugString();
<a name="l01835"></a>01835     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2));
<a name="l01836"></a>01836     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2), target);
<a name="l01837"></a>01837   } <span class="keywordflow">else</span> {
<a name="l01838"></a>01838     IntExpr* <span class="keyword">const</span> target = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2));
<a name="l01839"></a>01839     <span class="keywordflow">if</span> (FLAGS_use_minisat &amp;&amp;
<a name="l01840"></a>01840         <a class="code" href="namespaceoperations__research.html#ab50013e1c3d51b530b14db411dc8552">AddBoolAndEqVar</a>(model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e6e8732138dce21e9ac2d6a56a41c7e7">Sat</a>(), left, right, target)) {
<a name="l01841"></a>01841       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted to minisat"</span>;
<a name="l01842"></a>01842     } <span class="keywordflow">else</span> {
<a name="l01843"></a>01843       Constraint* <span class="keyword">const</span> ct =
<a name="l01844"></a>01844           solver-&gt;MakeEquality(solver-&gt;MakeMin(left, right), target);
<a name="l01845"></a>01845       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01846"></a>01846       solver-&gt;AddConstraint(ct);
<a name="l01847"></a>01847     }
<a name="l01848"></a>01848   }
<a name="l01849"></a>01849 }
<a name="l01850"></a>01850 
<a name="l01851"></a><a class="code" href="namespaceoperations__research.html#c524608736312324bc416e13548fcfee">01851</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#c524608736312324bc416e13548fcfee">p_bool_or</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01852"></a>01852   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01853"></a>01853   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l01854"></a>01854   IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l01855"></a>01855   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2))) {
<a name="l01856"></a>01856     IntExpr* <span class="keyword">const</span> target = solver-&gt;MakeMax(left, right);
<a name="l01857"></a>01857     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01858"></a>01858             &lt;&lt; target-&gt;DebugString();
<a name="l01859"></a>01859     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2));
<a name="l01860"></a>01860     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2), target);
<a name="l01861"></a>01861   } <span class="keywordflow">else</span> {
<a name="l01862"></a>01862     IntExpr* <span class="keyword">const</span> target = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2));
<a name="l01863"></a>01863     <span class="keywordflow">if</span> (FLAGS_use_minisat &amp;&amp;
<a name="l01864"></a>01864         <a class="code" href="namespaceoperations__research.html#0b901e88922c93cd583ee72eacd224bf">AddBoolOrEqVar</a>(model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e6e8732138dce21e9ac2d6a56a41c7e7">Sat</a>(), left, right, target)) {
<a name="l01865"></a>01865       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted to minisat"</span>;
<a name="l01866"></a>01866     } <span class="keywordflow">else</span> {
<a name="l01867"></a>01867       Constraint* <span class="keyword">const</span> ct =
<a name="l01868"></a>01868           solver-&gt;MakeEquality(solver-&gt;MakeMax(left, right), target);
<a name="l01869"></a>01869       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01870"></a>01870       solver-&gt;AddConstraint(ct);
<a name="l01871"></a>01871     }
<a name="l01872"></a>01872   }
<a name="l01873"></a>01873 }
<a name="l01874"></a>01874 
<a name="l01875"></a><a class="code" href="namespaceoperations__research.html#fd2dcf78dc3f4b7fde9d36b06727a526">01875</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#fd2dcf78dc3f4b7fde9d36b06727a526">p_array_bool_or</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01876"></a>01876   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01877"></a>01877   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l01878"></a>01878   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_boolvar = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1);
<a name="l01879"></a>01879   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l01880"></a>01880   std::vector&lt;IntVar*&gt; variables;
<a name="l01881"></a>01881   hash_set&lt;IntExpr*&gt; added;
<a name="l01882"></a>01882   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l01883"></a>01883     <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> a = array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i];
<a name="l01884"></a>01884     IntVar* <span class="keyword">const</span> to_add = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(a)-&gt;Var();
<a name="l01885"></a>01885     <span class="keywordflow">if</span> (!ContainsKey(added, to_add) &amp;&amp; to_add-&gt;Max() != 0) {
<a name="l01886"></a>01886       variables.push_back(to_add);
<a name="l01887"></a>01887       added.insert(to_add);
<a name="l01888"></a>01888     }
<a name="l01889"></a>01889   }
<a name="l01890"></a>01890   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(node_boolvar)) {
<a name="l01891"></a>01891     IntVar* <span class="keyword">const</span> boolvar = solver-&gt;MakeMax(variables)-&gt;Var();
<a name="l01892"></a>01892     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01893"></a>01893             &lt;&lt; boolvar-&gt;DebugString();
<a name="l01894"></a>01894     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l01895"></a>01895     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l01896"></a>01896   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#2d7a39334d92d2c9b78b583e08ad3667" title="Test if node is a Boolean node.">isBool</a>() &amp;&amp; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#f0567eb5be0c9a72409d5cdeaa35bc7e" title="Cast this node to a Boolean node.">getBool</a>() == 0) {
<a name="l01897"></a>01897     VLOG(1) &lt;&lt; <span class="stringliteral">"  - forcing array_bool_or to 0"</span>;
<a name="l01898"></a>01898     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; variables.size(); ++i) {
<a name="l01899"></a>01899       variables[i]-&gt;SetValue(0);
<a name="l01900"></a>01900     }
<a name="l01901"></a>01901   } <span class="keywordflow">else</span> {
<a name="l01902"></a>01902     <span class="keywordflow">if</span> (node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#2d7a39334d92d2c9b78b583e08ad3667" title="Test if node is a Boolean node.">isBool</a>()) {
<a name="l01903"></a>01903       <span class="keywordflow">if</span> (node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#f0567eb5be0c9a72409d5cdeaa35bc7e" title="Cast this node to a Boolean node.">getBool</a>() == 1) {
<a name="l01904"></a>01904         <span class="keywordflow">if</span> (FLAGS_use_minisat &amp;&amp;
<a name="l01905"></a>01905             <a class="code" href="namespaceoperations__research.html#cc75d1bfb53fcab6a56fe2a588b47512">AddBoolOrArrayEqualTrue</a>(model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e6e8732138dce21e9ac2d6a56a41c7e7">Sat</a>(), variables)) {
<a name="l01906"></a>01906           VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted to minisat"</span>;
<a name="l01907"></a>01907         } <span class="keywordflow">else</span> {
<a name="l01908"></a>01908           Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeSumGreaterOrEqual(variables, 1);
<a name="l01909"></a>01909           VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01910"></a>01910           solver-&gt;AddConstraint(ct);
<a name="l01911"></a>01911         }
<a name="l01912"></a>01912       } <span class="keywordflow">else</span> {
<a name="l01913"></a>01913         Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeSumEquality(variables, Zero());
<a name="l01914"></a>01914         VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01915"></a>01915         solver-&gt;AddConstraint(ct);
<a name="l01916"></a>01916       }
<a name="l01917"></a>01917     } <span class="keywordflow">else</span> {
<a name="l01918"></a>01918       IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l01919"></a>01919       <span class="keywordflow">if</span> (FLAGS_use_minisat &amp;&amp;
<a name="l01920"></a>01920           <a class="code" href="namespaceoperations__research.html#d68371277a2b0557c8cb854710dc224d">AddBoolOrArrayEqVar</a>(model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e6e8732138dce21e9ac2d6a56a41c7e7">Sat</a>(), variables, boolvar)) {
<a name="l01921"></a>01921         VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted to minisat"</span>;
<a name="l01922"></a>01922       } <span class="keywordflow">else</span> {
<a name="l01923"></a>01923         Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeMaxEquality(variables, boolvar);
<a name="l01924"></a>01924         VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01925"></a>01925         solver-&gt;AddConstraint(ct);
<a name="l01926"></a>01926       }
<a name="l01927"></a>01927     }
<a name="l01928"></a>01928   }
<a name="l01929"></a>01929 }
<a name="l01930"></a>01930 
<a name="l01931"></a><a class="code" href="namespaceoperations__research.html#a0e9a5cdafdaf99510168cd41a8b1eaa">01931</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#a0e9a5cdafdaf99510168cd41a8b1eaa">p_array_bool_and</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01932"></a>01932   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l01933"></a>01933   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l01934"></a>01934   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> node_boolvar = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1);
<a name="l01935"></a>01935   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l01936"></a>01936   std::vector&lt;IntVar*&gt; variables;
<a name="l01937"></a>01937   hash_set&lt;IntExpr*&gt; added;
<a name="l01938"></a>01938   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l01939"></a>01939     <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> a = array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i];
<a name="l01940"></a>01940     IntVar* <span class="keyword">const</span> to_add = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(a)-&gt;Var();
<a name="l01941"></a>01941     <span class="keywordflow">if</span> (!ContainsKey(added, to_add)) {
<a name="l01942"></a>01942       variables.push_back(to_add);
<a name="l01943"></a>01943       added.insert(to_add);
<a name="l01944"></a>01944     }
<a name="l01945"></a>01945   }
<a name="l01946"></a>01946   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(node_boolvar)) {
<a name="l01947"></a>01947     IntExpr* <span class="keyword">const</span> boolvar = solver-&gt;MakeMin(variables)-&gt;Var();
<a name="l01948"></a>01948     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l01949"></a>01949             &lt;&lt; boolvar-&gt;DebugString();
<a name="l01950"></a>01950     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(node_boolvar);
<a name="l01951"></a>01951     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(node_boolvar, boolvar);
<a name="l01952"></a>01952   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#2d7a39334d92d2c9b78b583e08ad3667" title="Test if node is a Boolean node.">isBool</a>() &amp;&amp; node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#f0567eb5be0c9a72409d5cdeaa35bc7e" title="Cast this node to a Boolean node.">getBool</a>() == 1) {
<a name="l01953"></a>01953     VLOG(1) &lt;&lt; <span class="stringliteral">"  - forcing array_bool_and to 1"</span>;
<a name="l01954"></a>01954     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; variables.size(); ++i) {
<a name="l01955"></a>01955       variables[i]-&gt;SetValue(1);
<a name="l01956"></a>01956     }
<a name="l01957"></a>01957   } <span class="keywordflow">else</span> {
<a name="l01958"></a>01958     <span class="keywordflow">if</span> (node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#2d7a39334d92d2c9b78b583e08ad3667" title="Test if node is a Boolean node.">isBool</a>()) {
<a name="l01959"></a>01959       <span class="keywordflow">if</span> (node_boolvar-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#f0567eb5be0c9a72409d5cdeaa35bc7e" title="Cast this node to a Boolean node.">getBool</a>() == 0) {
<a name="l01960"></a>01960         <span class="keywordflow">if</span> (FLAGS_use_minisat &amp;&amp;
<a name="l01961"></a>01961             <a class="code" href="namespaceoperations__research.html#2bdf87255460bd56404a9bbef75e0a84">AddBoolAndArrayEqualFalse</a>(model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e6e8732138dce21e9ac2d6a56a41c7e7">Sat</a>(), variables)) {
<a name="l01962"></a>01962           VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted to minisat"</span>;
<a name="l01963"></a>01963         } <span class="keywordflow">else</span> {
<a name="l01964"></a>01964           Constraint* <span class="keyword">const</span> ct =
<a name="l01965"></a>01965               solver-&gt;MakeSumLessOrEqual(variables, variables.size() - 1);
<a name="l01966"></a>01966           VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01967"></a>01967           solver-&gt;AddConstraint(ct);
<a name="l01968"></a>01968         }
<a name="l01969"></a>01969       } <span class="keywordflow">else</span> {
<a name="l01970"></a>01970         Constraint* <span class="keyword">const</span> ct =
<a name="l01971"></a>01971             solver-&gt;MakeSumEquality(variables, variables.size());
<a name="l01972"></a>01972         VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01973"></a>01973         solver-&gt;AddConstraint(ct);
<a name="l01974"></a>01974       }
<a name="l01975"></a>01975     } <span class="keywordflow">else</span> {
<a name="l01976"></a>01976       IntVar* <span class="keyword">const</span> boolvar = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(node_boolvar)-&gt;Var();
<a name="l01977"></a>01977       <span class="keywordflow">if</span> (FLAGS_use_minisat &amp;&amp;
<a name="l01978"></a>01978           <a class="code" href="namespaceoperations__research.html#623070a9eacdafedf3ba0a9b88c080b0">AddBoolAndArrayEqVar</a>(model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e6e8732138dce21e9ac2d6a56a41c7e7">Sat</a>(), variables, boolvar)) {
<a name="l01979"></a>01979         VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted to minisat"</span>;
<a name="l01980"></a>01980       } <span class="keywordflow">else</span> {
<a name="l01981"></a>01981         Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeMinEquality(variables, boolvar);
<a name="l01982"></a>01982         VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l01983"></a>01983         solver-&gt;AddConstraint(ct);
<a name="l01984"></a>01984       }
<a name="l01985"></a>01985     }
<a name="l01986"></a>01986   }
<a name="l01987"></a>01987 }
<a name="l01988"></a>01988 
<a name="l01989"></a><a class="code" href="namespaceoperations__research.html#84df8ddff5b2a2c77df186c48ae42185">01989</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#84df8ddff5b2a2c77df186c48ae42185">p_array_bool_clause</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01990"></a>01990   LOG(FATAL) &lt;&lt; <span class="stringliteral">"array_bool_clause("</span> &lt;&lt; (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>()) &lt;&lt; <span class="stringliteral">","</span>
<a name="l01991"></a>01991              &lt;&lt; (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>())
<a name="l01992"></a>01992              &lt;&lt; <span class="stringliteral">")::"</span> &lt;&lt; spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#b3a612597c8bdd7ee4c60ad30d1e62f2">annotations</a>()-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>();
<a name="l01993"></a>01993 }
<a name="l01994"></a>01994 
<a name="l01995"></a><a class="code" href="namespaceoperations__research.html#5d4955ec1a0fb0549e2f096b9d2ca2cd">01995</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#5d4955ec1a0fb0549e2f096b9d2ca2cd">p_array_bool_clause_reif</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l01996"></a>01996   LOG(FATAL) &lt;&lt; <span class="stringliteral">"array_bool_clause_reif("</span> &lt;&lt; (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>())
<a name="l01997"></a>01997              &lt;&lt; <span class="stringliteral">","</span> &lt;&lt; (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>()) &lt;&lt; <span class="stringliteral">","</span>
<a name="l01998"></a>01998              &lt;&lt; (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>())
<a name="l01999"></a>01999              &lt;&lt; <span class="stringliteral">")::"</span> &lt;&lt; spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#b3a612597c8bdd7ee4c60ad30d1e62f2">annotations</a>()-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>();
<a name="l02000"></a>02000 }
<a name="l02001"></a>02001 
<a name="l02002"></a><a class="code" href="namespaceoperations__research.html#832e541a9e1461baa7c387cf0ca99d4d">02002</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#832e541a9e1461baa7c387cf0ca99d4d">p_bool_xor</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l02003"></a>02003   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l02004"></a>02004   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l02005"></a>02005   IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l02006"></a>02006   IntVar* <span class="keyword">const</span> target = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2))-&gt;Var();
<a name="l02007"></a>02007   <span class="keywordflow">if</span> (FLAGS_use_minisat &amp;&amp; <a class="code" href="namespaceoperations__research.html#5ae3d4db1fe451e74a6bc846a0480f25">AddBoolIsNEqVar</a>(model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e6e8732138dce21e9ac2d6a56a41c7e7">Sat</a>(), left, right, target)) {
<a name="l02008"></a>02008     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted to minisat"</span>;
<a name="l02009"></a>02009   } <span class="keywordflow">else</span> {
<a name="l02010"></a>02010     Constraint* <span class="keyword">const</span> ct =
<a name="l02011"></a>02011         solver-&gt;MakeIsEqualCstCt(solver-&gt;MakeSum(left, right), 1, target);
<a name="l02012"></a>02012     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l02013"></a>02013     solver-&gt;AddConstraint(ct);
<a name="l02014"></a>02014   }
<a name="l02015"></a>02015 }
<a name="l02016"></a>02016 
<a name="l02017"></a><a class="code" href="namespaceoperations__research.html#6c7a7746b38530b793a4af9e75be31c4">02017</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#6c7a7746b38530b793a4af9e75be31c4">p_bool_not</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l02018"></a>02018   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l02019"></a>02019   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l02020"></a>02020   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1))) {
<a name="l02021"></a>02021     IntExpr* <span class="keyword">const</span> target = solver-&gt;MakeDifference(1, left);
<a name="l02022"></a>02022     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l02023"></a>02023             &lt;&lt; target-&gt;DebugString();
<a name="l02024"></a>02024     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l02025"></a>02025     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1), target);
<a name="l02026"></a>02026   } <span class="keywordflow">else</span> {
<a name="l02027"></a>02027     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l02028"></a>02028     <span class="keywordflow">if</span> (FLAGS_use_minisat &amp;&amp; <a class="code" href="namespaceoperations__research.html#f94692ccb5dc6796b32b6f408d45dafe">AddBoolNot</a>(model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e6e8732138dce21e9ac2d6a56a41c7e7">Sat</a>(), left, right)) {
<a name="l02029"></a>02029       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted to minisat"</span>;
<a name="l02030"></a>02030     } <span class="keywordflow">else</span> {
<a name="l02031"></a>02031       Constraint* <span class="keyword">const</span> ct =
<a name="l02032"></a>02032           solver-&gt;MakeEquality(solver-&gt;MakeDifference(1, left), right);
<a name="l02033"></a>02033       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l02034"></a>02034       solver-&gt;AddConstraint(ct);
<a name="l02035"></a>02035     }
<a name="l02036"></a>02036   }
<a name="l02037"></a>02037 }
<a name="l02038"></a>02038 
<a name="l02039"></a>02039 <span class="comment">/* element constraints */</span>
<a name="l02040"></a><a class="code" href="namespaceoperations__research.html#11a0442c65aef7d2bc48e22f0aeeedf6">02040</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#11a0442c65aef7d2bc48e22f0aeeedf6" title="element constraints">p_array_int_element</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l02041"></a>02041   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l02042"></a>02042   IntExpr* <span class="keyword">const</span> index =  model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l02043"></a>02043   IntVar* <span class="keyword">const</span> shifted_index = solver-&gt;MakeSum(index, -1)-&gt;Var();
<a name="l02044"></a>02044   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_coefficients = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l02045"></a>02045   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l02046"></a>02046   std::vector&lt;int64&gt; coefficients(size);
<a name="l02047"></a>02047   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l02048"></a>02048     coefficients[i] = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt();
<a name="l02049"></a>02049   }
<a name="l02050"></a>02050   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2))) {
<a name="l02051"></a>02051     IntExpr* <span class="keyword">const</span> target = solver-&gt;MakeElement(coefficients, shifted_index);
<a name="l02052"></a>02052     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l02053"></a>02053             &lt;&lt; target-&gt;DebugString();
<a name="l02054"></a>02054     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2));
<a name="l02055"></a>02055     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2), target);
<a name="l02056"></a>02056   } <span class="keywordflow">else</span> {
<a name="l02057"></a>02057     IntVar* <span class="keyword">const</span> target = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2))-&gt;Var();
<a name="l02058"></a>02058     Constraint* <span class="keyword">const</span> ct =
<a name="l02059"></a>02059         solver-&gt;MakeElementEquality(coefficients, shifted_index, target);
<a name="l02060"></a>02060     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l02061"></a>02061     solver-&gt;AddConstraint(ct);
<a name="l02062"></a>02062   }
<a name="l02063"></a>02063 }
<a name="l02064"></a>02064 
<a name="l02065"></a><a class="code" href="namespaceoperations__research.html#1707a6942703b7ea77a617fdeb1fa6f3">02065</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#1707a6942703b7ea77a617fdeb1fa6f3">p_array_var_int_element</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l02066"></a>02066   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l02067"></a>02067   IntExpr* <span class="keyword">const</span> index =  model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l02068"></a>02068   IntVar* <span class="keyword">const</span> shifted_index = solver-&gt;MakeSum(index, -1)-&gt;Var();
<a name="l02069"></a>02069   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l02070"></a>02070   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l02071"></a>02071   std::vector&lt;IntVar*&gt; variables(size);
<a name="l02072"></a>02072   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l02073"></a>02073     variables[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l02074"></a>02074   }
<a name="l02075"></a>02075   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2))) {
<a name="l02076"></a>02076     IntExpr* <span class="keyword">const</span> target = solver-&gt;MakeElement(variables, shifted_index);
<a name="l02077"></a>02077     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l02078"></a>02078             &lt;&lt; target-&gt;DebugString();
<a name="l02079"></a>02079     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2));
<a name="l02080"></a>02080     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2), target);
<a name="l02081"></a>02081   } <span class="keywordflow">else</span> {
<a name="l02082"></a>02082     IntVar* <span class="keyword">const</span> target = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2))-&gt;Var();
<a name="l02083"></a>02083     Constraint* <span class="keyword">const</span> ct =
<a name="l02084"></a>02084         solver-&gt;MakeElementEquality(variables, shifted_index, target);
<a name="l02085"></a>02085     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l02086"></a>02086     solver-&gt;AddConstraint(ct);
<a name="l02087"></a>02087   }
<a name="l02088"></a>02088 }
<a name="l02089"></a>02089 
<a name="l02090"></a><a class="code" href="namespaceoperations__research.html#e17de8a83d8acc0d9fbde8ef695af7a8">02090</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#e17de8a83d8acc0d9fbde8ef695af7a8">p_array_var_int_position</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l02091"></a>02091   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l02092"></a>02092   IntExpr* <span class="keyword">const</span> index =  model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l02093"></a>02093   IntVar* <span class="keyword">const</span> shifted_index = solver-&gt;MakeSum(index, -1)-&gt;Var();
<a name="l02094"></a>02094   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l02095"></a>02095   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l02096"></a>02096   std::vector&lt;IntVar*&gt; variables(size);
<a name="l02097"></a>02097   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l02098"></a>02098     variables[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l02099"></a>02099   }
<a name="l02100"></a>02100   <span class="keyword">const</span> <span class="keywordtype">int</span> target = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>();
<a name="l02101"></a>02101   Constraint* <span class="keyword">const</span> ct =
<a name="l02102"></a>02102       solver-&gt;MakeEquality(
<a name="l02103"></a>02103           shifted_index, solver-&gt;MakeIndexExpression(variables, target)-&gt;Var());
<a name="l02104"></a>02104   VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l02105"></a>02105   solver-&gt;AddConstraint(ct);
<a name="l02106"></a>02106 }
<a name="l02107"></a>02107 
<a name="l02108"></a><a class="code" href="namespaceoperations__research.html#5a83b894e3e4f0067e044424c07ad009">02108</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#5a83b894e3e4f0067e044424c07ad009">p_array_bool_element</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l02109"></a>02109   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l02110"></a>02110   IntExpr* <span class="keyword">const</span> index = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l02111"></a>02111   IntVar* <span class="keyword">const</span> shifted_index = solver-&gt;MakeSum(index, -1)-&gt;Var();
<a name="l02112"></a>02112   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_coefficients = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l02113"></a>02113   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l02114"></a>02114   std::vector&lt;int&gt; coefficients(size);
<a name="l02115"></a>02115   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l02116"></a>02116     coefficients[i] = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getBool();
<a name="l02117"></a>02117   }
<a name="l02118"></a>02118   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2))) {
<a name="l02119"></a>02119     IntExpr* <span class="keyword">const</span> target = solver-&gt;MakeElement(coefficients, shifted_index);
<a name="l02120"></a>02120     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l02121"></a>02121             &lt;&lt; target-&gt;DebugString();
<a name="l02122"></a>02122     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2));
<a name="l02123"></a>02123     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2), target);
<a name="l02124"></a>02124   } <span class="keywordflow">else</span> {
<a name="l02125"></a>02125     IntVar* <span class="keyword">const</span> target = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2))-&gt;Var();
<a name="l02126"></a>02126     Constraint* <span class="keyword">const</span> ct =
<a name="l02127"></a>02127         solver-&gt;MakeElementEquality(coefficients, shifted_index, target);
<a name="l02128"></a>02128     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l02129"></a>02129     solver-&gt;AddConstraint(ct);
<a name="l02130"></a>02130   }
<a name="l02131"></a>02131 }
<a name="l02132"></a>02132 
<a name="l02133"></a><a class="code" href="namespaceoperations__research.html#1c8a3b099c07db6fbdbfb0a9703fdff4">02133</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#1c8a3b099c07db6fbdbfb0a9703fdff4">p_array_var_bool_element</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l02134"></a>02134   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l02135"></a>02135   IntExpr* <span class="keyword">const</span> index =  model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l02136"></a>02136   IntVar* <span class="keyword">const</span> shifted_index = solver-&gt;MakeSum(index, -1)-&gt;Var();
<a name="l02137"></a>02137   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l02138"></a>02138   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l02139"></a>02139   std::vector&lt;IntVar*&gt; variables(size);
<a name="l02140"></a>02140   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l02141"></a>02141     variables[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l02142"></a>02142   }
<a name="l02143"></a>02143   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2))) {
<a name="l02144"></a>02144     IntExpr* <span class="keyword">const</span> target = solver-&gt;MakeElement(variables, shifted_index);
<a name="l02145"></a>02145     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l02146"></a>02146             &lt;&lt; target-&gt;DebugString();
<a name="l02147"></a>02147     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2));
<a name="l02148"></a>02148     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2), target);
<a name="l02149"></a>02149   } <span class="keywordflow">else</span> {
<a name="l02150"></a>02150     IntVar* <span class="keyword">const</span> target = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2))-&gt;Var();
<a name="l02151"></a>02151     Constraint* <span class="keyword">const</span> ct =
<a name="l02152"></a>02152         solver-&gt;MakeElementEquality(variables, shifted_index, target);
<a name="l02153"></a>02153     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l02154"></a>02154     solver-&gt;AddConstraint(ct);
<a name="l02155"></a>02155   }
<a name="l02156"></a>02156 }
<a name="l02157"></a>02157 
<a name="l02158"></a>02158 
<a name="l02159"></a>02159 
<a name="l02160"></a>02160 <span class="comment">/* coercion constraints */</span>
<a name="l02161"></a><a class="code" href="namespaceoperations__research.html#150c5048cce12507710f03055e2dbcd4">02161</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#150c5048cce12507710f03055e2dbcd4" title="coercion constraints">p_bool2int</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l02162"></a>02162   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l02163"></a>02163   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l02164"></a>02164   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1))) {
<a name="l02165"></a>02165     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l02166"></a>02166             &lt;&lt; left-&gt;DebugString();
<a name="l02167"></a>02167     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l02168"></a>02168     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1), left);
<a name="l02169"></a>02169   } <span class="keywordflow">else</span> {
<a name="l02170"></a>02170     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l02171"></a>02171     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeEquality(left, right);
<a name="l02172"></a>02172     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l02173"></a>02173     solver-&gt;AddConstraint(ct);
<a name="l02174"></a>02174   }
<a name="l02175"></a>02175 }
<a name="l02176"></a>02176 
<a name="l02177"></a><a class="code" href="namespaceoperations__research.html#feb488db29d4a895d6d72f5337abef62">02177</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#feb488db29d4a895d6d72f5337abef62">p_bool2bool</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l02178"></a>02178   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l02179"></a>02179   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l02180"></a>02180   CHECK_NOTNULL(left);
<a name="l02181"></a>02181   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1))) {
<a name="l02182"></a>02182     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l02183"></a>02183             &lt;&lt; left-&gt;DebugString();
<a name="l02184"></a>02184     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l02185"></a>02185     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1), left);
<a name="l02186"></a>02186   } <span class="keywordflow">else</span> {
<a name="l02187"></a>02187     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l02188"></a>02188     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeEquality(left, right);
<a name="l02189"></a>02189     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l02190"></a>02190     solver-&gt;AddConstraint(ct);
<a name="l02191"></a>02191   }
<a name="l02192"></a>02192 }
<a name="l02193"></a>02193 
<a name="l02194"></a><a class="code" href="namespaceoperations__research.html#e5f57d887bbcaa1c4bc752e2183c5035">02194</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#e5f57d887bbcaa1c4bc752e2183c5035">p_int2int</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l02195"></a>02195   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l02196"></a>02196   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1))) {
<a name="l02197"></a>02197     IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l02198"></a>02198     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l02199"></a>02199             &lt;&lt; left-&gt;DebugString();
<a name="l02200"></a>02200     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l02201"></a>02201     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1), left);
<a name="l02202"></a>02202   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0))) {
<a name="l02203"></a>02203     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l02204"></a>02204     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l02205"></a>02205             &lt;&lt; right-&gt;DebugString();
<a name="l02206"></a>02206     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l02207"></a>02207     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0), right);
<a name="l02208"></a>02208 
<a name="l02209"></a>02209   } <span class="keywordflow">else</span> {
<a name="l02210"></a>02210     IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l02211"></a>02211     IntExpr* <span class="keyword">const</span> right = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l02212"></a>02212     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeEquality(left, right);
<a name="l02213"></a>02213     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l02214"></a>02214     solver-&gt;AddConstraint(ct);
<a name="l02215"></a>02215   }
<a name="l02216"></a>02216 }
<a name="l02217"></a>02217 
<a name="l02218"></a><a class="code" href="namespaceoperations__research.html#b3c60b536c09a8579f5132f5b86185e8">02218</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#b3c60b536c09a8579f5132f5b86185e8">p_int_in</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l02219"></a>02219   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l02220"></a>02220   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> var_node = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0);
<a name="l02221"></a>02221   <a class="code" href="classoperations__research_1_1AstNode.html" title="A node in a FlatZinc abstract syntax tree.">AstNode</a>* <span class="keyword">const</span> domain_node = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1);
<a name="l02222"></a>02222   CHECK(var_node-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#f2abd643d90430d6edd3c0c5ab4f4cee" title="Test if node is an integer variable node.">isIntVar</a>());
<a name="l02223"></a>02223   CHECK(domain_node-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#40df48d7c99d395a31cccdb309971eb7" title="Test if node is a set literal node.">isSet</a>());
<a name="l02224"></a>02224   IntVar* <span class="keyword">const</span> var = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(var_node)-&gt;Var();
<a name="l02225"></a>02225   <a class="code" href="classoperations__research_1_1AstSetLit.html" title="Set literal node">AstSetLit</a>* <span class="keyword">const</span> domain = domain_node-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#a2360fc2e4c5d57156d9e2d0ffe03f31" title="Cast this node to a set literal node.">getSet</a>();
<a name="l02226"></a>02226   <span class="keywordflow">if</span> (domain-&gt;<a class="code" href="classoperations__research_1_1AstSetLit.html#b1f3e7a964661a8cdc95e4da9f38d033">interval</a>) {
<a name="l02227"></a>02227     <span class="keywordflow">if</span> (var-&gt;Min() &lt; domain-&gt;<a class="code" href="classoperations__research_1_1AstSetLit.html#cc6211973a92c4711637c205c1aaacae">imin</a> || var-&gt;Max() &gt; domain-&gt;<a class="code" href="classoperations__research_1_1AstSetLit.html#7065f4f6a852778871d4a30cf478376a">imax</a>) {
<a name="l02228"></a>02228       Constraint* <span class="keyword">const</span> ct =
<a name="l02229"></a>02229           solver-&gt;MakeBetweenCt(var, domain-&gt;<a class="code" href="classoperations__research_1_1AstSetLit.html#cc6211973a92c4711637c205c1aaacae">imin</a>, domain-&gt;<a class="code" href="classoperations__research_1_1AstSetLit.html#7065f4f6a852778871d4a30cf478376a">imax</a>);
<a name="l02230"></a>02230       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;<a class="code" href="classoperations__research_1_1AstSetLit.html#60b2ba8dc1e35192b131cb71db5eb631" title="Output string representation.">DebugString</a>();
<a name="l02231"></a>02231       solver-&gt;AddConstraint(ct);
<a name="l02232"></a>02232     }
<a name="l02233"></a>02233   } <span class="keywordflow">else</span> {
<a name="l02234"></a>02234     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeMemberCt(var, domain-&gt;<a class="code" href="classoperations__research_1_1AstSetLit.html#70658e37c7d9deb940af34cdd5f84add">s</a>);
<a name="l02235"></a>02235     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l02236"></a>02236     solver-&gt;AddConstraint(ct);
<a name="l02237"></a>02237   }
<a name="l02238"></a>02238 }
<a name="l02239"></a>02239 
<a name="l02240"></a><a class="code" href="namespaceoperations__research.html#5ebf1755d953faf375f02c4a1b375e8f">02240</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#5ebf1755d953faf375f02c4a1b375e8f">p_abs</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l02241"></a>02241   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l02242"></a>02242   IntExpr* <span class="keyword">const</span> left = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0));
<a name="l02243"></a>02243   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#8f3be6caae3c1cf54e36df060d819dbc">IsDefined</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1))) {
<a name="l02244"></a>02244     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e5521378b58b4fb7b30ed42ba1c78127">CheckIntegerVariableIsNull</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l02245"></a>02245     IntExpr* <span class="keyword">const</span> target = solver-&gt;MakeAbs(left);
<a name="l02246"></a>02246     VLOG(1) &lt;&lt; <span class="stringliteral">"  - creating "</span> &lt;&lt; spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#6e981e3dac0a576beecf101e5d89a806" title="Output string representation.">DebugString</a>() &lt;&lt; <span class="stringliteral">" := "</span>
<a name="l02247"></a>02247             &lt;&lt; target-&gt;DebugString();
<a name="l02248"></a>02248     model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#380665a36b946ba87273511d7261fd34">SetIntegerExpression</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1), target);
<a name="l02249"></a>02249   } <span class="keywordflow">else</span> {
<a name="l02250"></a>02250     IntExpr* <span class="keyword">const</span> target = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1));
<a name="l02251"></a>02251     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeEquality(solver-&gt;MakeAbs(left), target);
<a name="l02252"></a>02252     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l02253"></a>02253     solver-&gt;AddConstraint(ct);
<a name="l02254"></a>02254   }
<a name="l02255"></a>02255 }
<a name="l02256"></a>02256 
<a name="l02257"></a><a class="code" href="namespaceoperations__research.html#64e2e1a4c24fa6b5c0a565048606c0ac">02257</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#64e2e1a4c24fa6b5c0a565048606c0ac">p_all_different_int</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l02258"></a>02258   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l02259"></a>02259   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l02260"></a>02260   int64 var_size = 0;
<a name="l02261"></a>02261   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l02262"></a>02262   std::vector&lt;IntVar*&gt; variables(size);
<a name="l02263"></a>02263   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l02264"></a>02264     variables[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l02265"></a>02265     var_size += variables[i]-&gt;Size();
<a name="l02266"></a>02266   }
<a name="l02267"></a>02267   Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeAllDifferent(variables, var_size &lt; 10000);
<a name="l02268"></a>02268   VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l02269"></a>02269   solver-&gt;AddConstraint(ct);
<a name="l02270"></a>02270 }
<a name="l02271"></a>02271 
<a name="l02272"></a><a class="code" href="namespaceoperations__research.html#32839379145dab650b3b1ff2f56764eb">02272</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#32839379145dab650b3b1ff2f56764eb">p_count</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l02273"></a>02273   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l02274"></a>02274   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l02275"></a>02275   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l02276"></a>02276   std::vector&lt;IntVar*&gt; variables(size);
<a name="l02277"></a>02277   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l02278"></a>02278     variables[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l02279"></a>02279   }
<a name="l02280"></a>02280   IntVar* <span class="keyword">const</span> count = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2))-&gt;Var();
<a name="l02281"></a>02281   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#a8e1174fcd71dc8250fcf57d14c22110" title="Test if node is int, if yes set i to the value.">isInt</a>()) {
<a name="l02282"></a>02282     Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeCount(variables,
<a name="l02283"></a>02283                                              spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>(),
<a name="l02284"></a>02284                                              count);
<a name="l02285"></a>02285     VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l02286"></a>02286     solver-&gt;AddConstraint(ct);
<a name="l02287"></a>02287   } <span class="keywordflow">else</span> {
<a name="l02288"></a>02288     <span class="keywordflow">throw</span> <a class="code" href="classoperations__research_1_1Error.html" title="Exception class for FlatZinc errors">Error</a>(<span class="stringliteral">"ModelBuilder"</span>,
<a name="l02289"></a>02289                 std::string(<span class="stringliteral">"Constraint "</span>) + spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#b5e09dc7bc835bddd6221a6ec24f88d0">Id</a>() +
<a name="l02290"></a>02290                 <span class="stringliteral">" does not support variable values"</span>);
<a name="l02291"></a>02291   }
<a name="l02292"></a>02292 }
<a name="l02293"></a>02293 
<a name="l02294"></a><a class="code" href="namespaceoperations__research.html#da8c646222e45b36157cf24343f4a273">02294</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#da8c646222e45b36157cf24343f4a273">p_global_cardinality</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l02295"></a>02295   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l02296"></a>02296   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l02297"></a>02297   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l02298"></a>02298   std::vector&lt;IntVar*&gt; variables(size);
<a name="l02299"></a>02299   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l02300"></a>02300     variables[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l02301"></a>02301   }
<a name="l02302"></a>02302   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_coefficients = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l02303"></a>02303   <span class="keyword">const</span> <span class="keywordtype">int</span> vsize = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l02304"></a>02304   std::vector&lt;int64&gt; values(vsize);
<a name="l02305"></a>02305   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; vsize; ++i) {
<a name="l02306"></a>02306     values[i] = array_coefficients-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt();
<a name="l02307"></a>02307   }
<a name="l02308"></a>02308   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_cards = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l02309"></a>02309   <span class="keyword">const</span> <span class="keywordtype">int</span> csize = array_cards-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l02310"></a>02310   std::vector&lt;IntVar*&gt; cards(csize);
<a name="l02311"></a>02311   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; csize; ++i) {
<a name="l02312"></a>02312     cards[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_cards-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l02313"></a>02313   }
<a name="l02314"></a>02314   Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeDistribute(variables, values, cards);
<a name="l02315"></a>02315   VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l02316"></a>02316   solver-&gt;AddConstraint(ct);
<a name="l02317"></a>02317 }
<a name="l02318"></a>02318 
<a name="l02319"></a><a class="code" href="namespaceoperations__research.html#c392783baf53a096ccb86deeee1782ab">02319</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#c392783baf53a096ccb86deeee1782ab">p_global_cardinality_old</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l02320"></a>02320   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l02321"></a>02321   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l02322"></a>02322   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l02323"></a>02323   std::vector&lt;IntVar*&gt; variables(size);
<a name="l02324"></a>02324   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l02325"></a>02325     variables[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l02326"></a>02326   }
<a name="l02327"></a>02327   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_cards = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l02328"></a>02328   <span class="keyword">const</span> <span class="keywordtype">int</span> csize = array_cards-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l02329"></a>02329   std::vector&lt;IntVar*&gt; cards(csize);
<a name="l02330"></a>02330   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; csize; ++i) {
<a name="l02331"></a>02331     cards[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_cards-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l02332"></a>02332   }
<a name="l02333"></a>02333   Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeDistribute(variables, cards);
<a name="l02334"></a>02334   VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l02335"></a>02335   solver-&gt;AddConstraint(ct);
<a name="l02336"></a>02336 }
<a name="l02337"></a>02337 
<a name="l02338"></a><a class="code" href="namespaceoperations__research.html#1f3aaeedf5f6ecff40b795a62d4d2a56">02338</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#1f3aaeedf5f6ecff40b795a62d4d2a56">p_table_int</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l02339"></a>02339   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l02340"></a>02340   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l02341"></a>02341   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l02342"></a>02342   std::vector&lt;IntVar*&gt; variables(size);
<a name="l02343"></a>02343   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l02344"></a>02344     variables[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l02345"></a>02345   }
<a name="l02346"></a>02346   IntTupleSet tuples(size);
<a name="l02347"></a>02347   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> t = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l02348"></a>02348   <span class="keyword">const</span> <span class="keywordtype">int</span> t_size = t-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l02349"></a>02349   DCHECK(t_size % size == 0);
<a name="l02350"></a>02350   <span class="keyword">const</span> <span class="keywordtype">int</span> num_tuples = t_size / size;
<a name="l02351"></a>02351   std::vector&lt;int64&gt; one_tuple(size);
<a name="l02352"></a>02352   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> tuple_index = 0; tuple_index &lt; num_tuples; ++tuple_index) {
<a name="l02353"></a>02353     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> var_index = 0; var_index &lt; size; ++var_index) {
<a name="l02354"></a>02354       one_tuple[var_index] = t-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[tuple_index * size + var_index]-&gt;getInt();
<a name="l02355"></a>02355     }
<a name="l02356"></a>02356     tuples.Insert(one_tuple);
<a name="l02357"></a>02357   }
<a name="l02358"></a>02358   Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeAllowedAssignments(variables, tuples);
<a name="l02359"></a>02359   VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l02360"></a>02360   solver-&gt;AddConstraint(ct);
<a name="l02361"></a>02361 }
<a name="l02362"></a>02362 
<a name="l02363"></a><a class="code" href="namespaceoperations__research.html#0d5fde6836d111f32245209c1f6f34dd">02363</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#0d5fde6836d111f32245209c1f6f34dd">p_table_bool</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l02364"></a>02364   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l02365"></a>02365   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l02366"></a>02366   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l02367"></a>02367   std::vector&lt;IntVar*&gt; variables(size);
<a name="l02368"></a>02368   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l02369"></a>02369     variables[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l02370"></a>02370   }
<a name="l02371"></a>02371   IntTupleSet tuples(size);
<a name="l02372"></a>02372   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> t = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l02373"></a>02373   <span class="keyword">const</span> <span class="keywordtype">int</span> t_size = t-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l02374"></a>02374   DCHECK(t_size % size == 0);
<a name="l02375"></a>02375   <span class="keyword">const</span> <span class="keywordtype">int</span> num_tuples = t_size / size;
<a name="l02376"></a>02376   std::vector&lt;int&gt; one_tuple(size);
<a name="l02377"></a>02377   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> tuple_index = 0; tuple_index &lt; num_tuples; ++tuple_index) {
<a name="l02378"></a>02378     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> var_index = 0; var_index &lt; size; ++var_index) {
<a name="l02379"></a>02379       one_tuple[var_index] = t-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[tuple_index * size + var_index]-&gt;getBool();
<a name="l02380"></a>02380     }
<a name="l02381"></a>02381     tuples.Insert(one_tuple);
<a name="l02382"></a>02382   }
<a name="l02383"></a>02383   Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeAllowedAssignments(variables, tuples);
<a name="l02384"></a>02384   VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l02385"></a>02385   solver-&gt;AddConstraint(ct);
<a name="l02386"></a>02386 }
<a name="l02387"></a>02387 
<a name="l02388"></a><a class="code" href="namespaceoperations__research.html#7387d676e8313efbf7240c5c51146627">02388</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#7387d676e8313efbf7240c5c51146627">p_maximum_int</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l02389"></a>02389   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l02390"></a>02390   IntVar* <span class="keyword">const</span> target = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0))-&gt;Var();
<a name="l02391"></a>02391   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l02392"></a>02392   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l02393"></a>02393   std::vector&lt;IntVar*&gt; variables(size);
<a name="l02394"></a>02394   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l02395"></a>02395     variables[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l02396"></a>02396   }
<a name="l02397"></a>02397   Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeMaxEquality(variables, target);
<a name="l02398"></a>02398   VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l02399"></a>02399   solver-&gt;AddConstraint(ct);
<a name="l02400"></a>02400 }
<a name="l02401"></a>02401 
<a name="l02402"></a><a class="code" href="namespaceoperations__research.html#3bfe12d5e750284a7b550022a76408ae">02402</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#3bfe12d5e750284a7b550022a76408ae">p_minimum_int</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l02403"></a>02403   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l02404"></a>02404   IntVar* <span class="keyword">const</span> target = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0))-&gt;Var();
<a name="l02405"></a>02405   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l02406"></a>02406   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l02407"></a>02407   std::vector&lt;IntVar*&gt; variables(size);
<a name="l02408"></a>02408   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l02409"></a>02409     variables[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l02410"></a>02410   }
<a name="l02411"></a>02411   Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeMinEquality(variables, target);
<a name="l02412"></a>02412   VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l02413"></a>02413   solver-&gt;AddConstraint(ct);
<a name="l02414"></a>02414 }
<a name="l02415"></a>02415 
<a name="l02416"></a><a class="code" href="namespaceoperations__research.html#749c9979330b4947320285cd94b07367">02416</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#749c9979330b4947320285cd94b07367">p_sort</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l02417"></a>02417   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l02418"></a>02418   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l02419"></a>02419   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l02420"></a>02420   std::vector&lt;IntVar*&gt; variables(size);
<a name="l02421"></a>02421   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l02422"></a>02422     variables[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l02423"></a>02423   }
<a name="l02424"></a>02424   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_sorted = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l02425"></a>02425   <span class="keyword">const</span> <span class="keywordtype">int</span> csize = array_sorted-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l02426"></a>02426   std::vector&lt;IntVar*&gt; sorted(csize);
<a name="l02427"></a>02427   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; csize; ++i) {
<a name="l02428"></a>02428     sorted[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_sorted-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l02429"></a>02429   }
<a name="l02430"></a>02430   Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeSortingConstraint(variables, sorted);
<a name="l02431"></a>02431   VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l02432"></a>02432   solver-&gt;AddConstraint(ct);
<a name="l02433"></a>02433 }
<a name="l02434"></a>02434 
<a name="l02435"></a><a class="code" href="namespaceoperations__research.html#efba28926f01e2c6ed153e5002112d91">02435</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#efba28926f01e2c6ed153e5002112d91">p_fixed_cumulative</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l02436"></a>02436   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l02437"></a>02437   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l02438"></a>02438   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l02439"></a>02439   std::vector&lt;IntVar*&gt; start_variables(size);
<a name="l02440"></a>02440   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l02441"></a>02441     start_variables[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l02442"></a>02442   }
<a name="l02443"></a>02443   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_durations = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l02444"></a>02444   <span class="keyword">const</span> <span class="keywordtype">int</span> dsize = array_durations-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l02445"></a>02445   std::vector&lt;int64&gt; durations(dsize);
<a name="l02446"></a>02446   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; dsize; ++i) {
<a name="l02447"></a>02447     durations[i] = array_durations-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt();
<a name="l02448"></a>02448   }
<a name="l02449"></a>02449   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_usages = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l02450"></a>02450   <span class="keyword">const</span> <span class="keywordtype">int</span> usize = array_usages-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l02451"></a>02451   std::vector&lt;int64&gt; usages(usize);
<a name="l02452"></a>02452   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; usize; ++i) {
<a name="l02453"></a>02453     usages[i] = array_usages-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt();
<a name="l02454"></a>02454   }
<a name="l02455"></a>02455   std::vector&lt;IntervalVar*&gt; intervals;
<a name="l02456"></a>02456   solver-&gt;MakeFixedDurationIntervalVarArray(start_variables,
<a name="l02457"></a>02457                                             durations,
<a name="l02458"></a>02458                                             <span class="stringliteral">""</span>,
<a name="l02459"></a>02459                                             &amp;intervals);
<a name="l02460"></a>02460   <span class="keyword">const</span> int64 capacity = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(3)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>();
<a name="l02461"></a>02461   Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeCumulative(intervals,
<a name="l02462"></a>02462                                                 usages,
<a name="l02463"></a>02463                                                 capacity,
<a name="l02464"></a>02464                                                 <span class="stringliteral">""</span>);
<a name="l02465"></a>02465   VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l02466"></a>02466   solver-&gt;AddConstraint(ct);
<a name="l02467"></a>02467 }
<a name="l02468"></a>02468 
<a name="l02469"></a><a class="code" href="namespaceoperations__research.html#67207ae834af03523a5683b79afc1e86">02469</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#67207ae834af03523a5683b79afc1e86">p_var_cumulative</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l02470"></a>02470   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l02471"></a>02471   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l02472"></a>02472   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l02473"></a>02473   std::vector&lt;IntVar*&gt; start_variables(size);
<a name="l02474"></a>02474   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l02475"></a>02475     start_variables[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l02476"></a>02476   }
<a name="l02477"></a>02477   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_durations = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l02478"></a>02478   <span class="keyword">const</span> <span class="keywordtype">int</span> dsize = array_durations-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l02479"></a>02479   std::vector&lt;int64&gt; durations(dsize);
<a name="l02480"></a>02480   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; dsize; ++i) {
<a name="l02481"></a>02481     durations[i] = array_durations-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt();
<a name="l02482"></a>02482   }
<a name="l02483"></a>02483   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_usages = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l02484"></a>02484   <span class="keyword">const</span> <span class="keywordtype">int</span> usize = array_usages-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l02485"></a>02485   std::vector&lt;int64&gt; usages(usize);
<a name="l02486"></a>02486   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; usize; ++i) {
<a name="l02487"></a>02487     usages[i] = array_usages-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i]-&gt;getInt();
<a name="l02488"></a>02488   }
<a name="l02489"></a>02489   std::vector&lt;IntervalVar*&gt; intervals;
<a name="l02490"></a>02490   solver-&gt;MakeFixedDurationIntervalVarArray(start_variables,
<a name="l02491"></a>02491                                             durations,
<a name="l02492"></a>02492                                             <span class="stringliteral">""</span>,
<a name="l02493"></a>02493                                             &amp;intervals);
<a name="l02494"></a>02494   IntVar* <span class="keyword">const</span> capacity = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(3))-&gt;Var();
<a name="l02495"></a>02495   Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeCumulative(intervals,
<a name="l02496"></a>02496                                                 usages,
<a name="l02497"></a>02497                                                 capacity,
<a name="l02498"></a>02498                                                 <span class="stringliteral">""</span>);
<a name="l02499"></a>02499   VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l02500"></a>02500   solver-&gt;AddConstraint(ct);
<a name="l02501"></a>02501 }
<a name="l02502"></a>02502 
<a name="l02503"></a><a class="code" href="namespaceoperations__research.html#2590e4a33751df4fa699e58a82892c3b">02503</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#2590e4a33751df4fa699e58a82892c3b">p_true_constraint</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {}
<a name="l02504"></a>02504 
<a name="l02505"></a><a class="code" href="namespaceoperations__research.html#16ad34ec6dbd9957eaadbe69bb39b67b">02505</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#16ad34ec6dbd9957eaadbe69bb39b67b">p_sliding_sum</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l02506"></a>02506   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l02507"></a>02507   <span class="keyword">const</span> <span class="keywordtype">int</span> low = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>();
<a name="l02508"></a>02508   <span class="keyword">const</span> <span class="keywordtype">int</span> up = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>();
<a name="l02509"></a>02509   <span class="keyword">const</span> <span class="keywordtype">int</span> seq = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#82f72eb772fa55a97938dac93d99a3e4" title="Cast this node to an integer node.">getInt</a>();
<a name="l02510"></a>02510   <a class="code" href="classoperations__research_1_1AstArray.html" title="Array node">AstArray</a>* <span class="keyword">const</span> array_variables = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(3)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#de326d9355b68c1d6b8e33a8521313fd" title="Cast this node to an array node.">getArray</a>();
<a name="l02511"></a>02511   <span class="keyword">const</span> <span class="keywordtype">int</span> size = array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>.size();
<a name="l02512"></a>02512   std::vector&lt;IntVar*&gt; variables(size);
<a name="l02513"></a>02513   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {
<a name="l02514"></a>02514     variables[i] = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(array_variables-&gt;<a class="code" href="classoperations__research_1_1AstArray.html#b0798e2b3779eb90c3fc7ed37379e815">a</a>[i])-&gt;Var();
<a name="l02515"></a>02515   }
<a name="l02516"></a>02516   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size - seq; ++i) {
<a name="l02517"></a>02517     std::vector&lt;IntVar*&gt; tmp(seq);
<a name="l02518"></a>02518     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; seq; ++k) {
<a name="l02519"></a>02519       tmp[k] = variables[i + k];
<a name="l02520"></a>02520     }
<a name="l02521"></a>02521     IntVar* <span class="keyword">const</span> sum_var = solver-&gt;MakeSum(tmp)-&gt;Var();
<a name="l02522"></a>02522     sum_var-&gt;SetRange(low, up);
<a name="l02523"></a>02523   }
<a name="l02524"></a>02524 }
<a name="l02525"></a>02525 
<a name="l02526"></a>02526 <span class="keyword">class </span>IntBuilder {
<a name="l02527"></a>02527  <span class="keyword">public</span>:
<a name="l02528"></a>02528   IntBuilder(<span class="keywordtype">void</span>) {
<a name="l02529"></a>02529     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_eq"</span>, &amp;<a class="code" href="namespaceoperations__research.html#2ad99e41ce8ae1969087cf8697fc5e32">p_int_eq</a>);
<a name="l02530"></a>02530     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_ne"</span>, &amp;<a class="code" href="namespaceoperations__research.html#6771e5a6eab0b5ecd335cdd6b63fd814">p_int_ne</a>);
<a name="l02531"></a>02531     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_ge"</span>, &amp;<a class="code" href="namespaceoperations__research.html#345f858085821cdbb35379c668c5ad5f">p_int_ge</a>);
<a name="l02532"></a>02532     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_gt"</span>, &amp;<a class="code" href="namespaceoperations__research.html#a39f1a98ba049baaa44193e37c1a5551">p_int_gt</a>);
<a name="l02533"></a>02533     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_le"</span>, &amp;<a class="code" href="namespaceoperations__research.html#66d7a8fc22b27ed89860fb3ad0dafd15">p_int_le</a>);
<a name="l02534"></a>02534     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_lt"</span>, &amp;<a class="code" href="namespaceoperations__research.html#a2be5e1bcf374940774f420afb7aa60b">p_int_lt</a>);
<a name="l02535"></a>02535     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_eq_reif"</span>, &amp;<a class="code" href="namespaceoperations__research.html#a1eb54fb12936240be4cd64ab8003e7c" title="Comparisons.">p_int_eq_reif</a>);
<a name="l02536"></a>02536     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_ne_reif"</span>, &amp;<a class="code" href="namespaceoperations__research.html#63a6e6aeb39f730a5ac167d12927d995">p_int_ne_reif</a>);
<a name="l02537"></a>02537     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_ge_reif"</span>, &amp;<a class="code" href="namespaceoperations__research.html#39a0e0657779841dc5dacea9af108277">p_int_ge_reif</a>);
<a name="l02538"></a>02538     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_gt_reif"</span>, &amp;<a class="code" href="namespaceoperations__research.html#b128bd8d373afbd5df7477c4f8a254d0">p_int_gt_reif</a>);
<a name="l02539"></a>02539     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_le_reif"</span>, &amp;<a class="code" href="namespaceoperations__research.html#b71839382eb30974e13c669fe4db18e4">p_int_le_reif</a>);
<a name="l02540"></a>02540     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_lt_reif"</span>, &amp;<a class="code" href="namespaceoperations__research.html#fce56a8bb61f7803ebcd336cc46ce803">p_int_lt_reif</a>);
<a name="l02541"></a>02541     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_lin_eq"</span>, &amp;<a class="code" href="namespaceoperations__research.html#9f315bab72f4735ba4d30d4b5374cd92">p_int_lin_eq</a>);
<a name="l02542"></a>02542     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_lin_eq_reif"</span>, &amp;<a class="code" href="namespaceoperations__research.html#ac813725e27f155adc57667f1579ab17">p_int_lin_eq_reif</a>);
<a name="l02543"></a>02543     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_lin_ne"</span>, &amp;<a class="code" href="namespaceoperations__research.html#1e7aa770d3f88bb376e26ad5fa28616d">p_int_lin_ne</a>);
<a name="l02544"></a>02544     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_lin_ne_reif"</span>, &amp;<a class="code" href="namespaceoperations__research.html#2b6f6cfb1a1f00936db5d7c43b1fd99f">p_int_lin_ne_reif</a>);
<a name="l02545"></a>02545     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_lin_le"</span>, &amp;<a class="code" href="namespaceoperations__research.html#3db0130160428fa002794d0cc1540ba1">p_int_lin_le</a>);
<a name="l02546"></a>02546     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_lin_le_reif"</span>, &amp;<a class="code" href="namespaceoperations__research.html#17fbb842537a117a0503d79f58bccbad">p_int_lin_le_reif</a>);
<a name="l02547"></a>02547     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_lin_lt"</span>, &amp;<a class="code" href="namespaceoperations__research.html#9639e0f874e427fdd3e7d159da6fa3c5">p_int_lin_lt</a>);
<a name="l02548"></a>02548     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_lin_lt_reif"</span>, &amp;<a class="code" href="namespaceoperations__research.html#30e73b0077b71510effb9b7e41743bda">p_int_lin_lt_reif</a>);
<a name="l02549"></a>02549     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_lin_ge"</span>, &amp;<a class="code" href="namespaceoperations__research.html#f5a9a3a2d0feb39d322678e870f0ef40">p_int_lin_ge</a>);
<a name="l02550"></a>02550     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_lin_ge_reif"</span>, &amp;<a class="code" href="namespaceoperations__research.html#f4903a664153acc16e423443dc4e6c9b">p_int_lin_ge_reif</a>);
<a name="l02551"></a>02551     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_lin_gt"</span>, &amp;<a class="code" href="namespaceoperations__research.html#e1161f0f92341af25486f165f12a2746">p_int_lin_gt</a>);
<a name="l02552"></a>02552     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_lin_gt_reif"</span>, &amp;<a class="code" href="namespaceoperations__research.html#5da4dce39576c6009f3b1466888fe2bf">p_int_lin_gt_reif</a>);
<a name="l02553"></a>02553     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_plus"</span>, &amp;<a class="code" href="namespaceoperations__research.html#dec750ebad57e441acf98a927e392c60" title="arithmetic constraints">p_int_plus</a>);
<a name="l02554"></a>02554     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_minus"</span>, &amp;<a class="code" href="namespaceoperations__research.html#bfb7a4855c1f1541a24eaf2de60ac7f7">p_int_minus</a>);
<a name="l02555"></a>02555     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_times"</span>, &amp;<a class="code" href="namespaceoperations__research.html#b7a4ac2e431aae10dc7495c5ce794996">p_int_times</a>);
<a name="l02556"></a>02556     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_div"</span>, &amp;<a class="code" href="namespaceoperations__research.html#2b6798c6cad4dc4d54139caba0811189">p_int_div</a>);
<a name="l02557"></a>02557     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_mod"</span>, &amp;<a class="code" href="namespaceoperations__research.html#6066d735099c0866e314da237fca42b1">p_int_mod</a>);
<a name="l02558"></a>02558     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_min"</span>, &amp;<a class="code" href="namespaceoperations__research.html#7dc292c6d60a0663e0c7f9e889da5842">p_int_min</a>);
<a name="l02559"></a>02559     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_max"</span>, &amp;<a class="code" href="namespaceoperations__research.html#ba36a785cf33b7c8410b2324354017ad">p_int_max</a>);
<a name="l02560"></a>02560     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_abs"</span>, &amp;<a class="code" href="namespaceoperations__research.html#5ebf1755d953faf375f02c4a1b375e8f">p_abs</a>);
<a name="l02561"></a>02561     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_negate"</span>, &amp;<a class="code" href="namespaceoperations__research.html#4a9940ecaf77470f0906599d0ce081a1">p_int_negate</a>);
<a name="l02562"></a>02562     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"bool_eq"</span>, &amp;<a class="code" href="namespaceoperations__research.html#9de2a8148ffbe7154efded418f5944b0" title="Bools.">p_bool_eq</a>);
<a name="l02563"></a>02563     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"bool_eq_reif"</span>, &amp;<a class="code" href="namespaceoperations__research.html#2e017c15a7a6b92185cf46e6bd1ff815" title="Comparisons.">p_bool_eq_reif</a>);
<a name="l02564"></a>02564     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"bool_ne"</span>, &amp;<a class="code" href="namespaceoperations__research.html#31a0832ed1fa3ba595bdc94b6b5423f1">p_bool_ne</a>);
<a name="l02565"></a>02565     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"bool_ne_reif"</span>, &amp;<a class="code" href="namespaceoperations__research.html#5798dcbadb5b970904b121f395fba039">p_bool_ne_reif</a>);
<a name="l02566"></a>02566     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"bool_ge"</span>, &amp;<a class="code" href="namespaceoperations__research.html#3e48b3c33396e63208c1accdfce69ea9">p_bool_ge</a>);
<a name="l02567"></a>02567     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"bool_ge_reif"</span>, &amp;<a class="code" href="namespaceoperations__research.html#c3d946e96043f63f18427838c3f832e6">p_bool_ge_reif</a>);
<a name="l02568"></a>02568     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"bool_le"</span>, &amp;<a class="code" href="namespaceoperations__research.html#77768fdba486af96ca8f916a339d362c">p_bool_le</a>);
<a name="l02569"></a>02569     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"bool_le_reif"</span>, &amp;<a class="code" href="namespaceoperations__research.html#ee926cc5da3cb9c369053ba24185c3c5">p_bool_le_reif</a>);
<a name="l02570"></a>02570     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"bool_gt"</span>, &amp;<a class="code" href="namespaceoperations__research.html#16929d502b80ef208245438b2284f5a3">p_bool_gt</a>);
<a name="l02571"></a>02571     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"bool_gt_reif"</span>, &amp;<a class="code" href="namespaceoperations__research.html#54b65c2d9414470cb60feaae650c3299">p_bool_gt_reif</a>);
<a name="l02572"></a>02572     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"bool_lt"</span>, &amp;<a class="code" href="namespaceoperations__research.html#b10933ef746d2672637bc9a480907f99">p_bool_lt</a>);
<a name="l02573"></a>02573     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"bool_lt_reif"</span>, &amp;<a class="code" href="namespaceoperations__research.html#f616dc3ee3f059f4fcbb3fe02ea6cc5e">p_bool_lt_reif</a>);
<a name="l02574"></a>02574     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"bool_or"</span>, &amp;<a class="code" href="namespaceoperations__research.html#c524608736312324bc416e13548fcfee">p_bool_or</a>);
<a name="l02575"></a>02575     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"bool_and"</span>, &amp;<a class="code" href="namespaceoperations__research.html#c524608736312324bc416e13548fcfee">p_bool_or</a>);
<a name="l02576"></a>02576     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"bool_xor"</span>, &amp;<a class="code" href="namespaceoperations__research.html#832e541a9e1461baa7c387cf0ca99d4d">p_bool_xor</a>);
<a name="l02577"></a>02577     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"array_bool_and"</span>, &amp;<a class="code" href="namespaceoperations__research.html#a0e9a5cdafdaf99510168cd41a8b1eaa">p_array_bool_and</a>);
<a name="l02578"></a>02578     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"array_bool_or"</span>, &amp;<a class="code" href="namespaceoperations__research.html#fd2dcf78dc3f4b7fde9d36b06727a526">p_array_bool_or</a>);
<a name="l02579"></a>02579     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"bool_clause"</span>, &amp;<a class="code" href="namespaceoperations__research.html#84df8ddff5b2a2c77df186c48ae42185">p_array_bool_clause</a>);
<a name="l02580"></a>02580     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"bool_clause_reif"</span>,
<a name="l02581"></a>02581                                   &amp;<a class="code" href="namespaceoperations__research.html#5d4955ec1a0fb0549e2f096b9d2ca2cd">p_array_bool_clause_reif</a>);
<a name="l02582"></a>02582     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"bool_left_imp"</span>, &amp;<a class="code" href="namespaceoperations__research.html#77768fdba486af96ca8f916a339d362c">p_bool_le</a>);
<a name="l02583"></a>02583     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"bool_right_imp"</span>, &amp;<a class="code" href="namespaceoperations__research.html#3e48b3c33396e63208c1accdfce69ea9">p_bool_ge</a>);
<a name="l02584"></a>02584     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"bool_not"</span>, &amp;<a class="code" href="namespaceoperations__research.html#6c7a7746b38530b793a4af9e75be31c4">p_bool_not</a>);
<a name="l02585"></a>02585     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"array_int_element"</span>, &amp;<a class="code" href="namespaceoperations__research.html#11a0442c65aef7d2bc48e22f0aeeedf6" title="element constraints">p_array_int_element</a>);
<a name="l02586"></a>02586     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"array_var_int_element"</span>,
<a name="l02587"></a>02587                                   &amp;<a class="code" href="namespaceoperations__research.html#1707a6942703b7ea77a617fdeb1fa6f3">p_array_var_int_element</a>);
<a name="l02588"></a>02588     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"array_var_int_position"</span>,
<a name="l02589"></a>02589                                   &amp;<a class="code" href="namespaceoperations__research.html#e17de8a83d8acc0d9fbde8ef695af7a8">p_array_var_int_position</a>);
<a name="l02590"></a>02590     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"array_bool_element"</span>, &amp;<a class="code" href="namespaceoperations__research.html#5a83b894e3e4f0067e044424c07ad009">p_array_bool_element</a>);
<a name="l02591"></a>02591     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"array_var_bool_element"</span>,
<a name="l02592"></a>02592                                   &amp;<a class="code" href="namespaceoperations__research.html#1c8a3b099c07db6fbdbfb0a9703fdff4">p_array_var_bool_element</a>);
<a name="l02593"></a>02593     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"bool2bool"</span>, &amp;<a class="code" href="namespaceoperations__research.html#feb488db29d4a895d6d72f5337abef62">p_bool2bool</a>);
<a name="l02594"></a>02594     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"bool2int"</span>, &amp;<a class="code" href="namespaceoperations__research.html#150c5048cce12507710f03055e2dbcd4" title="coercion constraints">p_bool2int</a>);
<a name="l02595"></a>02595     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int2int"</span>, &amp;<a class="code" href="namespaceoperations__research.html#e5f57d887bbcaa1c4bc752e2183c5035">p_int2int</a>);
<a name="l02596"></a>02596     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"int_in"</span>, &amp;<a class="code" href="namespaceoperations__research.html#b3c60b536c09a8579f5132f5b86185e8">p_int_in</a>);
<a name="l02597"></a>02597     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"all_different_int"</span>, &amp;<a class="code" href="namespaceoperations__research.html#64e2e1a4c24fa6b5c0a565048606c0ac">p_all_different_int</a>);
<a name="l02598"></a>02598     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"count"</span>, &amp;<a class="code" href="namespaceoperations__research.html#32839379145dab650b3b1ff2f56764eb">p_count</a>);
<a name="l02599"></a>02599     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"global_cardinality"</span>, &amp;<a class="code" href="namespaceoperations__research.html#da8c646222e45b36157cf24343f4a273">p_global_cardinality</a>);
<a name="l02600"></a>02600     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"global_cardinality_old"</span>,
<a name="l02601"></a>02601                                   &amp;<a class="code" href="namespaceoperations__research.html#c392783baf53a096ccb86deeee1782ab">p_global_cardinality_old</a>);
<a name="l02602"></a>02602     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"table_int"</span>, &amp;<a class="code" href="namespaceoperations__research.html#1f3aaeedf5f6ecff40b795a62d4d2a56">p_table_int</a>);
<a name="l02603"></a>02603     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"table_bool"</span>, &amp;<a class="code" href="namespaceoperations__research.html#0d5fde6836d111f32245209c1f6f34dd">p_table_bool</a>);
<a name="l02604"></a>02604     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"maximum_int"</span>, &amp;<a class="code" href="namespaceoperations__research.html#7387d676e8313efbf7240c5c51146627">p_maximum_int</a>);
<a name="l02605"></a>02605     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"minimum_int"</span>, &amp;<a class="code" href="namespaceoperations__research.html#3bfe12d5e750284a7b550022a76408ae">p_minimum_int</a>);
<a name="l02606"></a>02606     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"sort"</span>, &amp;<a class="code" href="namespaceoperations__research.html#749c9979330b4947320285cd94b07367">p_sort</a>);
<a name="l02607"></a>02607     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"fixed_cumulative"</span>, &amp;<a class="code" href="namespaceoperations__research.html#efba28926f01e2c6ed153e5002112d91">p_fixed_cumulative</a>);
<a name="l02608"></a>02608     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"var_cumulative"</span>, &amp;<a class="code" href="namespaceoperations__research.html#67207ae834af03523a5683b79afc1e86">p_var_cumulative</a>);
<a name="l02609"></a>02609     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"true_constraint"</span>, &amp;<a class="code" href="namespaceoperations__research.html#2590e4a33751df4fa699e58a82892c3b">p_true_constraint</a>);
<a name="l02610"></a>02610     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"sliding_sum"</span>, &amp;<a class="code" href="namespaceoperations__research.html#16ad34ec6dbd9957eaadbe69bb39b67b">p_sliding_sum</a>);
<a name="l02611"></a>02611   }
<a name="l02612"></a>02612 };
<a name="l02613"></a><a class="code" href="namespaceoperations__research.html#ff7bca684d0375d2d4e0e0c8f446efb1">02613</a> IntBuilder <a class="code" href="namespaceoperations__research.html#ff7bca684d0375d2d4e0e0c8f446efb1">__int_Builder</a>;
<a name="l02614"></a>02614 
<a name="l02615"></a><a class="code" href="namespaceoperations__research.html#3b9d3555dbcc043061960d9b89d2be4f">02615</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#3b9d3555dbcc043061960d9b89d2be4f">p_set_in</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l02616"></a>02616   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l02617"></a>02617   IntVar* <span class="keyword">const</span> var = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0))-&gt;Var();
<a name="l02618"></a>02618   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#40df48d7c99d395a31cccdb309971eb7" title="Test if node is a set literal node.">isSet</a>()) {
<a name="l02619"></a>02619     <a class="code" href="classoperations__research_1_1AstSetLit.html" title="Set literal node">AstSetLit</a>* <span class="keyword">const</span> domain = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#a2360fc2e4c5d57156d9e2d0ffe03f31" title="Cast this node to a set literal node.">getSet</a>();
<a name="l02620"></a>02620     <span class="keywordflow">if</span> (domain-&gt;<a class="code" href="classoperations__research_1_1AstSetLit.html#b1f3e7a964661a8cdc95e4da9f38d033">interval</a>) {
<a name="l02621"></a>02621       Constraint* <span class="keyword">const</span> ct =
<a name="l02622"></a>02622           solver-&gt;MakeBetweenCt(var, domain-&gt;<a class="code" href="classoperations__research_1_1AstSetLit.html#cc6211973a92c4711637c205c1aaacae">imin</a>, domain-&gt;<a class="code" href="classoperations__research_1_1AstSetLit.html#7065f4f6a852778871d4a30cf478376a">imax</a>);
<a name="l02623"></a>02623       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;<a class="code" href="classoperations__research_1_1AstSetLit.html#60b2ba8dc1e35192b131cb71db5eb631" title="Output string representation.">DebugString</a>();
<a name="l02624"></a>02624       solver-&gt;AddConstraint(ct);
<a name="l02625"></a>02625     } <span class="keywordflow">else</span> {
<a name="l02626"></a>02626       Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeMemberCt(var, domain-&gt;<a class="code" href="classoperations__research_1_1AstSetLit.html#70658e37c7d9deb940af34cdd5f84add">s</a>);
<a name="l02627"></a>02627       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l02628"></a>02628       solver-&gt;AddConstraint(ct);
<a name="l02629"></a>02629     }
<a name="l02630"></a>02630   } <span class="keywordflow">else</span> {
<a name="l02631"></a>02631     <span class="keywordflow">throw</span> <a class="code" href="classoperations__research_1_1Error.html" title="Exception class for FlatZinc errors">Error</a>(<span class="stringliteral">"ModelBuilder"</span>,
<a name="l02632"></a>02632                 std::string(<span class="stringliteral">"Constraint "</span>) + spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#b5e09dc7bc835bddd6221a6ec24f88d0">Id</a>() +
<a name="l02633"></a>02633                 <span class="stringliteral">" does not support variable sets"</span>);
<a name="l02634"></a>02634   }
<a name="l02635"></a>02635 }
<a name="l02636"></a><a class="code" href="namespaceoperations__research.html#1b361805c13e7952c492a289ac81304b">02636</a> <span class="keywordtype">void</span> <a class="code" href="namespaceoperations__research.html#1b361805c13e7952c492a289ac81304b">p_set_in_reif</a>(<a class="code" href="classoperations__research_1_1FlatZincModel.html" title="A space that can be initialized with a FlatZinc model.">FlatZincModel</a>* <span class="keyword">const</span> model, <a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l02637"></a>02637   Solver* <span class="keyword">const</span> solver = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#e88cf210e9a28a35c6afec4d3d278fff">solver</a>();
<a name="l02638"></a>02638   IntVar* <span class="keyword">const</span> var = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(0))-&gt;Var();
<a name="l02639"></a>02639   IntVar* <span class="keyword">const</span> target = model-&gt;<a class="code" href="classoperations__research_1_1FlatZincModel.html#5c0c0354f67a5350a7cea5cdbd5c5fdd">GetIntExpr</a>(spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(2))-&gt;Var();
<a name="l02640"></a>02640   <span class="keywordflow">if</span> (spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#40df48d7c99d395a31cccdb309971eb7" title="Test if node is a set literal node.">isSet</a>()) {
<a name="l02641"></a>02641     <a class="code" href="classoperations__research_1_1AstSetLit.html" title="Set literal node">AstSetLit</a>* <span class="keyword">const</span> domain = spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#3811d8604a3f7631a1bac0702a5cee40">Arg</a>(1)-&gt;<a class="code" href="classoperations__research_1_1AstNode.html#a2360fc2e4c5d57156d9e2d0ffe03f31" title="Cast this node to a set literal node.">getSet</a>();
<a name="l02642"></a>02642     <span class="keywordflow">if</span> (domain-&gt;<a class="code" href="classoperations__research_1_1AstSetLit.html#b1f3e7a964661a8cdc95e4da9f38d033">interval</a>) {
<a name="l02643"></a>02643       Constraint* <span class="keyword">const</span> ct =
<a name="l02644"></a>02644           solver-&gt;MakeIsBetweenCt(var, domain-&gt;<a class="code" href="classoperations__research_1_1AstSetLit.html#cc6211973a92c4711637c205c1aaacae">imin</a>, domain-&gt;<a class="code" href="classoperations__research_1_1AstSetLit.html#7065f4f6a852778871d4a30cf478376a">imax</a>, target);
<a name="l02645"></a>02645       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;<a class="code" href="classoperations__research_1_1AstSetLit.html#60b2ba8dc1e35192b131cb71db5eb631" title="Output string representation.">DebugString</a>();
<a name="l02646"></a>02646       solver-&gt;AddConstraint(ct);
<a name="l02647"></a>02647     } <span class="keywordflow">else</span> {
<a name="l02648"></a>02648       Constraint* <span class="keyword">const</span> ct = solver-&gt;MakeIsMemberCt(var, domain-&gt;<a class="code" href="classoperations__research_1_1AstSetLit.html#70658e37c7d9deb940af34cdd5f84add">s</a>, target);
<a name="l02649"></a>02649       VLOG(1) &lt;&lt; <span class="stringliteral">"  - posted "</span> &lt;&lt; ct-&gt;DebugString();
<a name="l02650"></a>02650       solver-&gt;AddConstraint(ct);
<a name="l02651"></a>02651     }
<a name="l02652"></a>02652   } <span class="keywordflow">else</span> {
<a name="l02653"></a>02653     <span class="keywordflow">throw</span> <a class="code" href="classoperations__research_1_1Error.html" title="Exception class for FlatZinc errors">Error</a>(<span class="stringliteral">"ModelBuilder"</span>,
<a name="l02654"></a>02654                 std::string(<span class="stringliteral">"Constraint "</span>) + spec-&gt;<a class="code" href="classoperations__research_1_1CtSpec.html#b5e09dc7bc835bddd6221a6ec24f88d0">Id</a>() +
<a name="l02655"></a>02655                 <span class="stringliteral">" does not support variable sets"</span>);
<a name="l02656"></a>02656   }
<a name="l02657"></a>02657 }
<a name="l02658"></a>02658 
<a name="l02659"></a>02659 <span class="keyword">class </span>SetBuilder {
<a name="l02660"></a>02660  <span class="keyword">public</span>:
<a name="l02661"></a>02661   SetBuilder(<span class="keywordtype">void</span>) {
<a name="l02662"></a>02662     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"set_in"</span>, &amp;<a class="code" href="namespaceoperations__research.html#3b9d3555dbcc043061960d9b89d2be4f">p_set_in</a>);
<a name="l02663"></a>02663     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Register(<span class="stringliteral">"set_in_reif"</span>, &amp;<a class="code" href="namespaceoperations__research.html#1b361805c13e7952c492a289ac81304b">p_set_in_reif</a>);
<a name="l02664"></a>02664   }
<a name="l02665"></a>02665 };
<a name="l02666"></a><a class="code" href="namespaceoperations__research.html#8ac9f57470060226b22a72e0411dd603">02666</a> SetBuilder <a class="code" href="namespaceoperations__research.html#8ac9f57470060226b22a72e0411dd603">__set_Builder</a>;
<a name="l02667"></a>02667 }  <span class="comment">// namespace</span>
<a name="l02668"></a>02668 
<a name="l02669"></a><a class="code" href="classoperations__research_1_1FlatZincModel.html#e2329963fe72dd1d920c6279d5b88ecb">02669</a> <span class="keywordtype">void</span> FlatZincModel::PostConstraint(<a class="code" href="classoperations__research_1_1CtSpec.html">CtSpec</a>* <span class="keyword">const</span> spec) {
<a name="l02670"></a>02670   <span class="keywordflow">try</span> {
<a name="l02671"></a>02671     <a class="code" href="namespaceoperations__research.html#31a47c353936cd948b73acfe5768186c">global_model_builder</a>.Post(<span class="keyword">this</span>, spec);
<a name="l02672"></a>02672   } <span class="keywordflow">catch</span> (<a class="code" href="classoperations__research_1_1AstTypeError.html" title="Exception signaling type error">AstTypeError</a>&amp; e) {
<a name="l02673"></a>02673     <span class="keywordflow">throw</span> <a class="code" href="classoperations__research_1_1Error.html" title="Exception class for FlatZinc errors">Error</a>(<span class="stringliteral">"Type error"</span>, e.<a class="code" href="classoperations__research_1_1AstTypeError.html#a3e170c6993fc0911c31934e412a066b">what</a>());
<a name="l02674"></a>02674   }
<a name="l02675"></a>02675 }
<a name="l02676"></a>02676 }  <span class="comment">// namespace operations_research</span>
</pre></div></div>

  <!-- Start of footer. -->
  <table width=100% cellpadding=0 cellspacing=0 border=0>
    <tr valign=top>
      <td colspan=2 height=10></td>
    </tr>
    <tr valign=top>
      <td colspan=2 bgcolor=#359621 height=3></td>
    </tr>
  </table>

  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br />

  
  </body>
</html>
